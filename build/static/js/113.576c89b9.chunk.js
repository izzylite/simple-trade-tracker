"use strict";(self.webpackChunkjournotrades=self.webpackChunkjournotrades||[]).push([[113],{151:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(14057),r=n(70579);const a=(0,o.A)((0,r.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt")},22038:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(14057),r=n(70579);const a=(0,o.A)((0,r.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos")},32515:(e,t,n)=>{n.d(t,{A:()=>v});var o=n(89379),r=n(65043),a=n(60267),s=n(38517),l=n(53969),d=n(42579),i=n(92490),c=n(22038),x=n(369),u=n(151),h=n(27421),g=n(46577),m=n(55467),p=n(70579);const v=e=>{var t;let{open:n,onClose:v,imageProp:f}=e;const A=(null===f||void 0===f?void 0:f.allImages)||[],j=null===f||void 0===f?void 0:f.allImages[(null===f||void 0===f?void 0:f.selectetdImageIndex)||0],b=A.length>0?A:j?[j]:[],[y,w]=(0,r.useState)(f);null==y&&f&&w(f);const I=(0,a.A)(),k=b[(null===y||void 0===y?void 0:y.selectetdImageIndex)||0],C=null===k||void 0===k?void 0:k.includes("quickchart.io"),M=null!==(t=null===f||void 0===f?void 0:f.useSolidBackground)&&void 0!==t?t:C,[S,D]=(0,r.useState)(1),[E,L]=(0,r.useState)({x:0,y:0}),[P,T]=(0,r.useState)(!1),[z,R]=(0,r.useState)({x:0,y:0}),W=(0,r.useRef)(null),F=(0,r.useRef)(null),O=()=>{D(1),L({x:0,y:0})},U=(0,r.useCallback)((()=>{b.length<=1||w((e=>e?(0,o.A)((0,o.A)({},e),{},{selectetdImageIndex:(e.selectetdImageIndex+1)%b.length}):e))}),[b.length]),B=(0,r.useCallback)((()=>{b.length<=1||w((e=>e?(0,o.A)((0,o.A)({},e),{},{selectetdImageIndex:(e.selectetdImageIndex-1+b.length)%b.length}):e))}),[b.length]);return(0,r.useEffect)((()=>{n&&O()}),[n,y]),(0,r.useEffect)((()=>{const e=e=>{n&&("ArrowLeft"===e.key?(e.preventDefault(),e.stopPropagation(),B()):"ArrowRight"===e.key?(e.preventDefault(),e.stopPropagation(),U()):"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),v()))};return window.addEventListener("keydown",e,!0),()=>{window.removeEventListener("keydown",e,!0)}}),[n,y,b.length,B,U,v]),(0,r.useEffect)((()=>{const e=()=>{T(!1)};return document.addEventListener("mouseup",e),()=>{document.removeEventListener("mouseup",e)}}),[]),(0,p.jsx)(s.A,{open:n,onClose:v,maxWidth:"md",fullWidth:!0,sx:{zIndex:m.M.DIALOG_POPUP},PaperProps:{sx:{boxShadow:"none",backgroundColor:M?I.palette.background.paper:"transparent",overflow:"hidden",maxWidth:"80%",borderRadius:M?2:0,"& .MuiDialogContent-root":(0,o.A)({},(0,g.J)(I))}},children:b.length>0&&(0,p.jsxs)(p.Fragment,{children:[b.length>1&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.A,{sx:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1200},children:(0,p.jsx)(d.A,{onClick:B,sx:{color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:(0,p.jsx)(i.A,{})})}),(0,p.jsx)(l.A,{sx:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1200},children:(0,p.jsx)(d.A,{onClick:U,sx:{color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:(0,p.jsx)(c.A,{})})})]}),b.length>1&&(0,p.jsxs)(l.A,{sx:{position:"absolute",bottom:16,left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",borderRadius:1,px:1.5,py:.5,fontSize:"0.875rem",fontWeight:500,zIndex:1200},children:[(null===y||void 0===y?void 0:y.selectetdImageIndex)+1," / ",b.length]}),(0,p.jsxs)(l.A,{ref:F,sx:{position:"relative",width:"100%",height:"80vh",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:S>1?"grab":"default",backgroundColor:M?I.palette.background.default:"transparent",padding:M?2:0,"&:active":{cursor:S>1?"grabbing":"default"}},onWheel:e=>{e.preventDefault();const t=e.deltaY>0?Math.max(1,S-.1):Math.min(3,S+.1);D(t)},onMouseDown:e=>{S>1&&(e.preventDefault(),T(!0),R({x:e.clientX-E.x,y:e.clientY-E.y}))},onMouseMove:e=>{if(!P||S<=1)return;e.preventDefault();const t=e.clientX-z.x,n=e.clientY-z.y;if(W.current&&F.current){const e=W.current.getBoundingClientRect(),o=e.width*(S-1)/2,r=e.height*(S-1)/2,a=Math.min(Math.max(-o,t),o),s=Math.min(Math.max(-r,n),r);L({x:a,y:s})}},onMouseUp:e=>{e.preventDefault(),T(!1)},onMouseLeave:e=>{e.preventDefault(),T(!1)},children:[(0,p.jsx)(l.A,{sx:{position:"relative",transform:"scale(".concat(S,") translate(").concat(E.x,"px, ").concat(E.y,"px)"),transition:P?"none":"transform 0.1s ease-out"},children:(0,p.jsx)("img",{ref:W,src:b[(null===y||void 0===y?void 0:y.selectetdImageIndex)||0],alt:"Trade ".concat((null===y||void 0===y?void 0:y.selectetdImageIndex)+1," of ").concat(b.length),style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",userSelect:"none",pointerEvents:"none"}})}),(0,p.jsxs)(l.A,{sx:{position:"absolute",top:16,right:16,display:"flex",gap:1,backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:1,p:.5},children:[(0,p.jsx)(d.A,{onClick:()=>D(Math.max(1,S-.1)),disabled:S<=1,sx:{color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:(0,p.jsx)(x.A,{sx:{transform:"rotate(45deg)"}})}),(0,p.jsx)(d.A,{onClick:()=>D(Math.min(3,S+.1)),disabled:S>=3,sx:{color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:(0,p.jsx)(x.A,{})}),(0,p.jsx)(d.A,{onClick:O,disabled:1===S,sx:{color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:(0,p.jsx)(u.A,{})}),(0,p.jsx)(d.A,{onClick:v,sx:{color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:(0,p.jsx)(h.A,{})})]})]})]})})}},75113:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var o=n(65043),r=n(91283),a=n(4995),s=n(34943),l=n(53969),d=n(23182),i=n(49806),c=n(91449),x=n(17831),u=n(12955),h=n(89379),g=n(80172),m=n(94799),p=n(70298),v=n(55895),f=n(3665),A=n(60267),j=n(29651),b=n(39993),y=n(96590),w=n(32515),I=n(78018),k=n(52468),C=n(70579);const M=e=>{let{shareId:t}=e;const n=(0,A.A)(),[r,a]=(0,o.useState)(null),[s,d]=(0,o.useState)(!0),[i,x]=(0,o.useState)(null),[u,M]=(0,o.useState)(null);if((0,o.useEffect)((()=>{t&&(async()=>{try{d(!0);const e=await(0,k.oj)(t);if(!e||!e.trade)return void x("Shared trade not found or no longer available");I.logger.log("Raw shared trade data:",e),I.logger.log("Trade date:",e.trade.trade_date),I.logger.log("Shared at:",e.sharedAt);const n=e=>{if(!e)return new Date;if(e instanceof Date)return e;if(e.toDate&&"function"===typeof e.toDate)return e.toDate();if(void 0!==e._seconds)return new Date(1e3*e._seconds+(e._nanoseconds||0)/1e6);if("number"===typeof e)return new Date(e);if("string"===typeof e){const t=new Date(e);return isNaN(t.getTime())?new Date:t}return I.logger.warn("Unknown timestamp format:",e),new Date};a({trade:(0,h.A)({},e.trade),viewCount:e.viewCount||0,sharedAt:n(e.sharedAt)})}catch(e){I.logger.error("Error loading shared trade:",e),x("Failed to load shared trade")}finally{d(!1)}})()}),[t]),s)return(0,C.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:(0,C.jsx)(g.A,{})});if(i||!r)return(0,C.jsx)(l.A,{sx:{p:3},children:(0,C.jsx)(c.A,{severity:"error",children:i||"Shared trade not found"})});const{trade:S,viewCount:D,sharedAt:E}=r;return(0,C.jsxs)(l.A,{sx:{maxWidth:800,mx:"auto",p:{xs:2,sm:3},width:"100%"},children:[u&&(0,C.jsx)(w.A,{open:!!u,onClose:()=>M(null),imageProp:u}),(0,C.jsxs)(m.A,{elevation:2,sx:{p:{xs:2,sm:3},mb:{xs:2,sm:3},background:(0,j.X4)(n.palette.primary.main,.05),border:"1px solid ".concat((0,j.X4)(n.palette.primary.main,.1))},children:[(0,C.jsxs)(p.A,{direction:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},justifyContent:"space-between",spacing:{xs:1,sm:0},mb:2,children:[(0,C.jsx)(v.A,{variant:"h5",sx:{fontWeight:600,fontSize:{xs:"1.25rem",sm:"1.5rem"}},children:"\ud83d\udcc8 Shared Trade"}),(0,C.jsxs)(p.A,{direction:"row",alignItems:"center",spacing:1,children:[(0,C.jsx)(f.A,{sx:{fontSize:16,color:"text.secondary"}}),(0,C.jsxs)(v.A,{variant:"caption",color:"text.secondary",children:[D," views"]})]})]}),(0,C.jsxs)(v.A,{variant:"body2",color:"text.secondary",children:["Shared on ",E&&!isNaN(E.getTime())?(0,b.A)(E,"MMMM d, yyyy"):"Unknown date"]})]}),(0,C.jsx)(y.A,{tradeData:S,animate:!1,isExpanded:!0,tradeOperations:{onZoomImage:(e,t,n)=>{M({selectetdImageIndex:n||0,allImages:t||[e]})},onUpdateTradeProperty:void 0,calendarId:void 0,onOpenGalleryMode:void 0,economicFilter:void 0,onOpenAIChat:void 0,isTradeUpdating:void 0,isReadOnly:!0}})]})};var S=n(57779);const D=()=>{const{shareId:e}=(0,r.g)(),t=(0,r.zy)(),[n,h]=((0,r.Zp)(),t.state,(0,o.useState)((()=>localStorage.getItem("themeMode")||"light")));(0,o.useEffect)((()=>{localStorage.setItem("themeMode",n)}),[n]);const g=()=>{h((e=>"light"===e?"dark":"light"))},m=(0,o.useMemo)((()=>(0,x.A)((0,u.J)(n))),[n]);return e?(0,C.jsxs)(a.A,{theme:m,children:[(0,C.jsx)(s.Ay,{}),(0,C.jsxs)(l.A,{sx:{minHeight:"100vh",backgroundColor:"custom.pageBackground"},children:[(0,C.jsx)(S.A,{onToggleTheme:g,mode:n}),(0,C.jsx)(d.A,{sx:{pl:0,pr:0}}),(0,C.jsx)(i.A,{maxWidth:"md",sx:{pt:{xs:2,sm:4},pb:{xs:2,sm:4},px:{xs:1,sm:3}},children:(0,C.jsx)(M,{shareId:e})})]})]}):(0,C.jsxs)(a.A,{theme:m,children:[(0,C.jsx)(s.Ay,{}),(0,C.jsxs)(l.A,{sx:{minHeight:"100vh",backgroundColor:"custom.pageBackground"},children:[(0,C.jsx)(S.A,{onToggleTheme:g,mode:n}),(0,C.jsx)(d.A,{}),(0,C.jsx)(i.A,{maxWidth:"md",sx:{pt:{xs:2,sm:4},pb:{xs:2,sm:4},px:{xs:1,sm:3}},children:(0,C.jsx)(c.A,{severity:"error",children:"Invalid share link"})})]})]})}},92490:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(14057),r=n(70579);const a=(0,o.A)((0,r.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos")}}]);
//# sourceMappingURL=113.576c89b9.chunk.js.map