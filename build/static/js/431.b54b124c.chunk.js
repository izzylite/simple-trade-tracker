"use strict";(self.webpackChunkjournotrades=self.webpackChunkjournotrades||[]).push([[431],{4431:(e,s,a)=>{a.r(s),a.d(s,{default:()=>f});var n=a(89379),r=a(65043),t=a(91283),o=a(4995),d=a(34943),l=a(53969),i=a(23182),c=a(49806),h=a(91449),x=a(80172),m=a(55895),g=a(17831),u=a(12955),A=a(22011),j=a(57779),p=a(52468),v=a(78018),y=a(70579);const f=()=>{const{shareId:e}=(0,t.g)(),s=(0,t.zy)(),[a,f]=((0,t.Zp)(),s.state,(0,r.useState)((()=>localStorage.getItem("themeMode")||"light"))),[b,k]=(0,r.useState)(null),[T,C]=(0,r.useState)(!0),[I,w]=(0,r.useState)(null),[S,B]=(0,r.useState)(!1),[H,W]=(0,r.useState)("loading");(0,r.useEffect)((()=>{localStorage.setItem("themeMode",a)}),[a]);const D=()=>{f((e=>"light"===e?"dark":"light"))},E=(0,r.useMemo)((()=>(0,g.A)((0,u.J)(a))),[a]);return(0,r.useEffect)((()=>{(async()=>{if(!e)return w("Invalid share link"),void C(!1);try{C(!0),w(null);const s=await(0,p.DE)(e),a=s.calendar,r=s.trades,t=(0,n.A)((0,n.A)({},s.shareInfo),{},{createdAt:new Date(s.shareInfo.createdAt)});k({calendar:a,trades:r,shareInfo:t}),document.title="".concat(a.name," - Shared Calendar | Trade Tracker")}catch(I){v.logger.error("Error fetching shared calendar:",I),"functions/not-found"===I.code?w("This shared calendar could not be found. It may have been removed or the link is invalid."):"functions/permission-denied"===I.code?w("This shared calendar is no longer available."):w("Failed to load shared calendar. Please try again later.")}finally{C(!1)}})()}),[e]),e?T?(0,y.jsxs)(o.A,{theme:E,children:[(0,y.jsx)(d.Ay,{}),(0,y.jsxs)(l.A,{sx:{minHeight:"100vh",backgroundColor:"custom.pageBackground"},children:[(0,y.jsx)(j.A,{onToggleTheme:D,mode:a}),(0,y.jsx)(i.A,{sx:{pl:0,pr:0}}),(0,y.jsxs)(c.A,{maxWidth:"md",sx:{pt:{xs:2,sm:4},pb:{xs:2,sm:4},px:{xs:1,sm:3},display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh"},children:[(0,y.jsx)(x.A,{size:60,sx:{mb:2}}),(0,y.jsx)(m.A,{variant:"h6",color:"text.secondary",children:"Loading shared calendar..."})]})]})]}):I?(0,y.jsxs)(o.A,{theme:E,children:[(0,y.jsx)(d.Ay,{}),(0,y.jsxs)(l.A,{sx:{minHeight:"100vh",backgroundColor:"custom.pageBackground"},children:[(0,y.jsx)(j.A,{onToggleTheme:D,mode:a}),(0,y.jsx)(i.A,{sx:{pl:0,pr:0}}),(0,y.jsxs)(c.A,{maxWidth:"md",sx:{pt:{xs:2,sm:4},pb:{xs:2,sm:4},px:{xs:1,sm:3}},children:[(0,y.jsxs)(h.A,{severity:"error",sx:{mb:2},children:[(0,y.jsx)(m.A,{variant:"h6",gutterBottom:!0,children:"Calendar Not Found"}),(0,y.jsx)(m.A,{variant:"body2",children:I})]}),(0,y.jsx)(m.A,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",mt:3},children:"If you believe this is an error, please contact the person who shared this calendar with you."})]})]})]}):b?(0,y.jsxs)(o.A,{theme:E,children:[(0,y.jsx)(d.Ay,{}),(0,y.jsxs)(l.A,{sx:{minHeight:"100vh",backgroundColor:"custom.pageBackground"},children:[(0,y.jsx)(j.A,{onToggleTheme:D,mode:a}),(0,y.jsx)(i.A,{sx:{pl:0,pr:0}}),(0,y.jsx)(A.TradeCalendar,{calendar:b.calendar,setLoading:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading";B(e),W(s)},onToggleTheme:D,mode:a,isReadOnly:!0}),(0,y.jsx)(c.A,{maxWidth:"lg",sx:{py:2},children:(0,y.jsx)(l.A,{sx:{textAlign:"center"},children:(0,y.jsxs)(m.A,{variant:"caption",color:"text.secondary",children:["This calendar has been viewed ",b.shareInfo.viewCount," time",1!==b.shareInfo.viewCount?"s":""]})})})]})]}):(0,y.jsxs)(o.A,{theme:E,children:[(0,y.jsx)(d.Ay,{}),(0,y.jsxs)(l.A,{sx:{minHeight:"100vh",backgroundColor:"custom.pageBackground"},children:[(0,y.jsx)(j.A,{onToggleTheme:D,mode:a}),(0,y.jsx)(i.A,{sx:{pl:0,pr:0}}),(0,y.jsx)(c.A,{maxWidth:"md",sx:{pt:{xs:2,sm:4},pb:{xs:2,sm:4},px:{xs:1,sm:3}},children:(0,y.jsxs)(h.A,{severity:"warning",children:[(0,y.jsx)(m.A,{variant:"h6",gutterBottom:!0,children:"No Calendar Data"}),(0,y.jsx)(m.A,{variant:"body2",children:"The shared calendar data could not be loaded."})]})})]})]}):(0,y.jsxs)(o.A,{theme:E,children:[(0,y.jsx)(d.Ay,{}),(0,y.jsxs)(l.A,{sx:{minHeight:"100vh",backgroundColor:"custom.pageBackground"},children:[(0,y.jsx)(j.A,{onToggleTheme:D,mode:a}),(0,y.jsx)(i.A,{sx:{pl:0,pr:0}}),(0,y.jsx)(c.A,{maxWidth:"md",sx:{pt:{xs:2,sm:4},pb:{xs:2,sm:4},px:{xs:1,sm:3}},children:(0,y.jsx)(h.A,{severity:"error",children:"Invalid share link"})})]})]})}}}]);
//# sourceMappingURL=431.b54b124c.chunk.js.map