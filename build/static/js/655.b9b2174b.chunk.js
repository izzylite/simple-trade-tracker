"use strict";(self.webpackChunkjournotrades=self.webpackChunkjournotrades||[]).push([[655],{87655:(e,t,r)=>{r.r(t),r.d(t,{default:()=>rt});var n=r(89379),a=r(65043),i=r(60267),s=r(86995),o=r(53969),l=r(55895),d=r(91244),c=r(16128),x=r(70298),m=r(29651),p=r(38517),h=r(81911),g=r(78776),u=r(85877),A=r(41859),y=r(63898),j=r(6013),f=r(92248),b=r(22950),v=r(61773),w=r(1422),_=r(14057),C=r(70579);const k=(0,_.A)((0,C.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");var S=r(73069),z=r(5362),R=r(91283),X=r(23893),D=r(7481),I=r(41831),W=r(78018);const T=new I.P;var M=r(39993),P=r(15515);var E=r(49099),L=r(73200),F=r(80045),U=r(58387),O=r(31807),N=r(58128),B=r(28301),H=r(79857),V=r(86061);function Y(e){return(0,V.Ay)("MuiCardActions",e)}(0,H.A)("MuiCardActions",["root","spacing"]);const G=["disableSpacing","className"],J=(0,N.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Z=a.forwardRef((function(e,t){const r=(0,B.b)({props:e,name:"MuiCardActions"}),{disableSpacing:a=!1,className:i}=r,s=(0,F.A)(r,G),o=(0,n.A)((0,n.A)({},r),{},{disableSpacing:a}),l=(e=>{const{classes:t,disableSpacing:r}=e,n={root:["root",!r&&"spacing"]};return(0,O.A)(n,Y,t)})(o);return(0,C.jsx)(J,(0,n.A)({className:(0,U.A)(l.root,i),ownerState:o,ref:t},s))}));var q=r(42579),K=r(4395),Q=r(47471),$=r(79801),ee=r(66185),te=r(12043),re=r(19817),ne=r(39073),ae=r(45837),ie=r(69478);const se=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"N/A";if(!e||!(0,ae.A)(e))return r;try{return(0,M.A)(e,t)}catch(n){return r}},oe=e=>{let{calendar:t,onCalendarClick:r,onEditCalendar:s,onDuplicateCalendar:p,onLinkCalendar:h,onDeleteCalendar:g,onUpdateCalendarProperty:u,formatCurrency:A}=e;const b=(0,i.A)(),[w,_]=a.useState(null),k=(0,a.useCallback)((e=>{e.stopPropagation(),_(e.currentTarget)}),[]),S=(0,a.useCallback)((()=>{_(null)}),[]),R=(0,a.useCallback)((e=>{S(),e()}),[S]),X=(0,a.useMemo)((()=>({total_pnl:t.total_pnl||0,win_rate:t.win_rate||0,total_trades:t.total_trades||0,growth_percentage:t.pnl_performance||0,avg_win:t.avg_win||0,avg_loss:t.avg_loss||0,profit_factor:t.profit_factor||0,max_drawdown:t.max_drawdown||0,drawdown_recovery_needed:t.drawdown_recovery_needed||0,drawdown_duration:t.drawdown_duration||0,drawdown_start_date:t.drawdown_start_date||null,drawdown_end_date:t.drawdown_end_date||null,target_progress:t.target_progress||0,pnl_performance:t.pnl_performance||0,win_count:t.win_count||0,loss_count:t.loss_count||0,current_balance:t.current_balance||t.account_balance,initial_balance:t.account_balance,weekly_pnl:t.weekly_pnl,monthly_pnl:t.monthly_pnl,yearly_pnl:t.yearly_pnl,weekly_pnl_percentage:t.weekly_pnl_percentage,monthly_pnl_percentage:t.monthly_pnl_percentage,yearly_pnl_percentage:t.yearly_pnl_percentage,weekly_progress:t.weekly_progress,monthly_progress:t.monthly_progress})),[t]);return(0,C.jsxs)(d.A,{sx:{cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",height:"auto",borderRadius:1,border:"1px solid",borderColor:(0,m.X4)(b.palette.divider,.1),background:"dark"===b.palette.mode?"linear-gradient(145deg, ".concat((0,m.X4)(b.palette.background.paper,.95)," 0%, ").concat((0,m.X4)(b.palette.background.default,.98)," 100%)"):"linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(248,250,252,0.98) 100%)",backdropFilter:"blur(10px)",boxShadow:"0 4px 20px ".concat((0,m.X4)(b.palette.common.black,"dark"===b.palette.mode?.3:.08)),"&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:"0 20px 40px ".concat((0,m.X4)(b.palette.common.black,"dark"===b.palette.mode?.4:.15)),borderColor:(0,m.X4)(b.palette.primary.main,.3),"& .hero-image":{transform:"scale(1.05)"}}},onClick:()=>r(t.id),children:[(0,C.jsxs)(o.A,{sx:{position:"relative",overflow:"hidden",height:{xs:160,sm:200},flexShrink:0},children:[(0,C.jsx)(o.A,{className:"hero-image",sx:(0,n.A)((0,n.A)({position:"absolute",top:0,left:0,right:0,bottom:0},t.hero_image_url?{backgroundImage:"url(".concat(t.hero_image_url,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{background:"linear-gradient(135deg,\n                ".concat((0,m.X4)(b.palette.primary.main,.1)," 0%,\n                ").concat((0,m.X4)(b.palette.secondary.main,.1)," 50%,\n                ").concat((0,m.X4)(b.palette.primary.main,.05)," 100%)")}),{},{transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:t.hero_image_url?"linear-gradient(135deg, ".concat((0,m.X4)(b.palette.common.black,.2)," 0%, ").concat((0,m.X4)(b.palette.common.black,.1)," 50%, ").concat((0,m.X4)(b.palette.common.black,.4)," 100%)"):"transparent",zIndex:1,transition:"background 0.4s ease"}})}),!t.hero_image_url&&(0,C.jsxs)(o.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2,textAlign:"center",color:(0,m.X4)(b.palette.text.secondary,.6)},children:[(0,C.jsx)(y.A,{sx:{fontSize:"3rem",mb:1,opacity:.4}}),(0,C.jsx)(l.A,{variant:"body2",sx:{fontWeight:500,opacity:.7,fontSize:"0.9rem"},children:t.name})]})]}),(0,C.jsxs)(c.A,{sx:{p:3,display:"flex",flexDirection:"column",flexGrow:1,position:"relative",zIndex:1},children:[(0,C.jsx)(o.A,{sx:{mb:2},children:(0,C.jsxs)(o.A,{sx:{mb:1.5},children:[(0,C.jsxs)(l.A,{variant:"h5",component:"div",sx:{fontWeight:700,color:"text.primary",display:"flex",alignItems:"center",gap:1.5,mb:.5,fontSize:"1.4rem",letterSpacing:"-0.02em",lineHeight:1.2,minWidth:0},children:[(0,C.jsx)(o.A,{component:"span",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minWidth:0,flex:1},children:t.name}),X.total_pnl>0&&(0,C.jsx)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:28,height:28,borderRadius:"50%",bgcolor:(0,m.X4)(b.palette.success.main,.1),border:"1px solid ".concat((0,m.X4)(b.palette.success.main,.2))},children:(0,C.jsx)(j.A,{sx:{fontSize:"1rem",color:"success.main"}})}),X.total_pnl<0&&(0,C.jsx)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:28,height:28,borderRadius:"50%",bgcolor:(0,m.X4)(b.palette.error.main,.1),border:"1px solid ".concat((0,m.X4)(b.palette.error.main,.2))},children:(0,C.jsx)(f.A,{sx:{fontSize:"1rem",color:"error.main"}})})]}),function(e,t,r){const n=e.growth_percentage;return isNaN(n)?null:(0,C.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",mt:1,gap:1.5,p:1.5,borderRadius:2,bgcolor:e.total_pnl>0?(0,m.X4)(t.palette.success.main,.1):e.total_pnl<0?(0,m.X4)(t.palette.error.main,.1):(0,m.X4)(t.palette.grey[500],.1),border:"1px solid ".concat(e.total_pnl>0?(0,m.X4)(t.palette.success.main,.2):e.total_pnl<0?(0,m.X4)(t.palette.error.main,.2):(0,m.X4)(t.palette.grey[500],.2))},children:[(0,C.jsx)(o.A,{sx:{width:40,height:40,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:e.total_pnl>0?(0,m.X4)(t.palette.success.main,.1):e.total_pnl<0?(0,m.X4)(t.palette.error.main,.1):(0,m.X4)(t.palette.grey[500],.1)},children:(0,C.jsx)(j.A,{sx:{fontSize:"1.2rem",color:e.total_pnl>0?t.palette.success.main:e.total_pnl<0?t.palette.error.main:t.palette.grey[500]}})}),(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"h6",sx:{color:e.total_pnl>0?"success.main":e.total_pnl<0?"error.main":"text.secondary",fontWeight:600},children:r(e.total_pnl)}),(0,C.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["Growth: ",e.growth_percentage.toFixed(2),"%"]})]})]})}(X,b,A)]})}),(0,C.jsxs)(x.A,{direction:"row",spacing:3,sx:{mb:1.5},children:[(0,C.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:.8},children:[(0,C.jsx)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:"50%",bgcolor:(0,m.X4)(b.palette.primary.main,.1)},children:(0,C.jsx)(y.A,{sx:{fontSize:"0.8rem",color:"primary.main"}})}),(0,C.jsxs)(l.A,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem",fontWeight:500},children:["Created ",se(t.created_at,"MMM d, yyyy")]})]}),(0,C.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:.8},children:[(0,C.jsx)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:"50%",bgcolor:(0,m.X4)(b.palette.secondary.main,.1)},children:(0,C.jsx)(v.A,{sx:{fontSize:"0.8rem",color:"secondary.main"}})}),(0,C.jsxs)(l.A,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem",fontWeight:500},children:["Updated ",se(t.updated_at,"MMM d, yyyy")]})]})]})]}),(0,C.jsx)(Z,{sx:{justifyContent:"flex-end",alignItems:"center",p:2,borderTop:"1px solid ".concat((0,m.X4)(b.palette.divider,.1))},children:(0,C.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[u&&(0,C.jsx)(ie.A,{type:"calendar",item:t,onUpdateItemProperty:u}),(0,C.jsx)(q.A,{size:"small",onClick:k,sx:{color:"text.secondary","&:hover":{bgcolor:(0,m.X4)(b.palette.primary.main,.1),color:"primary.main"}},children:(0,C.jsx)(te.A,{})}),(0,C.jsxs)(K.A,{anchorEl:w,open:Boolean(w),onClose:S,onClick:e=>e.stopPropagation(),transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,C.jsxs)(Q.A,{onClick:()=>R((()=>s(t))),children:[(0,C.jsx)($.A,{children:(0,C.jsx)(v.A,{fontSize:"small"})}),(0,C.jsx)(ee.A,{children:"Edit"})]}),(0,C.jsxs)(Q.A,{onClick:()=>R((()=>p(t))),children:[(0,C.jsx)($.A,{children:(0,C.jsx)(re.A,{fontSize:"small"})}),(0,C.jsx)(ee.A,{children:"Duplicate"})]}),h&&(0,C.jsxs)(Q.A,{onClick:()=>R((()=>h(t))),children:[(0,C.jsx)($.A,{children:(0,C.jsx)(ne.A,{fontSize:"small"})}),(0,C.jsx)(ee.A,{children:"Link"})]}),(0,C.jsxs)(Q.A,{onClick:()=>R((()=>g(t.id))),sx:{color:"error.main"},children:[(0,C.jsx)($.A,{children:(0,C.jsx)(z.A,{fontSize:"small",sx:{color:"error.main"}})}),(0,C.jsx)(ee.A,{children:"Delete"})]})]})]})})]})},le=a.memo(oe);var de=r(94527);const ce=()=>{const e=(0,i.A)();return(0,C.jsxs)(d.A,{sx:{height:"100%",width:"350px",position:"relative",overflow:"hidden",transition:"transform 0.3s ease-in-out","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,zIndex:1}},children:[(0,C.jsxs)(c.A,{sx:{p:3},children:[(0,C.jsxs)(o.A,{sx:{mb:2.5},children:[(0,C.jsx)(L.A,{height:28,width:"60%",borderRadius:8,variant:"wave",intensity:"medium",sx:{mb:1}}),(0,C.jsxs)(x.A,{direction:"row",spacing:2,sx:{mb:1},children:[(0,C.jsx)(L.A,{height:20,width:"30%",borderRadius:4,variant:"default",intensity:"low"}),(0,C.jsx)(L.A,{height:20,width:"30%",borderRadius:4,variant:"default",intensity:"low"})]})]}),(0,C.jsx)(de.A,{sx:{my:2,opacity:.6}}),(0,C.jsxs)(x.A,{spacing:2,children:[(0,C.jsx)(o.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,m.X4)(e.palette.background.default,.6),mb:1},children:(0,C.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[(0,C.jsx)(L.A,{height:40,width:40,borderRadius:"50%",variant:"pulse",intensity:"medium"}),(0,C.jsxs)(o.A,{sx:{width:"100%"},children:[(0,C.jsx)(L.A,{height:24,width:"40%",borderRadius:6,variant:"wave",intensity:"high",sx:{mb:1}}),(0,C.jsx)(L.A,{height:16,width:"30%",borderRadius:4,variant:"default",intensity:"low"})]})]})}),(0,C.jsxs)(o.A,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:2},children:[(0,C.jsxs)(o.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,m.X4)(e.palette.background.default,.6)},children:[(0,C.jsx)(L.A,{height:16,width:"60%",borderRadius:4,variant:"default",intensity:"low",sx:{mb:1}}),(0,C.jsx)(L.A,{height:24,width:"40%",borderRadius:6,variant:"wave",intensity:"medium"})]}),(0,C.jsxs)(o.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,m.X4)(e.palette.background.default,.6)},children:[(0,C.jsx)(L.A,{height:16,width:"60%",borderRadius:4,variant:"default",intensity:"low",sx:{mb:1}}),(0,C.jsx)(L.A,{height:24,width:"40%",borderRadius:6,variant:"wave",intensity:"medium"})]})]}),(0,C.jsxs)(o.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,m.X4)(e.palette.background.default,.6)},children:[(0,C.jsx)(L.A,{height:16,width:"40%",borderRadius:4,variant:"default",intensity:"low",sx:{mb:1}}),(0,C.jsx)(o.A,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:1},children:[1,2,3].map((e=>(0,C.jsxs)(o.A,{children:[(0,C.jsx)(L.A,{height:14,width:"70%",borderRadius:4,variant:"default",intensity:"low",sx:{mb:.5}}),(0,C.jsx)(L.A,{height:20,width:"50%",borderRadius:6,variant:2===e?"pulse":"default",intensity:"medium"})]},e)))})]})]})]}),(0,C.jsx)(Z,{sx:{justifyContent:"flex-end",p:2,pt:1,borderTop:"1px solid ".concat((0,m.X4)(e.palette.divider,.1))},children:(0,C.jsx)(x.A,{direction:"row",spacing:1,children:[1,2,3].map((e=>(0,C.jsx)(L.A,{height:32,width:80,borderRadius:8,variant:1===e?"pulse":"default",intensity:1===e?"high":"medium"},e)))})})]})};var xe=r(54521),me=r(66524),pe=r(81298),he=r(86296),ge=r(28636),ue=r(74485),Ae=r(32787),ye=r(46577),je=r(75499),fe=r(9475),be=r(50460),ve=r(80172);const we=e=>{let{open:t,calendar:r,isDuplicating:a,onClose:s,onDuplicate:d}=e;const c=(0,i.A)();return(0,C.jsxs)(p.A,(0,n.A)((0,n.A)({open:t,onClose:s,maxWidth:"sm",fullWidth:!0},je.z),{},{children:[(0,C.jsxs)(h.A,{sx:{display:"flex",alignItems:"center",gap:1,color:"primary.main"},children:[(0,C.jsx)(re.A,{fontSize:"small"}),"Duplicate Calendar Options"]}),(0,C.jsx)(g.A,{children:a?(0,C.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:4},children:[(0,C.jsx)(ve.A,{size:40,sx:{mb:2}}),(0,C.jsx)(l.A,{variant:"body1",color:"text.secondary",children:"Duplicating calendar..."})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(l.A,{variant:"body1",sx:{mb:3},children:['How would you like to duplicate "',null===r||void 0===r?void 0:r.name,'"?']}),(0,C.jsxs)(x.A,{spacing:2,children:[(0,C.jsx)(A.A,{variant:"outlined",onClick:()=>d(!1),disabled:a,sx:{p:2,textAlign:"left",justifyContent:"flex-start",borderColor:"primary.main","&:hover":{borderColor:"primary.dark",backgroundColor:(0,m.X4)(c.palette.primary.main,.05)}},children:(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:600,mb:.5},children:"Settings Only"}),(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Copy calendar settings without trades"})]})}),(0,C.jsx)(A.A,{variant:"outlined",onClick:()=>d(!0),disabled:a,sx:{p:2,textAlign:"left",justifyContent:"flex-start",borderColor:"primary.main","&:hover":{borderColor:"primary.dark",backgroundColor:(0,m.X4)(c.palette.primary.main,.05)}},children:(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:600,mb:.5},children:"Settings & Trades"}),(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Copy everything including all trades"})]})})]})]})}),(0,C.jsx)(u.A,{children:(0,C.jsx)(A.A,{onClick:s,disabled:a,sx:{color:"text.secondary"},children:"Cancel"})})]}))};var _e=r(91449),Ce=r(83759),ke=r(10256),Se=r(3353),ze=r(67203),Re=r(26392);const Xe=e=>{let{open:t,calendar:r,calendars:s,isLoading:d,onClose:c,onLink:y,onUnlink:j}=e;const f=(0,i.A)(),[b,v]=(0,a.useState)(""),[w,_]=(0,a.useState)(!1),[k,S]=(0,a.useState)(null),z=s.filter((e=>e.id!==(null===r||void 0===r?void 0:r.id)&&e.linked_to_calendar_id!==(null===r||void 0===r?void 0:r.id))),R=null!==r&&void 0!==r&&r.linked_to_calendar_id?s.find((e=>e.id===r.linked_to_calendar_id)):null;(0,a.useEffect)((()=>{t&&(v(""),S(null))}),[t]);const X=d||w;return(0,C.jsxs)(p.A,(0,n.A)((0,n.A)({open:t,onClose:c,maxWidth:"sm",fullWidth:!0},je.z),{},{children:[(0,C.jsxs)(h.A,{sx:{display:"flex",alignItems:"center",gap:1,color:"primary.main"},children:[(0,C.jsx)(ne.A,{fontSize:"small"}),"Link Calendar"]}),(0,C.jsx)(g.A,{children:X?(0,C.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:4},children:[(0,C.jsx)(ve.A,{size:40,sx:{mb:2}}),(0,C.jsx)(l.A,{variant:"body1",color:"text.secondary",children:w?"Updating link...":"Loading..."})]}):(0,C.jsxs)(x.A,{spacing:3,children:[(0,C.jsx)(_e.A,{severity:"info",sx:{borderRadius:2},children:(0,C.jsxs)(l.A,{variant:"body2",children:['When you link calendars, trades created in "',null===r||void 0===r?void 0:r.name,'" will automatically be copied to the target calendar. Updates and deletes sync for 24 hours after trade creation.']})}),k&&(0,C.jsx)(_e.A,{severity:"error",sx:{borderRadius:2},children:(0,C.jsx)(l.A,{variant:"body2",children:k})}),R?(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Currently linked to:"}),(0,C.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,borderRadius:2,bgcolor:(0,m.X4)(f.palette.primary.main,.08),border:"1px solid ".concat((0,m.X4)(f.palette.primary.main,.2))},children:[(0,C.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,C.jsx)(Ce.A,{label:R.name,color:"primary",variant:"outlined"}),(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Trades sync to this calendar"})]}),(0,C.jsx)(A.A,{variant:"outlined",color:"error",size:"small",startIcon:(0,C.jsx)(Re.A,{}),onClick:async()=>{_(!0);try{await j(),c()}catch(k){console.error("Error unlinking calendar:",k)}finally{_(!1)}},disabled:X,children:"Unlink"})]})]}):(0,C.jsxs)(ke.A,{fullWidth:!0,children:[(0,C.jsx)(Se.A,{id:"target-calendar-label",children:"Target Calendar"}),(0,C.jsx)(ze.A,{labelId:"target-calendar-label",value:b,label:"Target Calendar",onChange:e=>v(e.target.value),disabled:X,children:0===z.length?(0,C.jsx)(Q.A,{value:"",disabled:!0,children:"No available calendars"}):z.map((e=>(0,C.jsx)(Q.A,{value:e.id,children:e.name},e.id)))})]}),!R&&0===z.length&&(0,C.jsx)(_e.A,{severity:"warning",sx:{borderRadius:2},children:(0,C.jsx)(l.A,{variant:"body2",children:"No calendars available to link. Create another calendar first."})})]})}),(0,C.jsxs)(u.A,{children:[(0,C.jsx)(A.A,{onClick:c,disabled:X,sx:{color:"text.secondary"},children:"Cancel"}),!R&&(0,C.jsx)(A.A,{variant:"contained",onClick:async()=>{if(b){_(!0),S(null);try{await y(b),c()}catch(e){console.error("Error linking calendar:",e);const t=e instanceof Error?e.message:"Failed to link calendar";t.toLowerCase().includes("circular")?S("Cannot link: this would create a circular link chain."):S(t)}finally{_(!1)}}},disabled:X||!b,startIcon:(0,C.jsx)(ne.A,{}),children:"Link Calendar"})]})]}))};var De=r(33539),Ie=r(26529),We=r(64),Te=r(25272),Me=r(17347),Pe=r(27421),Ee=r(27496);const Le=(0,_.A)((0,C.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"Restore");var Fe=r(16260),Ue=r(54967),Oe=r(5780),Ne=r(43666);function Be(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function He(e,t){(0,Ne.A)(2,arguments);var r=(0,Fe.A)(e),n=(0,Fe.A)(t),a=Be(r,n),i=Math.abs(function(e,t){(0,Ne.A)(2,arguments);var r=(0,Oe.A)(e),n=(0,Oe.A)(t),a=r.getTime()-(0,Ue.A)(r),i=n.getTime()-(0,Ue.A)(n);return Math.round((a-i)/864e5)}(r,n));r.setDate(r.getDate()-a*i);var s=a*(i-Number(Be(r,n)===-a));return 0===s?0:s}const Ve=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"N/A";if(!e)return r;const n="string"===typeof e?new Date(e):e;if(!(0,ae.A)(n))return r;try{return(0,M.A)(n,t)}catch(a){return r}},Ye=e=>{let{calendar:t,onRestore:r,onPermanentDelete:n}=e;const s=(0,i.A)(),[d,c]=(0,a.useState)(!1),[p,h]=(0,a.useState)(!1),g=(e=>{if(!e)return 30;const t="string"===typeof e?new Date(e):e;if(!(0,ae.A)(t))return 30;const r=He(t,new Date);return Math.max(0,r)})(t.auto_delete_at);return(0,C.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1.5,p:1.5,borderRadius:2,bgcolor:"dark"===s.palette.mode?(0,m.X4)(s.palette.background.paper,.4):(0,m.X4)(s.palette.background.default,.6),border:"1px solid ".concat((0,m.X4)(s.palette.divider,.1)),transition:"all 0.2s"},children:[(0,C.jsx)(De.A,{src:t.hero_image_url||void 0,variant:"rounded",sx:{width:48,height:48,flexShrink:0,bgcolor:(0,m.X4)(s.palette.error.main,.1),opacity:.7,"& img":{objectFit:"cover"}},children:(0,C.jsx)(y.A,{sx:{color:s.palette.text.secondary}})}),(0,C.jsxs)(o.A,{sx:{flex:1,minWidth:0},children:[(0,C.jsx)(l.A,{variant:"subtitle2",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",mb:.25},children:t.name}),(0,C.jsxs)(x.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,C.jsx)(Ee.A,{sx:{fontSize:14,color:"text.secondary"}}),(0,C.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:[g," days until deletion"]})]})]}),(0,C.jsx)(o.A,{sx:{textAlign:"right",flexShrink:0,minWidth:100},children:(0,C.jsxs)(x.A,{spacing:.25,children:[(0,C.jsxs)(x.A,{direction:"row",justifyContent:"space-between",spacing:2,children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Deleted"}),(0,C.jsx)(l.A,{variant:"caption",fontWeight:500,children:Ve(t.deleted_at,"MMM d, yyyy")})]}),(0,C.jsxs)(x.A,{direction:"row",justifyContent:"space-between",spacing:2,children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Auto-delete"}),(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",children:Ve(t.auto_delete_at,"MMM d, yyyy")})]})]})}),(0,C.jsxs)(x.A,{direction:"row",spacing:1,sx:{flexShrink:0},children:[(0,C.jsx)(A.A,{size:"small",startIcon:d?(0,C.jsx)(ve.A,{size:14}):(0,C.jsx)(Le,{}),onClick:async e=>{e.stopPropagation(),c(!0);try{await r(t.id)}finally{c(!1)}},disabled:d||p,sx:{textTransform:"none",color:"primary.main",fontSize:"0.75rem",minWidth:"auto",px:1},children:"Restore"}),(0,C.jsx)(A.A,{size:"small",startIcon:p?(0,C.jsx)(ve.A,{size:14}):(0,C.jsx)(z.A,{}),onClick:async e=>{e.stopPropagation(),h(!0);try{await n(t.id)}finally{h(!1)}},disabled:d||p,sx:{textTransform:"none",color:"error.main",fontSize:"0.75rem",minWidth:"auto",px:1},children:"Delete"})]})]})};var Ge=r(74675);const Je=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"N/A";if(!e)return r;const n="string"===typeof e?new Date(e):e;if(!(0,ae.A)(n))return r;try{return(0,M.A)(n,t)}catch(a){return r}},Ze=e=>{var t,r;let{calendar:n,isTrash:s,isExpanded:d=!1,onToggleExpand:c,onClick:p,onEdit:h,onDuplicate:g,onLink:u,onDelete:A,onUpdateCalendarProperty:b}=e;const w=(0,i.A)(),[_,k]=(0,a.useState)(null),S=Boolean(_),R=n.total_pnl||0,D=R>=0,I=n.win_rate||0,W=n.total_trades||0,T=()=>{k(null)};return(0,C.jsxs)(o.A,{sx:{borderRadius:1,bgcolor:"dark"===w.palette.mode?(0,m.X4)(w.palette.background.paper,.4):(0,m.X4)(w.palette.background.default,.6),border:"1px solid ".concat((0,m.X4)(w.palette.divider,.1)),transition:"all 0.2s",opacity:s?.8:1,"&:hover":{bgcolor:"dark"===w.palette.mode?(0,m.X4)(w.palette.background.paper,.6):(0,m.X4)(w.palette.background.default,.9),borderColor:(0,m.X4)(w.palette.primary.main,.3)}},children:[(0,C.jsxs)(o.A,{onClick:p,sx:{display:"flex",alignItems:"center",gap:1.5,p:1.5,cursor:"pointer"},children:[(0,C.jsx)(De.A,{src:n.hero_image_url||void 0,variant:"rounded",sx:{width:48,height:48,flexShrink:0,bgcolor:(0,m.X4)(w.palette.primary.main,.1),"& img":{objectFit:"cover"}},children:(0,C.jsx)(y.A,{sx:{color:w.palette.primary.main}})}),(0,C.jsxs)(o.A,{sx:{flex:1,minWidth:0},children:[(0,C.jsx)(l.A,{variant:"subtitle2",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",mb:.25},children:n.name}),(0,C.jsxs)(x.A,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,C.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:[W," trades"]}),(0,C.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:[I.toFixed(1),"% win"]}),s&&n.deleted_at&&(0,C.jsxs)(l.A,{variant:"caption",color:"error.main",children:["Deleted ",Je(n.deleted_at,"MMM d")]})]})]}),(0,C.jsxs)(o.A,{sx:{textAlign:"right",flexShrink:0},children:[(0,C.jsxs)(x.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:[D?(0,C.jsx)(j.A,{sx:{fontSize:16,color:"success.main"}}):(0,C.jsx)(f.A,{sx:{fontSize:16,color:"error.main"}}),(0,C.jsx)(l.A,{variant:"subtitle2",sx:{fontWeight:600,color:D?"success.main":"error.main"},children:(0,X.vv)(R)})]}),(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",children:Je(n.updated_at,"MMM d, yyyy")})]}),!s&&(0,C.jsxs)(x.A,{direction:"row",alignItems:"center",spacing:.5,sx:{flexShrink:0},children:[c&&(0,C.jsx)(q.A,{size:"small",onClick:e=>{e.stopPropagation(),c()},sx:{color:"text.secondary"},children:d?(0,C.jsx)(We.A,{fontSize:"small"}):(0,C.jsx)(Te.A,{fontSize:"small"})}),b&&(0,C.jsx)(ie.A,{type:"calendar",item:n,onUpdateItemProperty:b,size:"small"}),(0,C.jsx)(q.A,{size:"small",onClick:e=>{e.stopPropagation(),k(e.currentTarget)},sx:{color:"text.secondary"},children:(0,C.jsx)(te.A,{fontSize:"small"})}),(0,C.jsxs)(K.A,{anchorEl:_,open:S,onClose:()=>T(),onClick:e=>e.stopPropagation(),transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,C.jsxs)(Q.A,{onClick:e=>{e.stopPropagation(),T(),null===h||void 0===h||h()},children:[(0,C.jsx)($.A,{children:(0,C.jsx)(v.A,{fontSize:"small"})}),(0,C.jsx)(ee.A,{children:"Edit"})]}),(0,C.jsxs)(Q.A,{onClick:e=>{e.stopPropagation(),T(),null===g||void 0===g||g()},children:[(0,C.jsx)($.A,{children:(0,C.jsx)(re.A,{fontSize:"small"})}),(0,C.jsx)(ee.A,{children:"Duplicate"})]}),(0,C.jsxs)(Q.A,{onClick:e=>{e.stopPropagation(),T(),null===u||void 0===u||u()},children:[(0,C.jsx)($.A,{children:(0,C.jsx)(ne.A,{fontSize:"small"})}),(0,C.jsx)(ee.A,{children:"Link Calendar"})]}),(0,C.jsxs)(Q.A,{onClick:e=>{e.stopPropagation(),T(),null===A||void 0===A||A()},sx:{color:"error.main"},children:[(0,C.jsx)($.A,{children:(0,C.jsx)(z.A,{fontSize:"small",sx:{color:"error.main"}})}),(0,C.jsx)(ee.A,{children:"Delete"})]})]})]})]}),d&&!s&&(0,C.jsxs)(o.A,{sx:{px:1.5,pb:1.5},children:[(0,C.jsx)(de.A,{sx:{mb:1.5,opacity:.6}}),(0,C.jsxs)(x.A,{spacing:1.5,children:[(0,C.jsxs)(o.A,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:1.5},children:[(0,C.jsxs)(o.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,m.X4)(w.palette.background.default,.6)},children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"Initial Balance"}),(0,C.jsx)(l.A,{variant:"subtitle2",sx:{fontWeight:600},children:(0,X.vv)(n.account_balance||0)}),(0,C.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:["Current: ",(0,X.vv)((n.account_balance||0)+R)]})]}),(0,C.jsxs)(o.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,m.X4)(w.palette.background.default,.6)},children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"Win Rate"}),(0,C.jsxs)(l.A,{variant:"subtitle2",sx:{fontWeight:600},children:[I.toFixed(1),"%"]}),(0,C.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:[n.win_count||0,"W - ",n.loss_count||0,"L"]})]})]}),(0,C.jsxs)(o.A,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:1.5},children:[(0,C.jsxs)(o.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,m.X4)(w.palette.background.default,.6)},children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"Profit Factor"}),(0,C.jsx)(Ie.A,{title:(0,C.jsxs)(o.A,{sx:{p:1,maxWidth:300},children:[(0,C.jsx)(l.A,{variant:"caption",gutterBottom:!0,children:"Profit Factor is the ratio of gross profit to gross loss. A value greater than 1 indicates profitable trading."}),(0,C.jsx)(l.A,{variant:"caption",sx:{mt:1,display:"block"},children:"\u2022 Value > 3: Excellent"}),(0,C.jsx)(l.A,{variant:"caption",sx:{display:"block"},children:"\u2022 Value 2-3: Very Good"}),(0,C.jsx)(l.A,{variant:"caption",sx:{display:"block"},children:"\u2022 Value 1.5-2: Good"}),(0,C.jsx)(l.A,{variant:"caption",sx:{display:"block"},children:"\u2022 Value 1-1.5: Marginal"}),(0,C.jsx)(l.A,{variant:"caption",sx:{display:"block"},children:"\u2022 Value < 1: Unprofitable"})]}),arrow:!0,placement:"top",children:(0,C.jsxs)(l.A,{variant:"subtitle2",sx:{fontWeight:600,cursor:"help",display:"flex",alignItems:"center",gap:.5},children:[(0,C.jsx)(Me.A,{sx:{fontSize:"0.875rem"}}),(n.profit_factor||0).toFixed(2)]})}),(0,C.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:["Avg Win: ",(0,X.vv)(n.avg_win||0)]})]}),(0,C.jsxs)(o.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,m.X4)(w.palette.background.default,.6)},children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"Max Drawdown"}),(0,C.jsx)(Ie.A,{title:(0,C.jsxs)(o.A,{sx:{p:1,maxWidth:300},children:[(0,C.jsx)(l.A,{variant:"caption",gutterBottom:!0,children:"Maximum drawdown represents the largest peak-to-trough decline in your account balance."}),(n.max_drawdown||0)>0&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(l.A,{variant:"caption",sx:{mt:1,display:"block"},children:["Recovery needed: ",(n.drawdown_recovery_needed||0).toFixed(1),"%"]}),(0,C.jsxs)(l.A,{variant:"caption",sx:{mt:1,display:"block"},children:["Duration: ",n.drawdown_duration||0," days"]}),n.drawdown_start_date&&n.drawdown_end_date&&(0,C.jsxs)(l.A,{variant:"caption",sx:{mt:1,display:"block"},children:["Period: ",Je(n.drawdown_start_date,"MMM d")," - ",Je(n.drawdown_end_date,"MMM d")]})]})]}),arrow:!0,placement:"top",children:(0,C.jsxs)(l.A,{variant:"subtitle2",sx:{fontWeight:600,cursor:"help",display:"flex",alignItems:"center",gap:.5},children:[(0,C.jsx)(Me.A,{sx:{fontSize:"0.875rem"}}),(n.max_drawdown||0).toFixed(1),"%"]})}),(0,C.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:["Avg Loss: ",(0,X.vv)(n.avg_loss||0)]})]})]}),(n.weekly_target||n.monthly_target)&&(0,C.jsxs)(o.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,m.X4)(w.palette.background.default,.6)},children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"Target Progress"}),(0,C.jsxs)(o.A,{sx:{display:"grid",gridTemplateColumns:n.weekly_target&&n.monthly_target?"repeat(2, 1fr)":"1fr",gap:1.5},children:[n.weekly_target&&(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Weekly"}),(0,C.jsxs)(l.A,{variant:"subtitle2",sx:{fontWeight:600},children:[Math.min(null!==(t=n.weekly_progress)&&void 0!==t?t:0,100).toFixed(1),"%"]})]}),n.monthly_target&&(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Monthly"}),(0,C.jsxs)(l.A,{variant:"subtitle2",sx:{fontWeight:600},children:[Math.min(null!==(r=n.monthly_progress)&&void 0!==r?r:0,100).toFixed(1),"%"]})]})]})]}),(0,C.jsxs)(o.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,m.X4)(w.palette.background.default,.6)},children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"PnL Performance"}),(0,C.jsxs)(o.A,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:1.5},children:[(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Weekly"}),(0,C.jsxs)(l.A,{variant:"subtitle2",sx:{fontWeight:600,color:parseFloat(String(n.weekly_pnl_percentage||0))>0?"success.main":parseFloat(String(n.weekly_pnl_percentage||0))<0?"error.main":"text.primary"},children:[parseFloat(String(n.weekly_pnl_percentage||0))>0?"+":"",parseFloat(String(n.weekly_pnl_percentage||0)).toFixed(1),"%"]})]}),(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Monthly"}),(0,C.jsxs)(l.A,{variant:"subtitle2",sx:{fontWeight:600,color:parseFloat(String(n.monthly_pnl_percentage||0))>0?"success.main":parseFloat(String(n.monthly_pnl_percentage||0))<0?"error.main":"text.primary"},children:[parseFloat(String(n.monthly_pnl_percentage||0))>0?"+":"",parseFloat(String(n.monthly_pnl_percentage||0)).toFixed(1),"%"]})]}),(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Yearly"}),(0,C.jsxs)(l.A,{variant:"subtitle2",sx:{fontWeight:600,color:parseFloat(String(n.yearly_pnl_percentage||0))>0?"success.main":parseFloat(String(n.yearly_pnl_percentage||0))<0?"error.main":"text.primary"},children:[parseFloat(String(n.yearly_pnl_percentage||0))>0?"+":"",parseFloat(String(n.yearly_pnl_percentage||0)).toFixed(1),"%"]})]})]})]})]})]})]})},qe=e=>{let{open:t,onClose:r,isTrash:s=!1,onCalendarClick:d,onEditCalendar:c,onDuplicateCalendar:u,onLinkCalendar:A,onDeleteCalendar:j,onUpdateCalendarProperty:f,onRestoreCalendar:b,onPermanentDeleteCalendar:v}=e;const w=(0,i.A)(),{user:_}=(0,Ge.h)(),[S,z]=(0,a.useState)(new Set),{calendars:R,isLoading:X,refresh:D}=(0,E.H)(t&&!s?null===_||void 0===_?void 0:_.uid:void 0),{trashCalendars:I,isLoading:W,refresh:T}=(0,E.V)(t&&s?null===_||void 0===_?void 0:_.uid:void 0);(0,a.useEffect)((()=>{t&&(s?T():D())}),[t,s,D,T]);const M=s?I:R||[],P=s?W:X,L=s?"Trash":"All Calendars";return(0,C.jsxs)(p.A,(0,n.A)((0,n.A)({open:t,onClose:r,maxWidth:"sm",fullWidth:!0},je.z),{},{children:[(0,C.jsxs)(h.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",pb:1},children:[(0,C.jsxs)(x.A,{direction:"row",alignItems:"center",spacing:1,children:[s?(0,C.jsx)(k,{sx:{color:"text.secondary"}}):(0,C.jsx)(y.A,{sx:{color:"primary.main"}}),(0,C.jsx)(l.A,{variant:"h6",sx:{fontWeight:600},children:L}),(0,C.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["(",M.length,")"]})]}),(0,C.jsx)(q.A,{onClick:r,size:"small",children:(0,C.jsx)(Pe.A,{fontSize:"small"})})]}),(0,C.jsx)(g.A,{sx:{p:2,overflowX:"hidden"},children:P?(0,C.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:6},children:(0,C.jsx)(ve.A,{size:32})}):0===M.length?(0,C.jsx)(o.A,{sx:{textAlign:"center",py:6,display:"flex",flexDirection:"column",alignItems:"center"},children:s?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(k,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,C.jsx)(l.A,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:"Trash is empty"}),(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{maxWidth:280},children:"Deleted calendars will appear here for 30 days before being permanently removed"})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(y.A,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,C.jsx)(l.A,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:"No calendars yet"}),(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{maxWidth:280},children:"Create your first trading calendar to start tracking your trades"})]})}):s?(0,C.jsxs)(x.A,{spacing:1.5,sx:(0,n.A)({maxHeight:"60vh",overflowY:"auto",overflowX:"hidden"},(0,ye.J)(w)),children:[(0,C.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1.5,p:1.5,borderRadius:2,bgcolor:(0,m.X4)(w.palette.warning.main,.08),border:"1px solid ".concat((0,m.X4)(w.palette.warning.main,.2))},children:[(0,C.jsx)(Ee.A,{sx:{color:"warning.main",fontSize:20}}),(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"body2",fontWeight:600,color:"warning.main",children:"Items will be permanently deleted after 30 days"}),(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Restore calendars before they're automatically removed"})]})]}),M.map((e=>(0,C.jsx)(Ye,{calendar:e,onRestore:b||(async()=>{}),onPermanentDelete:v||(async()=>{})},e.id)))]}):(0,C.jsx)(x.A,{spacing:1,sx:(0,n.A)({maxHeight:"60vh",overflowY:"auto",overflowX:"hidden",p:1},(0,ye.J)(w)),children:M.map((e=>(0,C.jsx)(Ze,{calendar:e,isTrash:s,isExpanded:S.has(e.id),onToggleExpand:()=>{return t=e.id,void z((e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r}));var t},onClick:()=>{return t=e.id,d(t),void r();var t},onEdit:()=>null===c||void 0===c?void 0:c(e),onDuplicate:()=>{null===u||void 0===u||u(e)},onLink:()=>null===A||void 0===A?void 0:A(e),onDelete:()=>(e=>{r(),null===j||void 0===j||j(e.id)})(e),onUpdateCalendarProperty:f},e.id)))})})]}))};var Ke=r(21161),Qe=r(58309),$e=r(22011),et=r(87498),tt=r(94029);const rt=e=>{var t;let{calendars:r,isLoading:_=!1,onCreateCalendar:I,onDuplicateCalendar:F,onDeleteCalendar:U,onUpdateCalendar:O}=e;const N=(0,i.A)(),B=(0,R.Zp)(),{user:H}=(0,me.As)(),{economicEvents:V,isLoading:Y}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{impacts:t=["High","Medium"],refreshInterval:r=3e5,revalidateOnFocus:n=!0}=e,{data:a,error:i,isLoading:s,mutate:o}=(0,D.Ay)(["upcomingEconomicEvents",t.join(",")],(async()=>{try{const e=new Date,r=(0,M.A)(e,"yyyy-MM-dd");return(await P.$.fetchEvents({start:r,end:r},{impacts:t,onlyUpcoming:!0,limit:50})).sort(((e,t)=>new Date(e.time_utc).getTime()-new Date(t.time_utc).getTime()))}catch(e){throw W.logger.error("Error fetching upcoming economic events:",e),e}}),{revalidateOnFocus:n,dedupingInterval:2e3,refreshInterval:r,shouldRetryOnError:!1,keepPreviousData:!0});return{economicEvents:null!==a&&void 0!==a?a:void 0,isLoading:s,error:i,refresh:o}}({impacts:["High","Medium"],refreshInterval:3e5}),{recentTrades:G,isLoading:J}=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{limit:a=5,refreshInterval:i=0,revalidateOnFocus:s=!0}=r,{data:o,error:l,isLoading:d,mutate:c}=(0,D.Ay)(e&&t?["recentTrades",e,a]:null,(async()=>{if(!e||!t)return null;try{return(await T.findByUserId(e,{limit:a,orderBy:"trade_date",ascending:!1})).map((e=>{const r=t.find((t=>t.id===e.calendar_id));return(0,n.A)((0,n.A)({},e),{},{calendarName:(null===r||void 0===r?void 0:r.name)||"Unknown Calendar"})}))}catch(r){throw W.logger.error("Error fetching recent trades:",r),r}}),{revalidateOnFocus:s,dedupingInterval:2e3,refreshInterval:i,shouldRetryOnError:!1,keepPreviousData:!0});return{recentTrades:null!==o&&void 0!==o?o:void 0,isLoading:d,error:l,refresh:c}}(null===H||void 0===H?void 0:H.uid,r,{limit:4}),[Z,q]=(0,a.useState)(!1),{refresh:K}=(0,E.H)(null===H||void 0===H?void 0:H.uid),{trashCalendars:Q,isLoading:$,refresh:ee}=(0,E.V)(Z?null===H||void 0===H?void 0:H.uid:void 0),[te,re]=(0,a.useState)(!1),[ne,ae]=(0,a.useState)(!1),[ie,se]=(0,a.useState)(!1),[oe,de]=(0,a.useState)(!1),[ve,_e]=(0,a.useState)(!1),[Ce,ke]=(0,a.useState)(null),[Se,ze]=(0,a.useState)(""),[Re,De]=(0,a.useState)([]),[Ie,We]=(0,a.useState)(!1),[Te,Me]=(0,a.useState)(!1),[Pe,Le]=(0,a.useState)(0),[Fe,Ue]=(0,a.useState)(!1),[Oe,Ne]=(0,a.useState)(""),[Be,He]=(0,a.useState)(!1),[Ve,Ge]=(0,a.useState)(!1),[Je,Ze]=(0,a.useState)(!1),[rt,nt]=(0,a.useState)(!1),[at,it]=(0,a.useState)(null),[st,ot]=(0,a.useState)(null),[lt,dt]=(0,a.useState)(null),[ct,xt]=(0,a.useState)(null),[mt,pt]=(0,a.useState)(!1),[ht,gt]=(0,a.useState)(!1),[ut,At]=(0,a.useState)(!1),yt=(0,s.A)(N.breakpoints.up("xl"));(0,a.useEffect)((()=>{De(G)}),[G]);const jt=(0,a.useMemo)((()=>{const e=yt?2:1;return[...r].filter((e=>!e.deleted_at)).sort(((e,t)=>new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime())).slice(0,e)}),[r,yt]),ft=(0,a.useMemo)((()=>{const e=yt?2:1;return[...Q].sort(((e,t)=>new Date(t.deleted_at).getTime()-new Date(e.deleted_at).getTime())).slice(0,e)}),[Q,yt]),bt=e=>{ot(e),Ge(!0)},vt=e=>{dt(e),Ze(!0)},wt=e=>{xt(e),nt(!0)},_t=e=>{it(e),He(!0)},Ct=async e=>{try{await et.restoreCalendar(e),ee()}catch(t){W.logger.error("Error restoring calendar:",t)}},kt=async e=>{try{await et.permanentlyDeleteCalendar(e),ee()}catch(t){W.logger.error("Error permanently deleting calendar:",t)}},St=async(e,t)=>{const n=r.find((t=>t.id===e));if(!n)return void console.error("Calendar with ID ".concat(e," not found"));const a=t(n);return O(e,a),a},zt=(0,a.useMemo)((()=>{const e=r.length,t=r.filter((e=>{var t;return(null!==(t=e.total_trades)&&void 0!==t?t:0)>0})).length,n=r.reduce(((e,t)=>{var r;return e+(null!==(r=t.total_trades)&&void 0!==r?r:0)}),0),a=r.reduce(((e,t)=>{var r;return e+(null!==(r=t.win_count)&&void 0!==r?r:0)}),0),i=r.reduce(((e,t)=>{var r;return e+(null!==(r=t.loss_count)&&void 0!==r?r:0)}),0),s=r.reduce(((e,t)=>{var r;return e+(null!==(r=t.total_pnl)&&void 0!==r?r:0)}),0);return{totalCalendars:e,activeCalendars:t,totalTrades:n,totalWins:a,totalLosses:i,winRate:a+i>0?(a/(a+i)*100).toFixed(1):"0.0",totalPnL:s}}),[r]),Rt=(0,a.useMemo)((()=>r.length&&Se&&r.find((e=>e.id===Se))||null),[r,Se]),Xt=(0,a.useMemo)((()=>Rt?{account_balance:Rt.account_balance,risk_per_trade:Rt.risk_per_trade,dynamic_risk_enabled:Rt.dynamic_risk_enabled,increased_risk_percentage:Rt.increased_risk_percentage,profit_threshold_percentage:Rt.profit_threshold_percentage}:{account_balance:0}),[Rt]),Dt=(null===Rt||void 0===Rt?void 0:Rt.tags)||[],It=(null===Rt||void 0===Rt?void 0:Rt.required_tag_groups)||[],Wt=null!==(t=null===Rt||void 0===Rt?void 0:Rt.account_balance)&&void 0!==t?t:0,Tt=e=>{B("/calendar/".concat(e))};return(0,C.jsxs)(o.A,{sx:{minHeight:"100vh",bgcolor:"custom.pageBackground",position:"relative",overflow:"hidden"},children:[(0,C.jsx)(be.A,{}),(0,C.jsxs)(o.A,{sx:{pt:{xs:2,sm:3,md:4},pb:{xs:2,sm:3,md:4},px:{xs:2,sm:3,md:4},maxWidth:"1400px",mx:"auto",position:"relative",zIndex:1},children:[(0,C.jsxs)(o.A,{sx:{mb:{xs:3,sm:4}},children:[(0,C.jsx)(l.A,{variant:"h4",sx:{fontWeight:700,mb:1,fontSize:{xs:"1.75rem",sm:"2rem",md:"2.125rem"}},children:"Dashboard"}),(0,C.jsx)(l.A,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Welcome back! Here's what's happening."})]}),(0,C.jsxs)(o.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",lg:"repeat(4, 1fr)"},gap:{xs:2,sm:2.5,md:3},mb:{xs:3,sm:4}},children:[(0,C.jsx)(d.A,{sx:{borderRadius:2,bgcolor:"background.paper"},children:(0,C.jsx)(c.A,{sx:{p:{xs:2,sm:2.5,md:3}},children:(0,C.jsxs)(x.A,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Total Calendars"}),(0,C.jsx)(l.A,{variant:"h4",sx:{fontWeight:700,mb:.5,fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2.125rem"}},children:zt.totalCalendars}),(0,C.jsxs)(l.A,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.6875rem",sm:"0.75rem"}},children:[zt.activeCalendars," active"]})]}),(0,C.jsx)(o.A,{sx:{p:{xs:1,sm:1.25,md:1.5},borderRadius:2,bgcolor:(0,m.X4)(N.palette.primary.main,.1)},children:(0,C.jsx)(y.A,{sx:{color:N.palette.primary.main,fontSize:{xs:24,sm:26,md:28}}})})]})})}),(0,C.jsx)(d.A,{sx:{borderRadius:2,bgcolor:"background.paper"},children:(0,C.jsx)(c.A,{sx:{p:{xs:2,sm:2.5,md:3}},children:(0,C.jsxs)(x.A,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Total Trades"}),(0,C.jsx)(l.A,{variant:"h4",sx:{fontWeight:700,mb:.5,fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2.125rem"}},children:zt.totalTrades}),(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.6875rem",sm:"0.75rem"}},children:"Across all calendars"})]}),(0,C.jsx)(o.A,{sx:{p:{xs:1,sm:1.25,md:1.5},borderRadius:2,bgcolor:(0,m.X4)(N.palette.info.main,.1)},children:(0,C.jsx)(j.A,{sx:{color:N.palette.info.main,fontSize:{xs:24,sm:26,md:28}}})})]})})}),(0,C.jsx)(d.A,{sx:{borderRadius:2,bgcolor:"background.paper"},children:(0,C.jsx)(c.A,{sx:{p:{xs:2,sm:2.5,md:3}},children:(0,C.jsxs)(x.A,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Win Rate"}),(0,C.jsxs)(l.A,{variant:"h4",sx:{fontWeight:700,mb:.5,fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2.125rem"}},children:[zt.winRate,"%"]}),(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.6875rem",sm:"0.75rem"}},children:"Overall performance"})]}),(0,C.jsx)(o.A,{sx:{p:{xs:1,sm:1.25,md:1.5},borderRadius:2,bgcolor:(0,m.X4)(N.palette.success.main,.1)},children:(0,C.jsx)(j.A,{sx:{color:N.palette.success.main,fontSize:{xs:24,sm:26,md:28}}})})]})})}),(0,C.jsx)(d.A,{sx:{borderRadius:2,bgcolor:"background.paper"},children:(0,C.jsx)(c.A,{sx:{p:{xs:2,sm:2.5,md:3}},children:(0,C.jsxs)(x.A,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Total P&L"}),(0,C.jsx)(l.A,{variant:"h4",sx:{fontWeight:700,mb:.5,fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2.125rem"}},children:(0,X.vv)(zt.totalPnL)}),(0,C.jsxs)(l.A,{variant:"caption",color:zt.totalPnL>=0?"success.main":"error.main",sx:{fontSize:{xs:"0.6875rem",sm:"0.75rem"}},children:[zt.totalPnL>=0?"\u2191":"\u2193"," All time"]})]}),(0,C.jsx)(o.A,{sx:{p:{xs:1,sm:1.25,md:1.5},borderRadius:2,bgcolor:(0,m.X4)(zt.totalPnL>=0?N.palette.success.main:N.palette.error.main,.1)},children:zt.totalPnL>=0?(0,C.jsx)(j.A,{sx:{color:N.palette.success.main,fontSize:{xs:24,sm:26,md:28}}}):(0,C.jsx)(f.A,{sx:{color:N.palette.error.main,fontSize:{xs:24,sm:26,md:28}}})})]})})})]}),(0,C.jsxs)(o.A,{sx:{mb:{xs:3,sm:4}},children:[(0,C.jsx)(l.A,{variant:"h6",sx:{fontWeight:600,mb:{xs:2,sm:3},fontSize:{xs:"1rem",sm:"1.125rem",md:"1.25rem"}},children:"Quick Actions"}),(0,C.jsxs)(o.A,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:{xs:1.5,sm:2}},children:[(0,C.jsx)(d.A,{sx:{borderRadius:2,border:"2px dashed ".concat((0,m.X4)(N.palette.primary.main,"dark"===N.palette.mode?.3:.5)),bgcolor:"dark"===N.palette.mode?"transparent":(0,m.X4)(N.palette.primary.main,.03),cursor:"pointer",transition:"all 0.2s","&:hover":{borderColor:N.palette.primary.main,bgcolor:(0,m.X4)(N.palette.primary.main,"dark"===N.palette.mode?.05:.08),transform:"translateY(-2px)"}},onClick:()=>{H?ae(!0):de(!0)},children:(0,C.jsxs)(c.A,{sx:{textAlign:"center",py:{xs:2.5,sm:3,md:4},px:{xs:1.5,sm:2}},children:[(0,C.jsx)(o.A,{sx:{width:{xs:40,sm:48,md:56},height:{xs:40,sm:48,md:56},borderRadius:2,bgcolor:(0,m.X4)(N.palette.primary.main,"dark"===N.palette.mode?.1:.15),display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:{xs:1.5,sm:2}},children:(0,C.jsx)(b.A,{sx:{fontSize:{xs:24,sm:28,md:32},color:N.palette.primary.main}})}),(0,C.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,fontSize:{xs:"0.875rem",sm:"0.9375rem",md:"1rem"}},children:"Create Calendar"}),(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.6875rem",sm:"0.75rem"}},children:"Start a new trading journal"})]})}),(0,C.jsx)(d.A,{sx:{borderRadius:2,border:"2px dashed ".concat((0,m.X4)(N.palette.info.main,"dark"===N.palette.mode?.3:.5)),bgcolor:"dark"===N.palette.mode?"transparent":(0,m.X4)(N.palette.info.main,.03),cursor:r.length>0?"pointer":"not-allowed",opacity:r.length>0?1:.6,transition:"all 0.2s","&:hover":r.length>0?{borderColor:N.palette.info.main,bgcolor:(0,m.X4)(N.palette.info.main,"dark"===N.palette.mode?.05:.08),transform:"translateY(-2px)"}:{}},onClick:()=>{H?0!==r.length&&(ze(""),ke((0,$e.createNewTradeData)()),_e(!0)):de(!0)},children:(0,C.jsxs)(c.A,{sx:{textAlign:"center",py:{xs:2.5,sm:3,md:4},px:{xs:1.5,sm:2}},children:[(0,C.jsx)(o.A,{sx:{width:{xs:40,sm:48,md:56},height:{xs:40,sm:48,md:56},borderRadius:2,bgcolor:(0,m.X4)(N.palette.info.main,"dark"===N.palette.mode?.1:.15),display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:{xs:1.5,sm:2}},children:(0,C.jsx)(j.A,{sx:{fontSize:{xs:24,sm:28,md:32},color:N.palette.info.main}})}),(0,C.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,fontSize:{xs:"0.875rem",sm:"0.9375rem",md:"1rem"}},children:"Create Trade"}),(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.6875rem",sm:"0.75rem"}},children:"Log a new trade entry"})]})}),(0,C.jsx)(d.A,{sx:{borderRadius:2,border:"2px dashed ".concat((0,m.X4)(N.palette.warning.main,"dark"===N.palette.mode?.3:.5)),bgcolor:"dark"===N.palette.mode?"transparent":(0,m.X4)(N.palette.warning.main,.03),cursor:"pointer",transition:"all 0.2s","&:hover":{borderColor:N.palette.warning.main,bgcolor:(0,m.X4)(N.palette.warning.main,"dark"===N.palette.mode?.05:.08),transform:"translateY(-2px)"}},onClick:()=>{H?Me(!0):de(!0)},children:(0,C.jsxs)(c.A,{sx:{textAlign:"center",py:{xs:2.5,sm:3,md:4},px:{xs:1.5,sm:2}},children:[(0,C.jsx)(o.A,{sx:{width:{xs:40,sm:48,md:56},height:{xs:40,sm:48,md:56},borderRadius:2,bgcolor:(0,m.X4)(N.palette.warning.main,"dark"===N.palette.mode?.1:.15),display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:{xs:1.5,sm:2}},children:(0,C.jsx)(v.A,{sx:{fontSize:{xs:24,sm:28,md:32},color:N.palette.warning.main}})}),(0,C.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,fontSize:{xs:"0.875rem",sm:"0.9375rem",md:"1rem"}},children:"Notes"}),(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.6875rem",sm:"0.75rem"}},children:"Create and manage notes"})]})}),(0,C.jsx)(d.A,{sx:{borderRadius:2,border:"2px dashed ".concat((0,m.X4)(N.palette.secondary.main,"dark"===N.palette.mode?.3:.5)),bgcolor:"dark"===N.palette.mode?"transparent":(0,m.X4)(N.palette.secondary.main,.03),cursor:"pointer",transition:"all 0.2s","&:hover":{borderColor:N.palette.secondary.main,bgcolor:(0,m.X4)(N.palette.secondary.main,"dark"===N.palette.mode?.05:.08),transform:"translateY(-2px)"}},onClick:()=>{H?We(!0):de(!0)},children:(0,C.jsxs)(c.A,{sx:{textAlign:"center",py:{xs:2.5,sm:3,md:4},px:{xs:1.5,sm:2}},children:[(0,C.jsx)(o.A,{sx:{width:{xs:40,sm:48,md:56},height:{xs:40,sm:48,md:56},borderRadius:2,bgcolor:(0,m.X4)(N.palette.secondary.main,"dark"===N.palette.mode?.1:.15),display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:{xs:1.5,sm:2}},children:(0,C.jsx)(w.A,{sx:{fontSize:{xs:24,sm:28,md:32},color:N.palette.secondary.main}})}),(0,C.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,fontSize:{xs:"0.875rem",sm:"0.9375rem",md:"1rem"}},children:"Chat with AI"}),(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.6875rem",sm:"0.75rem"}},children:"Get trading insights"})]})})]})]}),(0,C.jsxs)(o.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:{xs:2,sm:2.5,md:2},mb:{xs:3,sm:4}},children:[(0,C.jsxs)(d.A,{sx:{flex:1,borderRadius:1,height:{xs:"auto",md:"620px"},pb:2,minHeight:{xs:"400px",md:"620px"},maxWidth:jt.length<=1?{xs:"none",md:"400px"}:"none",p:{xs:.5,sm:1},display:"flex",flexDirection:"column"},children:[(0,C.jsxs)(x.A,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:{xs:2,sm:3},px:{xs:1.5,sm:2},pt:{xs:1.5,sm:2}},children:[(0,C.jsx)(xe.A,{tabs:[{label:"Recent Calendars",icon:(0,C.jsx)(y.A,{sx:{fontSize:18}})},{label:"Trash",icon:(0,C.jsx)(k,{sx:{fontSize:18}})}],activeTab:Pe,onTabChange:(e,t)=>{Le(t),0===t?K():1===t&&(Z?ee():q(!0))},variant:"contained"}),(0,C.jsx)(l.A,{variant:"body2",sx:{color:"primary.main",cursor:"pointer",fontSize:{xs:"0.8125rem",sm:"0.875rem"},"&:hover":{textDecoration:"underline"}},onClick:()=>Ue(!0),children:"View all"})]}),(0,C.jsx)(xe.K,{value:Pe,index:0,children:_?(0,C.jsx)(o.A,{sx:{px:2,pb:2,flex:1,display:"flex",flexDirection:"row",gap:2},children:(0,C.jsx)(o.A,{sx:{minWidth:"450px",flex:"0 0 auto"},children:(0,C.jsx)(ce,{})})}):0===jt.length?(0,C.jsxs)(o.A,{sx:{textAlign:"center",py:6,px:2,flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,C.jsx)(y.A,{sx:{fontSize:48,color:"text.secondary",mb:2,mx:"auto"}}),(0,C.jsx)(l.A,{variant:"subtitle2",color:"text.primary",sx:{mb:1,fontWeight:600},children:"No calendars yet"}),(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:3,maxWidth:300},children:"Create your first trading calendar to start tracking your trades and analyzing performance"})]}):(0,C.jsx)(o.A,{sx:{px:1,pb:2,flex:1,display:"flex",flexDirection:"row",gap:1},children:jt.map((e=>(0,C.jsx)(le,{calendar:e,onCalendarClick:Tt,onEditCalendar:bt,onDuplicateCalendar:vt,onLinkCalendar:wt,onDeleteCalendar:_t,onUpdateCalendarProperty:St,formatCurrency:X.vv},e.id)))})}),(0,C.jsx)(xe.K,{value:Pe,index:1,children:$?(0,C.jsxs)(o.A,{sx:{px:2,pb:2,flex:1,display:"flex",flexDirection:"column",gap:2},children:[(0,C.jsx)(L.A,{width:"100%",height:60,sx:{borderRadius:2}}),(0,C.jsx)(L.A,{width:"100%",height:60,sx:{borderRadius:2}})]}):0===ft.length?(0,C.jsxs)(o.A,{sx:{textAlign:"center",py:6,px:2,flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,C.jsx)(k,{sx:{fontSize:48,color:"text.secondary",mb:2,mx:"auto"}}),(0,C.jsx)(l.A,{variant:"subtitle2",color:"text.primary",sx:{mb:1,fontWeight:600},children:"Trash is empty"}),(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:3,maxWidth:300},children:"Deleted calendars will appear here for 30 days before being permanently removed"})]}):(0,C.jsxs)(o.A,{sx:{px:2,pb:2,flex:1,display:"flex",flexDirection:"column",gap:1.5},children:[(0,C.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1.5,p:1.5,borderRadius:2,bgcolor:(0,m.X4)(N.palette.warning.main,.08),border:"1px solid ".concat((0,m.X4)(N.palette.warning.main,.2))},children:[(0,C.jsx)(Ee.A,{sx:{color:"warning.main",fontSize:20}}),(0,C.jsxs)(o.A,{children:[(0,C.jsx)(l.A,{variant:"body2",fontWeight:600,color:"warning.main",children:"Items will be permanently deleted after 30 days"}),(0,C.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Restore calendars before they're automatically removed from your account"})]})]}),(0,C.jsx)(x.A,{spacing:1,children:ft.map((e=>(0,C.jsx)(Ye,{calendar:e,onRestore:Ct,onPermanentDelete:kt},e.id)))})]})})]}),(0,C.jsxs)(d.A,{sx:{flex:1,borderRadius:1,height:{xs:"auto",md:"620px"},minHeight:{xs:"400px",md:"620px"},p:{xs:.5,sm:1},display:"flex",flexDirection:"column"},children:[(0,C.jsxs)(x.A,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:{xs:2,sm:3},px:{xs:1.5,sm:2},pt:{xs:1.5,sm:2}},children:[(0,C.jsx)(l.A,{variant:"h6",sx:{fontWeight:600,fontSize:{xs:"1rem",sm:"1.125rem",md:"1.25rem"}},children:"Economic Events"}),(0,C.jsx)(l.A,{variant:"body2",sx:{color:"primary.main",cursor:"pointer",fontSize:{xs:"0.8125rem",sm:"0.875rem"},"&:hover":{textDecoration:"underline"}},onClick:()=>re(!0),children:"View all"})]}),Y?(0,C.jsx)(o.A,{sx:(0,n.A)({px:2,pb:2,flex:1,overflowY:"auto"},(0,ye.J)(N)),children:(0,C.jsx)(Ae.A,{count:5})}):V&&0!==V.length?(0,C.jsx)(o.A,{sx:(0,n.A)({px:2,pb:2,flex:1,overflowY:"auto"},(0,ye.J)(N)),children:V.map((e=>(0,C.jsx)(d.A,{sx:{mb:2,borderRadius:2,cursor:"pointer",transition:"all 0.2s",bgcolor:"dark"===N.palette.mode?(0,m.X4)(N.palette.common.black,.2):(0,m.X4)(N.palette.common.black,.03),border:"1px solid ".concat((0,m.X4)(N.palette.divider,.1)),"&:hover":{boxShadow:2,transform:"translateY(-2px)",bgcolor:"dark"===N.palette.mode?(0,m.X4)(N.palette.common.black,.3):(0,m.X4)(N.palette.common.black,.06)},"&:last-child":{mb:0}},onClick:()=>re(!0),children:(0,C.jsx)(ue.A,{event:e,px:2.5,py:2,showDivider:!1,onClick:()=>re(!0)})},e.id)))}):(0,C.jsxs)(o.A,{sx:{textAlign:"center",py:6,px:2,flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,C.jsx)(S.A,{sx:{fontSize:48,color:"text.secondary",mb:2,mx:"auto"}}),(0,C.jsx)(l.A,{variant:"subtitle2",color:"text.primary",sx:{mb:1,fontWeight:600},children:"No economic events today"}),(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{maxWidth:300},children:"There are no high or medium impact economic events scheduled for today"})]})]})]}),(0,C.jsxs)(d.A,{sx:{flex:1,borderRadius:1,p:{xs:2,sm:2.5,md:3}},children:[(0,C.jsx)(x.A,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:{xs:2,sm:3}},children:(0,C.jsx)(l.A,{variant:"h6",sx:{fontWeight:600,fontSize:{xs:"1rem",sm:"1.125rem",md:"1.25rem"}},children:"Recent Trades"})}),J?(0,C.jsx)(o.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(auto-fill, minmax(280px, 1fr))"},gap:{xs:1.5,sm:2}},children:Array.from({length:5}).map(((e,t)=>(0,C.jsx)(d.A,{sx:{borderRadius:2,border:"1px solid",borderColor:(0,m.X4)(N.palette.primary.main,.2),backgroundColor:(0,m.X4)(N.palette.primary.main,.05)},children:(0,C.jsx)(c.A,{sx:{p:2,pt:2,"&:last-child":{pb:2}},children:(0,C.jsxs)(x.A,{spacing:1.5,children:[(0,C.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,C.jsx)(L.A,{width:"60%",height:20,sx:{borderRadius:1}}),(0,C.jsx)(L.A,{width:"30%",height:24,sx:{borderRadius:1}})]}),(0,C.jsxs)(o.A,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,C.jsx)(L.A,{width:16,height:16,sx:{borderRadius:"50%"}}),(0,C.jsx)(L.A,{width:80,height:14,sx:{borderRadius:1}}),(0,C.jsx)(L.A,{width:16,height:16,sx:{borderRadius:"50%"}}),(0,C.jsx)(L.A,{width:60,height:14,sx:{borderRadius:1}})]}),(0,C.jsxs)(o.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:[(0,C.jsx)(L.A,{width:80,height:20,sx:{borderRadius:10}}),(0,C.jsx)(L.A,{width:100,height:20,sx:{borderRadius:10}}),(0,C.jsx)(L.A,{width:70,height:20,sx:{borderRadius:10}}),(0,C.jsx)(L.A,{width:90,height:20,sx:{borderRadius:10}})]})]})})},t)))}):Re&&0!==Re.length?(0,C.jsx)(o.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(auto-fill, minmax(280px, 1fr))"},gap:{xs:1.5,sm:2}},children:Re.map((e=>(0,C.jsx)(he.A,{trade:e,showTags:!0,onClick:()=>(e=>{B("/calendar/".concat(e.calendar_id))})(e)},e.id)))}):(0,C.jsxs)(o.A,{sx:{textAlign:"center",py:6,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,C.jsx)(j.A,{sx:{fontSize:48,color:"text.secondary",mb:2,mx:"auto"}}),(0,C.jsx)(l.A,{variant:"subtitle2",color:"text.primary",sx:{mb:1,fontWeight:600},children:"No recent trades"}),(0,C.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{maxWidth:300},children:"Start logging your trades to see them here and track your trading performance over time"})]})]})]}),r.length>0&&(0,C.jsx)(ge.A,{open:te,onClose:()=>re(!1),calendar:r[0],tradeOperations:{onOpenGalleryMode:()=>{},onUpdateTradeProperty:()=>Promise.resolve(void 0),onEditTrade:()=>{},onDeleteTrade:()=>Promise.resolve(),onDeleteMultipleTrades:()=>{},onZoomImage:Ne,isTradeUpdating:()=>!1,calendarId:r[0].id,calendar:r[0],onUpdateCalendarProperty:()=>Promise.resolve(void 0)},isReadOnly:!0}),(0,C.jsx)(Ke.A,{open:Ie,onClose:()=>We(!1),tradeOperations:{onOpenGalleryMode:()=>{},onUpdateTradeProperty:()=>Promise.resolve(void 0),onEditTrade:()=>{},onDeleteTrade:()=>Promise.resolve(),onDeleteMultipleTrades:()=>{},onZoomImage:Ne,isTradeUpdating:()=>!1,onUpdateCalendarProperty:()=>Promise.resolve(void 0)},isReadOnly:!1}),(0,C.jsx)(tt.A,{open:Te,onClose:()=>Me(!1),showCalendarPicker:!0}),r.length>0&&(0,C.jsx)(Qe.Ay,{open:ve,onClose:()=>{Ce&&Ce.pending_images&&(Ce.pending_images.forEach((e=>{URL.revokeObjectURL(e.preview)})),ke(null)),_e(!1)},newMainTrade:Ce||void 0,trade_date:new Date,showForm:{open:ve,editTrade:void 0,createTempTrade:!1},account_balance:Wt,onAddTrade:async e=>{const t=e.calendar_id||(null===Rt||void 0===Rt?void 0:Rt.id)||Se;if(!t)throw new Error("Calendar ID is required");await et.addTrade(t,(0,n.A)((0,n.A)({},e),{},{calendar_id:t}));const r=(null===Rt||void 0===Rt?void 0:Rt.name)||"",a=(0,n.A)((0,n.A)({},e),{},{calendarName:r});De((e=>[a,...e||[]]))},setZoomedImage:Ne,setNewMainTrade:e=>{ke((t=>{const r=null!==t&&void 0!==t?t:(0,$e.createNewTradeData)();return e(r)}))},onCancel:()=>{_e(!1)},calendar:Rt,dynamicRiskSettings:Xt,tags:Dt,requiredTagGroups:It,calendars:r,onCalendarChange:e=>{ze(e)}}),(0,C.jsx)(fe.A,{open:ne,onClose:()=>ae(!1),onSubmit:async e=>{se(!0);try{const t=await I(e.name,e.account_balance,e.max_daily_drawdown,e.weekly_target,e.monthly_target,e.yearly_target,e.risk_per_trade,e.dynamic_risk_enabled,e.increased_risk_percentage,e.profit_threshold_percentage,e.hero_image_url,e.hero_image_attribution);ae(!1),B("/calendar/".concat(t.id))}catch(t){W.logger.error("Error creating calendar:",t)}finally{se(!1)}},isSubmitting:ie,mode:"create",title:"Create New Calendar",submitButtonText:"Create"}),(0,C.jsx)(fe.A,{open:Ve,onClose:()=>Ge(!1),onSubmit:async e=>{if(st){pt(!0);try{await O(st.id,{name:e.name,account_balance:e.account_balance,max_daily_drawdown:e.max_daily_drawdown,weekly_target:e.weekly_target,monthly_target:e.monthly_target,yearly_target:e.yearly_target,risk_per_trade:e.risk_per_trade,dynamic_risk_enabled:e.dynamic_risk_enabled,increased_risk_percentage:e.increased_risk_percentage,profit_threshold_percentage:e.profit_threshold_percentage,hero_image_url:e.hero_image_url,hero_image_attribution:e.hero_image_attribution}),Ge(!1),ot(null)}catch(t){W.logger.error("Error updating calendar:",t)}finally{pt(!1)}}},initialData:st||void 0,isSubmitting:mt,mode:"edit",title:"Edit Calendar",submitButtonText:"Save Changes"}),(0,C.jsx)(we,{open:Je,calendar:lt,isDuplicating:ht,onClose:()=>{Ze(!1),dt(null)},onDuplicate:async e=>{if(lt){gt(!0);try{const t="".concat(lt.name," (Copy)");await F(lt.id,t,e),Ze(!1),dt(null)}catch(t){W.logger.error("Error duplicating calendar:",t)}finally{gt(!1)}}}}),(0,C.jsx)(qe,{open:Fe,onClose:()=>Ue(!1),isTrash:1===Pe,onCalendarClick:Tt,onEditCalendar:bt,onDuplicateCalendar:vt,onLinkCalendar:wt,onDeleteCalendar:_t,onUpdateCalendarProperty:St,onRestoreCalendar:Ct,onPermanentDeleteCalendar:kt}),(0,C.jsx)(Xe,{open:rt,calendar:ct,calendars:r,isLoading:ut,onClose:()=>{nt(!1),xt(null)},onLink:async e=>{if(ct){At(!0);try{await et.linkCalendar(ct.id,e),await K(),nt(!1),xt(null)}catch(t){throw W.logger.error("Error linking calendar:",t),t}finally{At(!1)}}},onUnlink:async()=>{if(ct){At(!0);try{await et.unlinkCalendar(ct.id),await K(),nt(!1),xt(null)}catch(e){throw W.logger.error("Error unlinking calendar:",e),e}finally{At(!1)}}}}),(0,C.jsxs)(p.A,(0,n.A)((0,n.A)({open:Be,onClose:()=>He(!1),maxWidth:"xs",fullWidth:!0},je.z),{},{children:[(0,C.jsxs)(h.A,{sx:{display:"flex",alignItems:"center",gap:1,color:"error.main"},children:[(0,C.jsx)(z.A,{fontSize:"small"}),"Delete Calendar"]}),(0,C.jsx)(g.A,{children:(0,C.jsx)(l.A,{children:"Are you sure you want to delete this calendar? This action cannot be undone."})}),(0,C.jsxs)(u.A,{children:[(0,C.jsx)(A.A,{onClick:()=>He(!1),sx:{color:"text.secondary"},children:"Cancel"}),(0,C.jsx)(A.A,{onClick:async()=>{at&&(await U(at),it(null)),He(!1)},sx:{color:"error.main"},children:"Delete"})]})]})),(0,C.jsx)(pe.A,{open:oe,onClose:()=>{de(!1)},title:"Welcome Back",subtitle:"Sign in to continue"})]})}}}]);
//# sourceMappingURL=655.b9b2174b.chunk.js.map