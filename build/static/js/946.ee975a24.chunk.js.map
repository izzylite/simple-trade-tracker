{"version":3,"file":"static/js/946.ee975a24.chunk.js","mappings":"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","sources":["pages/PasswordResetPage.tsx","../node_modules/@mui/icons-material/esm/Error.js"],"sourcesContent":["/**\r\n * Password Reset Page\r\n * Handles password reset after user clicks the reset link in their email\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport {\r\n  Box,\r\n  TextField,\r\n  Button,\r\n  Typography,\r\n  Alert,\r\n  CircularProgress,\r\n  Paper,\r\n  IconButton,\r\n  InputAdornment,\r\n  alpha,\r\n  useTheme\r\n} from '@mui/material';\r\nimport { Visibility, VisibilityOff, CheckCircle, Error as ErrorIcon } from '@mui/icons-material';\r\nimport { useSupabaseAuth } from '../contexts/SupabaseAuthContext';\r\nimport { logger } from '../utils/logger';\r\nimport { supabase } from '../config/supabase';\r\n\r\nconst PasswordResetPage: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const [searchParams] = useSearchParams();\r\n  const { updatePassword } = useSupabaseAuth();\r\n\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState(false);\r\n  const [linkExpired, setLinkExpired] = useState(false);\r\n  const [verifyingSession, setVerifyingSession] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const handleRecoveryCode = async () => {\r\n      // Check for error parameters in URL (expired/invalid tokens)\r\n      const errorParam = searchParams.get('error');\r\n      const errorCode = searchParams.get('error_code');\r\n      const errorDescription = searchParams.get('error_description');\r\n\r\n      if (errorParam || errorCode === 'otp_expired') {\r\n        logger.error('Password reset link error:', { errorParam, errorCode, errorDescription });\r\n        setLinkExpired(true);\r\n        setVerifyingSession(false);\r\n        return;\r\n      }\r\n\r\n      // Check for recovery code in URL (valid reset link)\r\n      const recoveryCode = searchParams.get('code');\r\n      if (!recoveryCode) {\r\n        // No code and no error - user might have navigated here directly\r\n        logger.warn('No recovery code found in URL');\r\n        setError('Please use the password reset link from your email to access this page.');\r\n        setVerifyingSession(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        logger.info('Recovery code detected, verifying session...');\r\n\r\n        // Get current session - Supabase should have already exchanged the code\r\n        const { data: { session }, error: sessionError } = await supabase.auth.getSession();\r\n\r\n        if (sessionError || !session) {\r\n          logger.error('No session found after recovery code', sessionError);\r\n\r\n          // Try to manually verify the OTP if automatic exchange failed\r\n          logger.info('Attempting manual OTP verification');\r\n          const { data, error: otpError } = await supabase.auth.verifyOtp({\r\n            token_hash: recoveryCode,\r\n            type: 'recovery'\r\n          });\r\n\r\n          if (otpError || !data.session) {\r\n            logger.error('OTP verification failed:', otpError);\r\n            setError('Unable to verify password reset link. The link may have expired. Please request a new password reset.');\r\n            setVerifyingSession(false);\r\n            return;\r\n          }\r\n\r\n          logger.info('Manual OTP verification successful');\r\n        } else {\r\n          logger.info('Recovery session active');\r\n        }\r\n\r\n        setVerifyingSession(false);\r\n      } catch (err: any) {\r\n        logger.error('Error handling recovery code:', err);\r\n        setError('An error occurred while verifying your password reset link. Please try again.');\r\n        setVerifyingSession(false);\r\n      }\r\n    };\r\n\r\n    handleRecoveryCode();\r\n  }, [searchParams]);\r\n\r\n  const handleResetPassword = async () => {\r\n    // Validation\r\n    if (!newPassword.trim()) {\r\n      setError('Please enter a new password');\r\n      return;\r\n    }\r\n\r\n    if (newPassword.length < 8) {\r\n      setError('Password must be at least 8 characters');\r\n      return;\r\n    }\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      setError('Passwords do not match');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // Verify we have an active session before updating password\r\n      const { data: { session }, error: sessionError } = await supabase.auth.getSession();\r\n\r\n      if (sessionError) {\r\n        logger.error('Session error:', sessionError);\r\n        throw new Error('Auth session missing!');\r\n      }\r\n\r\n      if (!session) {\r\n        logger.error('No active session found');\r\n        throw new Error('Auth session missing! Please use the password reset link from your email.');\r\n      }\r\n\r\n      logger.info('Active session found, updating password');\r\n      await updatePassword(newPassword);\r\n      setSuccess(true);\r\n\r\n      // Redirect to dashboard after 2 seconds\r\n      setTimeout(() => {\r\n        navigate('/dashboard', { replace: true });\r\n      }, 2000);\r\n    } catch (err: any) {\r\n      logger.error('Failed to reset password:', err);\r\n      setError(err.message || 'Failed to reset password. Please try again or request a new reset link.');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Show loading while verifying session\r\n  if (verifyingSession) {\r\n    return (\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          minHeight: '100vh',\r\n          px: 2,\r\n          background: theme.palette.mode === 'dark'\r\n            ? `linear-gradient(145deg, ${alpha(theme.palette.background.default, 0.95)} 0%, ${alpha(theme.palette.background.paper, 0.98)} 100%)`\r\n            : `linear-gradient(145deg, rgba(248,250,252,0.98) 0%, rgba(255,255,255,0.95) 100%)`\r\n        }}\r\n      >\r\n        <CircularProgress size={48} sx={{ mb: 2 }} />\r\n        <Typography variant=\"h6\" color=\"text.secondary\">\r\n          Verifying password reset link...\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  // Show expired link message\r\n  if (linkExpired) {\r\n    return (\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          minHeight: '100vh',\r\n          px: 2,\r\n          background: theme.palette.mode === 'dark'\r\n            ? `linear-gradient(145deg, ${alpha(theme.palette.background.default, 0.95)} 0%, ${alpha(theme.palette.background.paper, 0.98)} 100%)`\r\n            : `linear-gradient(145deg, rgba(248,250,252,0.98) 0%, rgba(255,255,255,0.95) 100%)`\r\n        }}\r\n      >\r\n        <Paper\r\n          sx={{\r\n            p: 4,\r\n            maxWidth: 500,\r\n            width: '100%',\r\n            textAlign: 'center',\r\n            borderRadius: 3\r\n          }}\r\n        >\r\n          <ErrorIcon color=\"error\" sx={{ fontSize: 64, mb: 2 }} />\r\n          <Typography variant=\"h5\" gutterBottom fontWeight={600}>\r\n            Reset Link Expired\r\n          </Typography>\r\n          <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mb: 3 }}>\r\n            This password reset link has expired or is no longer valid. Password reset links expire after 60 minutes for security.\r\n          </Typography>\r\n          <Alert severity=\"info\" sx={{ mb: 3, textAlign: 'left' }}>\r\n            <Typography variant=\"body2\" fontWeight={600} gutterBottom>\r\n              Common reasons for this error:\r\n            </Typography>\r\n            <Typography variant=\"body2\" component=\"ul\" sx={{ m: 0, pl: 2 }}>\r\n              <li>The link is older than 60 minutes</li>\r\n              <li>A newer reset link was requested</li>\r\n              <li>The link was already used</li>\r\n              <li>Multiple reset attempts triggered rate limits</li>\r\n            </Typography>\r\n          </Alert>\r\n          <Button\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            fullWidth\r\n            onClick={() => navigate('/', { replace: true })}\r\n            sx={{\r\n              py: 1.5,\r\n              fontSize: '1rem',\r\n              fontWeight: 600,\r\n              textTransform: 'none',\r\n            }}\r\n          >\r\n            Go to Home & Request New Link\r\n          </Button>\r\n        </Paper>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  // Show success message\r\n  if (success) {\r\n    return (\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          minHeight: '100vh',\r\n          px: 2,\r\n          background: theme.palette.mode === 'dark'\r\n            ? `linear-gradient(145deg, ${alpha(theme.palette.background.default, 0.95)} 0%, ${alpha(theme.palette.background.paper, 0.98)} 100%)`\r\n            : `linear-gradient(145deg, rgba(248,250,252,0.98) 0%, rgba(255,255,255,0.95) 100%)`\r\n        }}\r\n      >\r\n        <Paper\r\n          sx={{\r\n            p: 4,\r\n            maxWidth: 400,\r\n            width: '100%',\r\n            textAlign: 'center',\r\n            borderRadius: 3\r\n          }}\r\n        >\r\n          <CheckCircle color=\"success\" sx={{ fontSize: 64, mb: 2 }} />\r\n          <Typography variant=\"h5\" gutterBottom fontWeight={600}>\r\n            Password Reset Successful!\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\r\n            Your password has been updated successfully.\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            Redirecting to dashboard...\r\n          </Typography>\r\n        </Paper>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        minHeight: '100vh',\r\n        px: 2,\r\n        background: theme.palette.mode === 'dark'\r\n          ? `linear-gradient(145deg, ${alpha(theme.palette.background.default, 0.95)} 0%, ${alpha(theme.palette.background.paper, 0.98)} 100%)`\r\n          : `linear-gradient(145deg, rgba(248,250,252,0.98) 0%, rgba(255,255,255,0.95) 100%)`\r\n      }}\r\n    >\r\n      <Paper\r\n        sx={{\r\n          p: 4,\r\n          maxWidth: 400,\r\n          width: '100%',\r\n          borderRadius: 3\r\n        }}\r\n      >\r\n        {/* Header */}\r\n        <Box sx={{ textAlign: 'center', mb: 3 }}>\r\n          <Box\r\n            component=\"img\"\r\n            src=\"/android-chrome-192x192.png\"\r\n            alt=\"JournoTrades Logo\"\r\n            sx={{\r\n              width: 60,\r\n              height: 60,\r\n              borderRadius: '15px',\r\n              mb: 2,\r\n              mx: 'auto'\r\n            }}\r\n          />\r\n          <Typography variant=\"h5\" gutterBottom fontWeight={600}>\r\n            Reset Your Password\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            Enter your new password below\r\n          </Typography>\r\n        </Box>\r\n\r\n        {/* Error Alert */}\r\n        {error && (\r\n          <Alert severity=\"error\" sx={{ mb: 2 }} onClose={() => setError(null)}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n\r\n        {/* New Password Field */}\r\n        <TextField\r\n          fullWidth\r\n          type={showPassword ? 'text' : 'password'}\r\n          label=\"New Password\"\r\n          value={newPassword}\r\n          onChange={(e) => {\r\n            setNewPassword(e.target.value);\r\n            setError(null);\r\n          }}\r\n          disabled={loading}\r\n          sx={{ mb: 2 }}\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  edge=\"end\"\r\n                >\r\n                  {showPassword ? <VisibilityOff /> : <Visibility />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            )\r\n          }}\r\n          helperText=\"Minimum 8 characters\"\r\n        />\r\n\r\n        {/* Confirm Password Field */}\r\n        <TextField\r\n          fullWidth\r\n          type={showConfirmPassword ? 'text' : 'password'}\r\n          label=\"Confirm Password\"\r\n          value={confirmPassword}\r\n          onChange={(e) => {\r\n            setConfirmPassword(e.target.value);\r\n            setError(null);\r\n          }}\r\n          disabled={loading}\r\n          onKeyPress={(e) => {\r\n            if (e.key === 'Enter') {\r\n              handleResetPassword();\r\n            }\r\n          }}\r\n          sx={{ mb: 3 }}\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                  edge=\"end\"\r\n                >\r\n                  {showConfirmPassword ? <VisibilityOff /> : <Visibility />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            )\r\n          }}\r\n        />\r\n\r\n        {/* Submit Button */}\r\n        <Button\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          fullWidth\r\n          onClick={handleResetPassword}\r\n          disabled={loading || !newPassword.trim() || !confirmPassword.trim()}\r\n          sx={{\r\n            py: 1.5,\r\n            fontSize: '1rem',\r\n            fontWeight: 600,\r\n            textTransform: 'none',\r\n            mb: 2\r\n          }}\r\n        >\r\n          {loading ? (\r\n            <>\r\n              <CircularProgress size={20} sx={{ mr: 1 }} color=\"inherit\" />\r\n              Resetting Password...\r\n            </>\r\n          ) : (\r\n            'Reset Password'\r\n          )}\r\n        </Button>\r\n\r\n        {/* Back to Login */}\r\n        <Box sx={{ textAlign: 'center' }}>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            Remember your password?{' '}\r\n            <Button\r\n              onClick={() => navigate('/', { replace: true })}\r\n              sx={{\r\n                textTransform: 'none',\r\n                p: 0,\r\n                minWidth: 'auto',\r\n                fontWeight: 600,\r\n                '&:hover': {\r\n                  bgcolor: 'transparent',\r\n                  textDecoration: 'underline'\r\n                }\r\n              }}\r\n            >\r\n              Sign in\r\n            </Button>\r\n          </Typography>\r\n        </Box>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default PasswordResetPage;\r\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z\"\n}), 'Error');"],"names":["PasswordResetPage","navigate","useNavigate","theme","useTheme","searchParams","useSearchParams","updatePassword","useSupabaseAuth","newPassword","setNewPassword","useState","confirmPassword","setConfirmPassword","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","loading","setLoading","error","setError","success","setSuccess","linkExpired","setLinkExpired","verifyingSession","setVerifyingSession","useEffect","async","errorParam","get","errorCode","errorDescription","logger","recoveryCode","warn","info","data","session","sessionError","supabase","auth","getSession","otpError","verifyOtp","token_hash","type","err","handleRecoveryCode","handleResetPassword","trim","length","Error","setTimeout","replace","message","_jsxs","Box","sx","display","flexDirection","alignItems","justifyContent","minHeight","px","background","palette","mode","concat","alpha","default","paper","children","_jsx","CircularProgress","size","mb","Typography","variant","color","Paper","p","maxWidth","width","textAlign","borderRadius","ErrorIcon","fontSize","gutterBottom","fontWeight","Alert","severity","component","m","pl","Button","fullWidth","onClick","py","textTransform","CheckCircle","src","alt","height","mx","onClose","TextField","label","value","onChange","e","target","disabled","InputProps","endAdornment","InputAdornment","position","IconButton","edge","VisibilityOff","Visibility","helperText","onKeyPress","key","_Fragment","mr","minWidth","bgcolor","textDecoration","createSvgIcon","d"],"sourceRoot":""}