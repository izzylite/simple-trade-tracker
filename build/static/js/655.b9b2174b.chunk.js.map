{"version":3,"file":"static/js/655.b9b2174b.chunk.js","mappings":"0YAIA,SAAeA,EAAAA,EAAAA,IAA2BC,EAAAA,EAAAA,KAAK,OAAQ,CACrDC,EAAG,sFACD,iB,+ECSJ,MAAMC,EAAkB,IAAIC,EAAAA,E,iICbrB,SAASC,EAA2BC,GACzC,OAAOC,EAAAA,EAAAA,IAAqB,iBAAkBD,EAChD,EAC2BE,EAAAA,EAAAA,GAAuB,iBAAkB,CAAC,OAAQ,YAA7E,MCLaC,EAAA,+BAoBPC,GAAkBC,EAAAA,EAAAA,IAAO,MAAO,CACpCC,KAAM,iBACNN,KAAM,OACNO,kBAAmBA,CAACC,EAAOC,KACzB,MAAM,WACJC,GACEF,EACJ,MAAO,CAACC,EAAOE,MAAOD,EAAWE,gBAAkBH,EAAOI,QAAQ,GAP9CR,CASrB,CACDS,QAAS,OACTC,WAAY,SACZC,QAAS,EACTC,SAAU,CAAC,CACTT,MAAO,CACLI,gBAAgB,GAElBM,MAAO,CACL,gCAAiC,CAC/BC,WAAY,QAsDpB,EAjDiCC,EAAAA,YAAiB,SAAqBC,EAASC,GAC9E,MAAMd,GAAQe,EAAAA,EAAAA,GAAgB,CAC5Bf,MAAOa,EACPf,KAAM,oBAEF,eACJM,GAAiB,EAAK,UACtBY,GAEEhB,EADCiB,GAAKC,EAAAA,EAAAA,GACNlB,EAAKL,GACHO,GAAUiB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACXnB,GAAK,IACRI,mBAEIgB,EAhDkBlB,KACxB,MAAM,QACJkB,EAAO,eACPhB,GACEF,EACEmB,EAAQ,CACZlB,KAAM,CAAC,QAASC,GAAkB,YAEpC,OAAOkB,EAAAA,EAAAA,GAAeD,EAAO9B,EAA4B6B,EAAQ,EAwCjDG,CAAkBrB,GAClC,OAAoBf,EAAAA,EAAAA,KAAKS,GAAeuB,EAAAA,EAAAA,GAAA,CACtCH,WAAWQ,EAAAA,EAAAA,GAAKJ,EAAQjB,KAAMa,GAC9Bd,WAAYA,EACZY,IAAKA,GACFG,GAEP,I,uHC3BA,MAAMQ,GAAiB,SAACC,EAA+BC,GAAyD,IAAtCC,EAAgBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,MAC3F,IAAKH,KAASM,EAAAA,GAAAA,GAAQN,GAAO,OAAOE,EACpC,IACE,OAAOK,EAAAA,EAAAA,GAAOP,EAAMC,EACtB,CAAE,MAAAO,GACA,OAAON,CACT,CACF,EAaMO,GAA4CC,IAS3C,IAT4C,SACjDC,EAAQ,gBACRC,EAAe,eACfC,EAAc,oBACdC,EAAmB,eACnBC,EAAc,iBACdC,EAAgB,yBAChBC,EAAwB,eACxBC,GACDR,EACC,MAAMS,GAAQC,EAAAA,EAAAA,MACPC,EAAcC,GAAmBpC,EAAAA,SAAmC,MAErEqC,GAAkBC,EAAAA,EAAAA,cAAaC,IACnCA,EAAEC,kBACFJ,EAAgBG,EAAEE,cAAc,GAC/B,IAEGC,GAAkBJ,EAAAA,EAAAA,cAAY,KAClCF,EAAgB,KAAK,GACpB,IAEGO,GAAsBL,EAAAA,EAAAA,cAAaM,IACvCF,IACAE,GAAQ,GACP,CAACF,IAGEG,GAAuBC,EAAAA,EAAAA,UAAQ,KAC5B,CACLC,UAAWtB,EAASsB,WAAa,EACjCC,SAAUvB,EAASuB,UAAY,EAC/BC,aAAcxB,EAASwB,cAAgB,EACvCC,kBAAmBzB,EAAS0B,iBAAmB,EAC/CC,QAAS3B,EAAS2B,SAAW,EAC7BC,SAAU5B,EAAS4B,UAAY,EAC/BC,cAAe7B,EAAS6B,eAAiB,EACzCC,aAAc9B,EAAS8B,cAAgB,EACvCC,yBAA0B/B,EAAS+B,0BAA4B,EAC/DC,kBAAmBhC,EAASgC,mBAAqB,EACjDC,oBAAqBjC,EAASiC,qBAAuB,KACrDC,kBAAmBlC,EAASkC,mBAAqB,KACjDC,gBAAiBnC,EAASmC,iBAAmB,EAC7CT,gBAAiB1B,EAAS0B,iBAAmB,EAC7CU,UAAWpC,EAASoC,WAAa,EACjCC,WAAYrC,EAASqC,YAAc,EACnCC,gBAAiBtC,EAASsC,iBAAmBtC,EAASuC,gBACtDC,gBAAiBxC,EAASuC,gBAC1BE,WAAYzC,EAASyC,WACrBC,YAAa1C,EAAS0C,YACtBC,WAAY3C,EAAS2C,WACrBC,sBAAuB5C,EAAS4C,sBAChCC,uBAAwB7C,EAAS6C,uBACjCC,sBAAuB9C,EAAS8C,sBAChCC,gBAAiB/C,EAAS+C,gBAC1BC,iBAAkBhD,EAASgD,oBAE5B,CAAChD,IAyEJ,OACEiD,EAAAA,EAAAA,MAACC,EAAAA,EAAI,CACHC,GAAI,CACFC,OAAQ,UACRC,WAAY,wCACZC,SAAU,WACVC,SAAU,SACVtF,QAAS,OACTuF,cAAe,SACfC,OAAQ,OACRC,aAAc,EACdC,OAAQ,YACRC,aAAaC,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQC,QAAS,IAC1CC,WAAmC,SAAvBxD,EAAMsD,QAAQG,KAAe,2BAAAC,QACVL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWG,MAAO,KAAK,SAAAD,QAAQL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,KAAK,4FAE/HC,eAAgB,aAChBC,UAAU,cAADJ,QAAgBL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQS,OAAOC,MAA8B,SAAvBhE,EAAMsD,QAAQG,KAAkB,GAAM,MACjG,UAAW,CACTQ,UAAW,+BACXH,UAAU,eAADJ,QAAiBL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQS,OAAOC,MAA8B,SAAvBhE,EAAMsD,QAAQG,KAAkB,GAAM,MAClGL,aAAaC,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,IAC/C,gBAAiB,CACfF,UAAW,iBAIjBG,QAASA,IAAM3E,EAAgBD,EAAS6E,IAAIC,SAAA,EAG5C7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFG,SAAU,WACVC,SAAU,SACVE,OAAQ,CAAEuB,GAAI,IAAKC,GAAI,KACvBC,WAAY,GACZJ,SAAA,EAEFhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACFpG,UAAU,aACVwE,IAAErE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACAwE,SAAU,WACV6B,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,GACJtF,EAASuF,eAAiB,CAC5BC,gBAAgB,OAADtB,OAASlE,EAASuF,eAAc,KAC/CE,eAAgB,QAChBC,mBAAoB,SACpBC,iBAAkB,aAChB,CAEF3B,WAAW,4CAADE,QACNL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,IAAI,0BAAAT,QACtCL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ8B,UAAUjB,KAAM,IAAI,2BAAAT,QACxCL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,KAAK,YAC1C,CAAF,GACDtB,WAAY,wCACZ,YAAa,CACXwC,QAAS,KACTvC,SAAU,WACV6B,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,EACRtB,WAAYhE,EAASuF,eAAc,2BAAArB,QACJL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQS,OAAOC,MAAO,IAAI,SAAAN,QAAQL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQS,OAAOC,MAAO,IAAI,UAAAN,QAASL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQS,OAAOC,MAAO,IAAI,UAC9J,cACJsB,OAAQ,EACRzC,WAAY,6BAMhBrD,EAASuF,iBACTtC,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFG,SAAU,WACV6B,IAAK,MACLC,KAAM,MACNX,UAAW,wBACXqB,OAAQ,EACRC,UAAW,SACXC,OAAOnC,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQmC,KAAKL,UAAW,KAC3Cd,SAAA,EAEFhI,EAAAA,EAAAA,KAACoJ,EAAAA,EAAY,CAAC/C,GAAI,CAAEgD,SAAU,OAAQC,GAAI,EAAGC,QAAS,OACtDvJ,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,QACRpD,GAAI,CAEFqD,WAAY,IACZH,QAAS,GACTF,SAAU,UACVrB,SAED9E,EAASvC,cAQlBwF,EAAAA,EAAAA,MAACwD,EAAAA,EAAW,CAACtD,GAAI,CACfuD,EAAG,EACHzI,QAAS,OACTuF,cAAe,SACfmD,SAAU,EACVrD,SAAU,WACVwC,OAAQ,GACRhB,SAAA,EAEAhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CAAC5B,GAAI,CAAEiD,GAAI,GAAItB,UACjB7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEiD,GAAI,KAAMtB,SAAA,EACnB7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CACTC,QAAQ,KACRK,UAAU,MACVzD,GAAI,CACFqD,WAAY,IACZR,MAAO,eACP/H,QAAS,OACTC,WAAY,SACZ2I,IAAK,IACLT,GAAI,GACJD,SAAU,SACVW,cAAe,UACfC,WAAY,IACZC,SAAU,GACVlC,SAAA,EAEFhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF6B,UAAU,OACVzD,GAAI,CACFI,SAAU,SACV0D,aAAc,WACdC,WAAY,SACZF,SAAU,EACVG,KAAM,GACNrC,SAED9E,EAASvC,OAEX2D,EAAME,UAAY,IACjBxE,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CAAC5B,GAAI,CACPlF,QAAS,OACTC,WAAY,SACZkJ,eAAgB,SAChBC,MAAO,GACP5D,OAAQ,GACRC,aAAc,MACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQyD,QAAQ5C,KAAM,IAC3ChB,OAAO,aAADO,QAAeL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQyD,QAAQ5C,KAAM,MACvDG,UACAhI,EAAAA,EAAAA,KAAC0K,EAAAA,EAAU,CAACrE,GAAI,CAAEgD,SAAU,OAAQH,MAAO,oBAG9C5E,EAAME,UAAY,IACjBxE,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CAAC5B,GAAI,CACPlF,QAAS,OACTC,WAAY,SACZkJ,eAAgB,SAChBC,MAAO,GACP5D,OAAQ,GACRC,aAAc,MACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ2D,MAAM9C,KAAM,IACzChB,OAAO,aAADO,QAAeL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ2D,MAAM9C,KAAM,MACrDG,UACAhI,EAAAA,EAAAA,KAAC4K,EAAAA,EAAY,CAACvE,GAAI,CAAEgD,SAAU,OAAQH,MAAO,qBAjP7D,SACE5E,EACAZ,EACAD,GAEA,MAAMoH,EAASvG,EAAMK,kBACrB,OAAImG,MAAMD,GAAgB,MAGxB1E,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFlF,QAAS,OACTC,WAAY,SACZ2J,GAAI,EACJhB,IAAK,IACLH,EAAG,IACHhD,aAAc,EACd4D,QAASlG,EAAME,UAAY,GACvBuC,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQyD,QAAQ5C,KAAM,IAClCvD,EAAME,UAAY,GAChBuC,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ2D,MAAM9C,KAAM,KAChCd,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQgE,KAAK,KAAM,IACrCnE,OAAO,aAADO,OAAe9C,EAAME,UAAY,GACnCuC,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQyD,QAAQ5C,KAAM,IAClCvD,EAAME,UAAY,GAChBuC,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ2D,MAAM9C,KAAM,KAChCd,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQgE,KAAK,KAAM,MACrChD,SAAA,EAEFhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFkE,MAAO,GACP5D,OAAQ,GACRC,aAAc,MACdzF,QAAS,OACTC,WAAY,SACZkJ,eAAgB,SAChBE,QAASlG,EAAME,UAAY,GACvBuC,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQyD,QAAQ5C,KAAM,IAClCvD,EAAME,UAAY,GAChBuC,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ2D,MAAM9C,KAAM,KAChCd,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQgE,KAAK,KAAM,KACrChD,UAEFhI,EAAAA,EAAAA,KAAC0K,EAAAA,EAAU,CAACrE,GAAI,CACdgD,SAAU,SACVH,MAAO5E,EAAME,UAAY,EACrBd,EAAMsD,QAAQyD,QAAQ5C,KACtBvD,EAAME,UAAY,EAChBd,EAAMsD,QAAQ2D,MAAM9C,KACpBnE,EAAMsD,QAAQgE,KAAK,WAG7B7E,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,KAAKpD,GAAI,CAC3B6C,MAAO5E,EAAME,UAAY,EACrB,eACAF,EAAME,UAAY,EAChB,aACA,iBACNkF,WAAY,KACZ1B,SACCvE,EAAea,EAAME,cAExB2B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAgBlB,SAAA,CAAC,WACxC1D,EAAMK,kBAAkBsG,QAAQ,GAAG,YAKtD,CAgLWC,CAAoB5G,EAAOZ,EAAOD,SAQvC0C,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMlK,QAAS,EAAGmF,GAAI,CAAEiD,GAAI,KAAMtB,SAAA,EACjD7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAElF,QAAS,OAAQC,WAAY,SAAU2I,IAAK,IAAM/B,SAAA,EAC3DhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CAAC5B,GAAI,CACPlF,QAAS,OACTC,WAAY,SACZkJ,eAAgB,SAChBC,MAAO,GACP5D,OAAQ,GACRC,aAAc,MACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,KAC3CG,UACAhI,EAAAA,EAAAA,KAACoJ,EAAAA,EAAY,CAAC/C,GAAI,CAAEgD,SAAU,SAAUH,MAAO,qBAEjD/C,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAiB7C,GAAI,CAAEgD,SAAU,SAAUK,WAAY,KAAM1B,SAAA,CAAC,WACrF1F,GAAeY,EAASmI,WAAY,sBAGjDlF,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAElF,QAAS,OAAQC,WAAY,SAAU2I,IAAK,IAAM/B,SAAA,EAC3DhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CAAC5B,GAAI,CACPlF,QAAS,OACTC,WAAY,SACZkJ,eAAgB,SAChBC,MAAO,GACP5D,OAAQ,GACRC,aAAc,MACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ8B,UAAUjB,KAAM,KAC7CG,UACAhI,EAAAA,EAAAA,KAACsL,EAAAA,EAAQ,CAACjF,GAAI,CAAEgD,SAAU,SAAUH,MAAO,uBAE7C/C,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAiB7C,GAAI,CAAEgD,SAAU,SAAUK,WAAY,KAAM1B,SAAA,CAAC,WACrF1F,GAAeY,EAASqI,WAAY,4BAOrDvL,EAAAA,EAAAA,KAACwL,EAAW,CAACnF,GAAI,CACfiE,eAAgB,WAChBlJ,WAAY,SACZwI,EAAG,EACH6B,UAAU,aAADrE,QAAeL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQC,QAAS,MACrDe,UACA7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAElF,QAAS,OAAQC,WAAY,SAAU2I,IAAK,GAAI/B,SAAA,CAExDxE,IACCxD,EAAAA,EAAAA,KAAC0L,GAAAA,EAAW,CACVC,KAAK,WACLC,KAAM1I,EACN2I,qBAAsBrI,KAI1BxD,EAAAA,EAAAA,KAAC8L,EAAAA,EAAU,CACTC,KAAK,QACLjE,QAAShE,EACTuC,GAAI,CACF6C,MAAO,iBACP,UAAW,CACTsB,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,IAC3CqB,MAAO,iBAETlB,UAEFhI,EAAAA,EAAAA,KAACgM,GAAAA,EAAY,OAGf7F,EAAAA,EAAAA,MAAC8F,EAAAA,EAAI,CACHC,SAAUtI,EACVuI,KAAMC,QAAQxI,GACdyI,QAASlI,EACT2D,QAAU9D,GAAMA,EAAEC,kBAClBqI,gBAAiB,CAAEC,WAAY,QAASC,SAAU,OAClDC,aAAc,CAAEF,WAAY,QAASC,SAAU,UAAWxE,SAAA,EAE1D7B,EAAAA,EAAAA,MAACuG,EAAAA,EAAQ,CAAC5E,QAASA,IAAM1D,GAAoB,IAAMhB,EAAeF,KAAW8E,SAAA,EAC3EhI,EAAAA,EAAAA,KAAC2M,EAAAA,EAAY,CAAA3E,UACXhI,EAAAA,EAAAA,KAACsL,EAAAA,EAAQ,CAACjC,SAAS,aAErBrJ,EAAAA,EAAAA,KAAC4M,GAAAA,EAAY,CAAA5E,SAAC,aAGhB7B,EAAAA,EAAAA,MAACuG,EAAAA,EAAQ,CAAC5E,QAASA,IAAM1D,GAAoB,IAAMf,EAAoBH,KAAW8E,SAAA,EAChFhI,EAAAA,EAAAA,KAAC2M,EAAAA,EAAY,CAAA3E,UACXhI,EAAAA,EAAAA,KAAC6M,GAAAA,EAAQ,CAACxD,SAAS,aAErBrJ,EAAAA,EAAAA,KAAC4M,GAAAA,EAAY,CAAA5E,SAAC,iBAGf1E,IACC6C,EAAAA,EAAAA,MAACuG,EAAAA,EAAQ,CAAC5E,QAASA,IAAM1D,GAAoB,IAAMd,EAAeJ,KAAW8E,SAAA,EAC3EhI,EAAAA,EAAAA,KAAC2M,EAAAA,EAAY,CAAA3E,UACXhI,EAAAA,EAAAA,KAAC8M,GAAAA,EAAQ,CAACzD,SAAS,aAErBrJ,EAAAA,EAAAA,KAAC4M,GAAAA,EAAY,CAAA5E,SAAC,aAIlB7B,EAAAA,EAAAA,MAACuG,EAAAA,EAAQ,CACP5E,QAASA,IAAM1D,GAAoB,IAAMb,EAAiBL,EAAS6E,MACnE1B,GAAI,CAAE6C,MAAO,cAAelB,SAAA,EAE5BhI,EAAAA,EAAAA,KAAC2M,EAAAA,EAAY,CAAA3E,UACXhI,EAAAA,EAAAA,KAAC+M,EAAAA,EAAS,CAAC1D,SAAS,QAAQhD,GAAI,CAAE6C,MAAO,mBAE3ClJ,EAAAA,EAAAA,KAAC4M,GAAAA,EAAY,CAAA5E,SAAC,wBAKjB,EAIX,GAAevG,EAAAA,KAAWuB,I,gBCpd1B,MA8LA,GA9LsCgK,KACpC,MAAMtJ,GAAQC,EAAAA,EAAAA,KAEd,OACEwC,EAAAA,EAAAA,MAACC,EAAAA,EAAI,CACHC,GAAI,CACFM,OAAQ,OACR4D,MAAO,QACP/D,SAAU,WACVC,SAAU,SACVF,WAAY,6BACZ,YAAa,CACXwC,QAAS,KACTvC,SAAU,WACV6B,IAAK,EACLC,KAAM,EACNC,MAAO,EACPS,OAAQ,IAEVhB,SAAA,EAEF7B,EAAAA,EAAAA,MAACwD,EAAAA,EAAW,CAACtD,GAAI,CAAEuD,EAAG,GAAI5B,SAAA,EACxB7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEiD,GAAI,KAAMtB,SAAA,EAEnBhI,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAM,MACN3D,aAAc,EACd6C,QAAQ,OACRyD,UAAU,SACV7G,GAAI,CAAEiD,GAAI,MAIZnD,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMlK,QAAS,EAAGmF,GAAI,CAAEiD,GAAI,GAAItB,SAAA,EAC/ChI,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAM,MACN3D,aAAc,EACd6C,QAAQ,UACRyD,UAAU,SAEZlN,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAM,MACN3D,aAAc,EACd6C,QAAQ,UACRyD,UAAU,eAKhBlN,EAAAA,EAAAA,KAACmN,GAAAA,EAAO,CAAC9G,GAAI,CAAE+G,GAAI,EAAG7D,QAAS,OAG/BpD,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACjK,QAAS,EAAE8G,SAAA,EAEhBhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFuD,EAAG,IACHhD,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,IACjDgC,GAAI,GACJtB,UAEF7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAElF,QAAS,OAAQC,WAAY,SAAU2I,IAAK,KAAM/B,SAAA,EAC3DhI,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAO,GACP3D,aAAa,MACb6C,QAAQ,QACRyD,UAAU,YAEZ/G,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEkE,MAAO,QAASvC,SAAA,EACzBhI,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAM,MACN3D,aAAc,EACd6C,QAAQ,OACRyD,UAAU,OACV7G,GAAI,CAAEiD,GAAI,MAEZtJ,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAM,MACN3D,aAAc,EACd6C,QAAQ,UACRyD,UAAU,iBAOlB/G,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAElF,QAAS,OAAQkM,oBAAqB,iBAAkBtD,IAAK,GAAI/B,SAAA,EAC1E7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEuD,EAAG,IAAKhD,aAAc,EAAG4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,KAAOU,SAAA,EAC1FhI,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAM,MACN3D,aAAc,EACd6C,QAAQ,UACRyD,UAAU,MACV7G,GAAI,CAAEiD,GAAI,MAEZtJ,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAM,MACN3D,aAAc,EACd6C,QAAQ,OACRyD,UAAU,eAGd/G,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEuD,EAAG,IAAKhD,aAAc,EAAG4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,KAAOU,SAAA,EAC1FhI,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAM,MACN3D,aAAc,EACd6C,QAAQ,UACRyD,UAAU,MACV7G,GAAI,CAAEiD,GAAI,MAEZtJ,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAM,MACN3D,aAAc,EACd6C,QAAQ,OACRyD,UAAU,kBAMhB/G,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEuD,EAAG,IAAKhD,aAAc,EAAG4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,KAAOU,SAAA,EAC1FhI,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAM,MACN3D,aAAc,EACd6C,QAAQ,UACRyD,UAAU,MACV7G,GAAI,CAAEiD,GAAI,MAEZtJ,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CAAC5B,GAAI,CAAElF,QAAS,OAAQkM,oBAAqB,iBAAkBtD,IAAK,GAAI/B,SACzE,CAAC,EAAG,EAAG,GAAGsF,KAAKC,IACdpH,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAM,MACN3D,aAAc,EACd6C,QAAQ,UACRyD,UAAU,MACV7G,GAAI,CAAEiD,GAAI,OAEZtJ,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CACNtG,OAAQ,GACR4D,MAAM,MACN3D,aAAc,EACd6C,QAAe,IAAN8D,EAAU,QAAU,UAC7BL,UAAU,aAdJK,iBAuBpBvN,EAAAA,EAAAA,KAACwL,EAAW,CAACnF,GAAI,CACfiE,eAAgB,WAChBV,EAAG,EACH4D,GAAI,EACJ/B,UAAU,aAADrE,QAAeL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQC,QAAS,MACrDe,UAEAhI,EAAAA,EAAAA,KAACmL,EAAAA,EAAK,CAACC,UAAU,MAAMlK,QAAS,EAAE8G,SAC/B,CAAC,EAAG,EAAG,GAAGsF,KAAKC,IACdvN,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAENtG,OAAQ,GACR4D,MAAO,GACP3D,aAAc,EACd6C,QAAe,IAAN8D,EAAU,QAAU,UAC7BL,UAAiB,IAANK,EAAU,OAAS,UALzBA,WAUR,E,mJCjLJ,MAAME,GAAkExK,IAMxE,IANyE,KAC9EkJ,EAAI,SACJjJ,EAAQ,cACRwK,EAAa,QACbrB,EAAO,YACPsB,GACD1K,EACC,MAAMS,GAAQC,EAAAA,EAAAA,KAEd,OACEwC,EAAAA,EAAAA,MAACyH,EAAAA,GAAM5L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACLmK,KAAMA,EACNE,QAASA,EACTwB,SAAS,KACTC,WAAS,GACLC,GAAAA,GAAW,IAAA/F,SAAA,EAEf7B,EAAAA,EAAAA,MAAC6H,EAAAA,EAAW,CAAC3H,GAAI,CACflF,QAAS,OACTC,WAAY,SACZ2I,IAAK,EACLb,MAAO,gBACPlB,SAAA,EACAhI,EAAAA,EAAAA,KAAC6M,GAAAA,EAAQ,CAACxD,SAAS,UAAU,iCAG/BrJ,EAAAA,EAAAA,KAACiO,EAAAA,EAAa,CAAAjG,SACX0F,GACCvH,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACPlF,QAAS,OACTuF,cAAe,SACftF,WAAY,SACZ8M,GAAI,GACJlG,SAAA,EACAhI,EAAAA,EAAAA,KAACmO,GAAAA,EAAgB,CAACpC,KAAM,GAAI1F,GAAI,CAAEiD,GAAI,MACtCtJ,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAgBlB,SAAC,gCAKrD7B,EAAAA,EAAAA,MAAAiI,EAAAA,SAAA,CAAApG,SAAA,EACE7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,QAAQpD,GAAI,CAAEiD,GAAI,GAAItB,SAAA,CAAC,oCACC,OAAR9E,QAAQ,IAARA,OAAQ,EAARA,EAAUvC,KAAK,SAGnDwF,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACjK,QAAS,EAAE8G,SAAA,EAChBhI,EAAAA,EAAAA,KAACqO,EAAAA,EAAM,CACL5E,QAAQ,WACR3B,QAASA,IAAM6F,GAAY,GAC3BW,SAAUZ,EACVrH,GAAI,CACFuD,EAAG,EACHX,UAAW,OACXqB,eAAgB,aAChBxD,YAAa,eACb,UAAW,CACTA,YAAa,eACbyH,iBAAiBxH,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,OAErDG,UAEF7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,YAAYpD,GAAI,CAAEqD,WAAY,IAAKJ,GAAI,IAAMtB,SAAC,mBAGlEhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAgBlB,SAAC,gDAMvDhI,EAAAA,EAAAA,KAACqO,EAAAA,EAAM,CACL5E,QAAQ,WACR3B,QAASA,IAAM6F,GAAY,GAC3BW,SAAUZ,EACVrH,GAAI,CACFuD,EAAG,EACHX,UAAW,OACXqB,eAAgB,aAChBxD,YAAa,eACb,UAAW,CACTA,YAAa,eACbyH,iBAAiBxH,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,OAErDG,UAEF7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,YAAYpD,GAAI,CAAEqD,WAAY,IAAKJ,GAAI,IAAMtB,SAAC,uBAGlEhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAgBlB,SAAC,uDAS/DhI,EAAAA,EAAAA,KAACwO,EAAAA,EAAa,CAAAxG,UACZhI,EAAAA,EAAAA,KAACqO,EAAAA,EAAM,CACLvG,QAASuE,EACTiC,SAAUZ,EACVrH,GAAI,CAAE6C,MAAO,kBAAmBlB,SACjC,gBAII,E,2ECpGN,MAAMyG,GAAwDxL,IAQ9D,IAR+D,KACpEkJ,EAAI,SACJjJ,EAAQ,UACRwL,EAAS,UACTC,EAAS,QACTtC,EAAO,OACPuC,EAAM,SACNC,GACD5L,EACC,MAAMS,GAAQC,EAAAA,EAAAA,MACPmL,EAAoBC,IAAyBC,EAAAA,EAAAA,UAAiB,KAC9DC,EAAcC,IAAmBF,EAAAA,EAAAA,WAAS,IAC1CrE,EAAOwE,IAAYH,EAAAA,EAAAA,UAAwB,MAK5CI,EAAqBV,EAAUW,QAClCC,GAAMA,EAAEvH,MAAe,OAAR7E,QAAQ,IAARA,OAAQ,EAARA,EAAU6E,KAAMuH,EAAEC,yBAAkC,OAARrM,QAAQ,IAARA,OAAQ,EAARA,EAAU6E,MAIlEyH,EAAyB,OAARtM,QAAQ,IAARA,GAAAA,EAAUqM,sBAC7Bb,EAAUe,MAAMH,GAAMA,EAAEvH,KAAO7E,EAASqM,wBACxC,MAGJG,EAAAA,EAAAA,YAAU,KACJvD,IACF4C,EAAsB,IACtBI,EAAS,MACX,GACC,CAAChD,IAEJ,MAkCMwD,EAAehB,GAAaM,EAElC,OACE9I,EAAAA,EAAAA,MAACyH,EAAAA,GAAM5L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACLmK,KAAMA,EACNE,QAASA,EACTwB,SAAS,KACTC,WAAS,GACLC,GAAAA,GAAW,IAAA/F,SAAA,EAEf7B,EAAAA,EAAAA,MAAC6H,EAAAA,EAAW,CACV3H,GAAI,CACFlF,QAAS,OACTC,WAAY,SACZ2I,IAAK,EACLb,MAAO,gBACPlB,SAAA,EAEFhI,EAAAA,EAAAA,KAAC8M,GAAAA,EAAQ,CAACzD,SAAS,UAAU,oBAG/BrJ,EAAAA,EAAAA,KAACiO,EAAAA,EAAa,CAAAjG,SACX2H,GACCxJ,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFlF,QAAS,OACTuF,cAAe,SACftF,WAAY,SACZ8M,GAAI,GACJlG,SAAA,EAEFhI,EAAAA,EAAAA,KAACmO,GAAAA,EAAgB,CAACpC,KAAM,GAAI1F,GAAI,CAAEiD,GAAI,MACtCtJ,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAgBlB,SAC/CiH,EAAe,mBAAqB,mBAIzC9I,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACjK,QAAS,EAAE8G,SAAA,EAChBhI,EAAAA,EAAAA,KAAC4P,GAAAA,EAAK,CAACC,SAAS,OAAOxJ,GAAI,CAAEO,aAAc,GAAIoB,UAC7C7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,QAAOzB,SAAA,CAAC,+CAC2B,OAAR9E,QAAQ,IAARA,OAAQ,EAARA,EAAUvC,KAAK,0HAM/DgK,IACC3K,EAAAA,EAAAA,KAAC4P,GAAAA,EAAK,CAACC,SAAS,QAAQxJ,GAAI,CAAEO,aAAc,GAAIoB,UAC9ChI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAOzB,SAAE2C,MAIhC6E,GACCrJ,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,YAAYP,MAAM,iBAAiB7C,GAAI,CAAEiD,GAAI,GAAItB,SAAC,0BAGtE7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFlF,QAAS,OACTC,WAAY,SACZkJ,eAAgB,gBAChBV,EAAG,EACHhD,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,KAC3ChB,OAAO,aAADO,QAAeL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,MACvDG,SAAA,EAEF7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAElF,QAAS,OAAQC,WAAY,SAAU2I,IAAK,GAAI/B,SAAA,EACzDhI,EAAAA,EAAAA,KAAC8P,GAAAA,EAAI,CACHC,MAAOP,EAAe7O,KACtBuI,MAAM,UACNO,QAAQ,cAEVzJ,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAgBlB,SAAC,qCAIrDhI,EAAAA,EAAAA,KAACqO,EAAAA,EAAM,CACL5E,QAAQ,WACRP,MAAM,QACN6C,KAAK,QACLiE,WAAWhQ,EAAAA,EAAAA,KAACiQ,GAAAA,EAAU,IACtBnI,QA/FGoI,UACnBhB,GAAgB,GAChB,UACQL,IACNxC,GACF,CAAE,MAAO1B,GACPwF,QAAQxF,MAAM,4BAA6BA,EAC7C,CAAC,QACCuE,GAAgB,EAClB,GAuFgBZ,SAAUqB,EAAa3H,SACxB,kBAML7B,EAAAA,EAAAA,MAACiK,GAAAA,EAAW,CAACtC,WAAS,EAAA9F,SAAA,EACpBhI,EAAAA,EAAAA,KAACqQ,GAAAA,EAAU,CAACtI,GAAG,wBAAuBC,SAAC,qBACvChI,EAAAA,EAAAA,KAACsQ,GAAAA,EAAM,CACLC,QAAQ,wBACRC,MAAO1B,EACPiB,MAAM,kBACNU,SAAWzM,GAAM+K,EAAsB/K,EAAE0M,OAAOF,OAChDlC,SAAUqB,EAAa3H,SAEQ,IAA9BoH,EAAmBzM,QAClB3C,EAAAA,EAAAA,KAAC0M,EAAAA,EAAQ,CAAC8D,MAAM,GAAGlC,UAAQ,EAAAtG,SAAC,2BAI5BoH,EAAmB9B,KAAKgC,IACtBtP,EAAAA,EAAAA,KAAC0M,EAAAA,EAAQ,CAAY8D,MAAOlB,EAAEvH,GAAGC,SAC9BsH,EAAE3O,MADU2O,EAAEvH,YASzByH,GAAgD,IAA9BJ,EAAmBzM,SACrC3C,EAAAA,EAAAA,KAAC4P,GAAAA,EAAK,CAACC,SAAS,UAAUxJ,GAAI,CAAEO,aAAc,GAAIoB,UAChDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAOzB,SAAC,2EAQtC7B,EAAAA,EAAAA,MAACqI,EAAAA,EAAa,CAAAxG,SAAA,EACZhI,EAAAA,EAAAA,KAACqO,EAAAA,EAAM,CAACvG,QAASuE,EAASiC,SAAUqB,EAActJ,GAAI,CAAE6C,MAAO,kBAAmBlB,SAAC,YAGjFwH,IACAxP,EAAAA,EAAAA,KAACqO,EAAAA,EAAM,CACL5E,QAAQ,YACR3B,QAtKSoI,UACjB,GAAKpB,EAAL,CAEAI,GAAgB,GAChBC,EAAS,MACT,UACQP,EAAOE,GACbzC,GACF,CAAE,MAAOsE,GACPR,QAAQxF,MAAM,0BAA2BgG,GACzC,MAAMC,EAAUD,aAAeE,MAAQF,EAAIC,QAAU,0BAEjDA,EAAQE,cAAcC,SAAS,YACjC5B,EAAS,yDAETA,EAASyB,EAEb,CAAC,QACC1B,GAAgB,EAClB,CAlB+B,CAkB/B,EAoJQZ,SAAUqB,IAAiBb,EAC3BkB,WAAWhQ,EAAAA,EAAAA,KAAC8M,GAAAA,EAAQ,IAAI9E,SACzB,wBAKE,E,qFC9Ob,UAAejI,EAAAA,EAAAA,IAA2BC,EAAAA,EAAAA,KAAK,OAAQ,CACrDC,EAAG,iOACD,W,mDCCJ,SAAS+Q,GAAgBC,EAAUC,GACjC,IAAIC,EAAOF,EAASG,cAAgBF,EAAUE,eAAiBH,EAASI,WAAaH,EAAUG,YAAcJ,EAASK,UAAYJ,EAAUI,WAAaL,EAASM,WAAaL,EAAUK,YAAcN,EAASO,aAAeN,EAAUM,cAAgBP,EAASQ,aAAeP,EAAUO,cAAgBR,EAASS,kBAAoBR,EAAUQ,kBAElV,OAAIP,EAAO,GACD,EACCA,EAAO,EACT,EAEAA,CAEX,CAoDe,SAASQ,GAAiBC,EAAeC,IACtDC,EAAAA,GAAAA,GAAa,EAAGpP,WAChB,IAAIuO,GAAWc,EAAAA,GAAAA,GAAOH,GAClBV,GAAYa,EAAAA,GAAAA,GAAOF,GACnBG,EAAOhB,GAAgBC,EAAUC,GACjCe,EAAaC,KAAKC,ICvCT,SAAkCP,EAAeC,IAC9DC,EAAAA,GAAAA,GAAa,EAAGpP,WAChB,IAAI0P,GAAiBC,EAAAA,GAAAA,GAAWT,GAC5BU,GAAkBD,EAAAA,GAAAA,GAAWR,GAC7BU,EAAgBH,EAAeI,WAAYC,EAAAA,GAAAA,GAAgCL,GAC3EM,EAAiBJ,EAAgBE,WAAYC,EAAAA,GAAAA,GAAgCH,GAIjF,OAAOJ,KAAKS,OAAOJ,EAAgBG,GAzCX,MA0C1B,CD6B4BE,CAAyB3B,EAAUC,IAC7DD,EAAS4B,QAAQ5B,EAASK,UAAYU,EAAOC,GAG7C,IACIa,EAASd,GAAQC,EADEc,OAAO/B,GAAgBC,EAAUC,MAAgBc,IAGxE,OAAkB,IAAXc,EAAe,EAAIA,CAC5B,CExDA,MAAMxQ,GAAiB,SACrBC,EACAC,GAEY,IADZC,EAAgBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,MAEnB,IAAKH,EAAM,OAAOE,EAClB,MAAMuQ,EAA0B,kBAATzQ,EAAoB,IAAI0Q,KAAK1Q,GAAQA,EAC5D,KAAKM,EAAAA,GAAAA,GAAQmQ,GAAU,OAAOvQ,EAC9B,IACE,OAAOK,EAAAA,EAAAA,GAAOkQ,EAASxQ,EACzB,CAAE,MAAAO,GACA,OAAON,CACT,CACF,EA2JA,GAjJ4DQ,IAIrD,IAJsD,SAC3DC,EAAQ,UACRgQ,EAAS,kBACTC,GACDlQ,EACC,MAAMS,GAAQC,EAAAA,EAAAA,MACPyP,EAAaC,IAAkBrE,EAAAA,EAAAA,WAAS,IACxCsE,EAAYC,IAAiBvE,EAAAA,EAAAA,WAAS,GAEvCwE,EAjBsBC,KAC5B,IAAKA,EAAc,OAAO,GAC1B,MAAMC,EAAqC,kBAAjBD,EAA4B,IAAIR,KAAKQ,GAAgBA,EAC/E,KAAK5Q,EAAAA,GAAAA,GAAQ6Q,GAAa,OAAO,GACjC,MAAMC,EAAOhC,GAAiB+B,EAAY,IAAIT,MAC9C,OAAOf,KAAK0B,IAAI,EAAGD,EAAK,EAYEE,CAAqB3Q,EAAS4Q,gBAsBxD,OACE3N,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFlF,QAAS,OACTC,WAAY,SACZ2I,IAAK,IACLH,EAAG,IACHhD,aAAc,EACd4D,QAAgC,SAAvB9G,EAAMsD,QAAQG,MACnBJ,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWG,MAAO,KACtCN,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,IAC5CT,OAAO,aAADO,QAAeL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQC,QAAS,KAClDV,WAAY,YACZyB,SAAA,EAGFhI,EAAAA,EAAAA,KAAC+T,GAAAA,EAAM,CACLC,IAAK9Q,EAASuF,qBAAkB7F,EAChC6G,QAAQ,UACRpD,GAAI,CACFkE,MAAO,GACP5D,OAAQ,GACRyB,WAAY,EACZoC,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ2D,MAAM9C,KAAM,IACzC0B,QAAS,GACT,QAAS,CACP0K,UAAW,UAEbjM,UAEFhI,EAAAA,EAAAA,KAACkU,EAAAA,EAAa,CAAC7N,GAAI,CAAE6C,MAAOxF,EAAMsD,QAAQmC,KAAKL,gBAIjD3C,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEgE,KAAM,EAAGH,SAAU,GAAIlC,SAAA,EAChChI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,YACRpD,GAAI,CACFqD,WAAY,IACZjD,SAAU,SACV0D,aAAc,WACdC,WAAY,SACZd,GAAI,KACJtB,SAED9E,EAASvC,QAEZwF,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMlK,QAAS,EAAGE,WAAW,SAAQ4G,SAAA,EACpDhI,EAAAA,EAAAA,KAACmU,GAAAA,EAAY,CAAC9N,GAAI,CAAEgD,SAAU,GAAIH,MAAO,qBACzC/C,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAA,CACjDwL,EAAkB,iCAMzBxT,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CAAC5B,GAAI,CAAE4C,UAAW,QAASb,WAAY,EAAG8B,SAAU,KAAMlC,UAC5D7B,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACjK,QAAS,IAAK8G,SAAA,EACnB7B,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMd,eAAe,gBAAgBpJ,QAAS,EAAE8G,SAAA,EAC/DhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAC,aAGrDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUC,WAAY,IAAI1B,SAC3C1F,GAAeY,EAASkR,WAAY,qBAGzCjO,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMd,eAAe,gBAAgBpJ,QAAS,EAAE8G,SAAA,EAC/DhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAC,iBAGrDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SACjD1F,GAAeY,EAAS4Q,eAAgB,0BAOjD3N,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMlK,QAAS,EAAGmF,GAAI,CAAE+B,WAAY,GAAIJ,SAAA,EACvDhI,EAAAA,EAAAA,KAACqO,EAAAA,EAAM,CACLtC,KAAK,QACLiE,UAAWoD,GAAcpT,EAAAA,EAAAA,KAACmO,GAAAA,EAAgB,CAACpC,KAAM,MAAS/L,EAAAA,EAAAA,KAACqU,GAAW,IACtEvM,QAtGcoI,UACpBlM,EAAEC,kBACFoP,GAAe,GACf,UACQH,EAAUhQ,EAAS6E,GAC3B,CAAC,QACCsL,GAAe,EACjB,GAgGM/E,SAAU8E,GAAeE,EACzBjN,GAAI,CACFiO,cAAe,OACfpL,MAAO,eACPG,SAAU,UACVa,SAAU,OACVqK,GAAI,GACJvM,SACH,aAGDhI,EAAAA,EAAAA,KAACqO,EAAAA,EAAM,CACLtC,KAAK,QACLiE,UAAWsD,GAAatT,EAAAA,EAAAA,KAACmO,GAAAA,EAAgB,CAACpC,KAAM,MAAS/L,EAAAA,EAAAA,KAACwU,EAAAA,EAAU,IACpE1M,QA3GaoI,UACnBlM,EAAEC,kBACFsP,GAAc,GACd,UACQJ,EAAkBjQ,EAAS6E,GACnC,CAAC,QACCwL,GAAc,EAChB,GAqGMjF,SAAU8E,GAAeE,EACzBjN,GAAI,CACFiO,cAAe,OACfpL,MAAO,aACPG,SAAU,UACVa,SAAU,OACVqK,GAAI,GACJvM,SACH,gBAIC,E,gBC/GV,MAAM1F,GAAiB,SACrBC,EACAC,GAEY,IADZC,EAAgBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,MAEnB,IAAKH,EAAM,OAAOE,EAClB,MAAMuQ,EAA0B,kBAATzQ,EAAoB,IAAI0Q,KAAK1Q,GAAQA,EAC5D,KAAKM,EAAAA,GAAAA,GAAQmQ,GAAU,OAAOvQ,EAC9B,IACE,OAAOK,EAAAA,EAAAA,GAAOkQ,EAASxQ,EACzB,CAAE,MAAAO,GACA,OAAON,CACT,CACF,EAEMgS,GAA0DxR,IAWzD,IAADyR,EAAAC,EAAA,IAX2D,SAC/DzR,EAAQ,QACR0R,EAAO,WACPC,GAAa,EAAK,eAClBC,EAAc,QACdhN,EAAO,OACPiN,EAAM,YACNpH,EAAW,OACXiB,EAAM,SACNoG,EAAQ,yBACRxR,GACDP,EACC,MAAMS,GAAQC,EAAAA,EAAAA,MACPC,EAAcC,IAAmBmL,EAAAA,EAAAA,UAA6B,MAC/DiG,EAAW7I,QAAQxI,GAEnBsR,EAAMhS,EAASsB,WAAa,EAC5B2Q,EAAaD,GAAO,EACpBE,EAAUlS,EAASuB,UAAY,EAC/B4Q,EAAcnS,EAASwB,cAAgB,EAOvCP,EAAkBA,KACtBN,EAAgB,KAAK,EA2BvB,OACEsC,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFO,aAAc,EACd4D,QAAgC,SAAvB9G,EAAMsD,QAAQG,MACnBJ,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWG,MAAO,KACtCN,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,IAC5CT,OAAO,aAADO,QAAeL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQC,QAAS,KAClDV,WAAY,WACZgD,QAASqL,EAAU,GAAM,EACzB,UAAW,CACTpK,QAAgC,SAAvB9G,EAAMsD,QAAQG,MACnBJ,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWG,MAAO,KACtCN,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,IAC5CR,aAAaC,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,MAEjDG,SAAA,EAEF7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACFH,QAASA,EACTzB,GAAI,CACFlF,QAAS,OACTC,WAAY,SACZ2I,IAAK,IACLH,EAAG,IACHtD,OAAQ,WACR0B,SAAA,EAGFhI,EAAAA,EAAAA,KAAC+T,GAAAA,EAAM,CACLC,IAAK9Q,EAASuF,qBAAkB7F,EAChC6G,QAAQ,UACRpD,GAAI,CACFkE,MAAO,GACP5D,OAAQ,GACRyB,WAAY,EACZoC,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,IAC3C,QAAS,CACPoM,UAAW,UAEbjM,UAEFhI,EAAAA,EAAAA,KAACkU,EAAAA,EAAa,CAAC7N,GAAI,CAAE6C,MAAOxF,EAAMsD,QAAQY,QAAQC,WAIpD1B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEgE,KAAM,EAAGH,SAAU,GAAIlC,SAAA,EAChChI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,YACRpD,GAAI,CACFqD,WAAY,IACZjD,SAAU,SACV0D,aAAc,WACdC,WAAY,SACZd,GAAI,KACJtB,SAED9E,EAASvC,QAEZwF,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMlK,QAAS,IAAKE,WAAW,SAAQ4G,SAAA,EACtD7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAA,CACjDqN,EAAY,cAEflP,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAA,CACjDoN,EAAQnK,QAAQ,GAAG,WAErB2J,GAAW1R,EAASkR,aACnBjO,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,aAAYlB,SAAA,CAAC,WACtC1F,GAAeY,EAASkR,WAAY,mBAOrDjO,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAE4C,UAAW,QAASb,WAAY,GAAIJ,SAAA,EAC7C7B,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMhK,WAAW,SAASkJ,eAAe,WAAWpJ,QAAS,GAAI8G,SAAA,CAC/EmN,GACCnV,EAAAA,EAAAA,KAAC0K,EAAAA,EAAU,CAACrE,GAAI,CAAEgD,SAAU,GAAIH,MAAO,mBAEvClJ,EAAAA,EAAAA,KAAC4K,EAAAA,EAAY,CAACvE,GAAI,CAAEgD,SAAU,GAAIH,MAAO,iBAE3ClJ,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,YACRpD,GAAI,CACFqD,WAAY,IACZR,MAAOiM,EAAa,eAAiB,cACrCnN,UAEDvE,EAAAA,EAAAA,IAAeyR,SAGpBlV,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SACjD1F,GAAeY,EAASqI,WAAY,qBAKvCqJ,IACAzO,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMhK,WAAW,SAASF,QAAS,GAAKmF,GAAI,CAAE+B,WAAY,GAAIJ,SAAA,CAC5E8M,IACC9U,EAAAA,EAAAA,KAAC8L,EAAAA,EAAU,CACTC,KAAK,QACLjE,QAAU9D,IACRA,EAAEC,kBACF6Q,GAAgB,EAElBzO,GAAI,CAAE6C,MAAO,kBAAmBlB,SAE/B6M,GAAa7U,EAAAA,EAAAA,KAACsV,GAAAA,EAAU,CAACjM,SAAS,WAAarJ,EAAAA,EAAAA,KAACuV,GAAAA,EAAU,CAAClM,SAAS,YAGxE7F,IACCxD,EAAAA,EAAAA,KAAC0L,GAAAA,EAAW,CACVC,KAAK,WACLC,KAAM1I,EACN2I,qBAAsBrI,EACtBuI,KAAK,WAGT/L,EAAAA,EAAAA,KAAC8L,EAAAA,EAAU,CACTC,KAAK,QACLjE,QA3Ja9D,IACvBA,EAAEC,kBACFJ,EAAgBG,EAAEE,cAAc,EA0JtBmC,GAAI,CAAE6C,MAAO,kBAAmBlB,UAEhChI,EAAAA,EAAAA,KAACgM,GAAAA,EAAY,CAAC3C,SAAS,aAEzBlD,EAAAA,EAAAA,MAAC8F,EAAAA,EAAI,CACHC,SAAUtI,EACVuI,KAAM8I,EACN5I,QAASA,IAAMlI,IACf2D,QAAU9D,GAAMA,EAAEC,kBAClBqI,gBAAiB,CAAEC,WAAY,QAASC,SAAU,OAClDC,aAAc,CAAEF,WAAY,QAASC,SAAU,UAAWxE,SAAA,EAE1D7B,EAAAA,EAAAA,MAACuG,EAAAA,EAAQ,CAAC5E,QA/JF9D,IAClBA,EAAEC,kBACFE,IACM,OAAN4Q,QAAM,IAANA,GAAAA,GAAU,EA4J8B/M,SAAA,EAC5BhI,EAAAA,EAAAA,KAAC2M,EAAAA,EAAY,CAAA3E,UACXhI,EAAAA,EAAAA,KAACsL,EAAAA,EAAQ,CAACjC,SAAS,aAErBrJ,EAAAA,EAAAA,KAAC4M,GAAAA,EAAY,CAAA5E,SAAC,aAEhB7B,EAAAA,EAAAA,MAACuG,EAAAA,EAAQ,CAAC5E,QA/JG9D,IACvBA,EAAEC,kBACFE,IACW,OAAXwJ,QAAW,IAAXA,GAAAA,GAAe,EA4J8B3F,SAAA,EACjChI,EAAAA,EAAAA,KAAC2M,EAAAA,EAAY,CAAA3E,UACXhI,EAAAA,EAAAA,KAACwV,GAAAA,EAAa,CAACnM,SAAS,aAE1BrJ,EAAAA,EAAAA,KAAC4M,GAAAA,EAAY,CAAA5E,SAAC,kBAEhB7B,EAAAA,EAAAA,MAACuG,EAAAA,EAAQ,CAAC5E,QA/JF9D,IAClBA,EAAEC,kBACFE,IACM,OAANyK,QAAM,IAANA,GAAAA,GAAU,EA4J8B5G,SAAA,EAC5BhI,EAAAA,EAAAA,KAAC2M,EAAAA,EAAY,CAAA3E,UACXhI,EAAAA,EAAAA,KAAC8M,GAAAA,EAAQ,CAACzD,SAAS,aAErBrJ,EAAAA,EAAAA,KAAC4M,GAAAA,EAAY,CAAA5E,SAAC,sBAEhB7B,EAAAA,EAAAA,MAACuG,EAAAA,EAAQ,CAAC5E,QA/JA9D,IACpBA,EAAEC,kBACFE,IACQ,OAAR6Q,QAAQ,IAARA,GAAAA,GAAY,EA4J+B3O,GAAI,CAAE6C,MAAO,cAAelB,SAAA,EAC3DhI,EAAAA,EAAAA,KAAC2M,EAAAA,EAAY,CAAA3E,UACXhI,EAAAA,EAAAA,KAACwU,EAAAA,EAAU,CAACnL,SAAS,QAAQhD,GAAI,CAAE6C,MAAO,mBAE5ClJ,EAAAA,EAAAA,KAAC4M,GAAAA,EAAY,CAAA5E,SAAC,uBAQvB6M,IAAeD,IACdzO,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEkO,GAAI,IAAKkB,GAAI,KAAMzN,SAAA,EAC5BhI,EAAAA,EAAAA,KAACmN,GAAAA,EAAO,CAAC9G,GAAI,CAAEiD,GAAI,IAAKC,QAAS,OACjCpD,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACjK,QAAS,IAAI8G,SAAA,EAElB7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACPlF,QAAS,OACTkM,oBAAqB,iBACrBtD,IAAK,KACL/B,SAAA,EACA7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACPuD,EAAG,IACHhD,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,KACjDU,SAAA,EACAhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAiBwM,cAAY,EAAA1N,SAAC,qBAGlEhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,YAAYpD,GAAI,CAAEqD,WAAY,KAAM1B,UACrDvE,EAAAA,EAAAA,IAAeP,EAASuC,iBAAmB,MAE9CU,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAA,CAAC,aACzCvE,EAAAA,EAAAA,KAAgBP,EAASuC,iBAAmB,GAAKyP,UAI/D/O,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACPuD,EAAG,IACHhD,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,KACjDU,SAAA,EACAhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAiBwM,cAAY,EAAA1N,SAAC,cAGlE7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,YAAYpD,GAAI,CAAEqD,WAAY,KAAM1B,SAAA,CACrDoN,EAAQnK,QAAQ,GAAG,QAEtB9E,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAA,CACjD9E,EAASoC,WAAa,EAAE,OAAKpC,EAASqC,YAAc,EAAE,cAM7DY,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACPlF,QAAS,OACTkM,oBAAqB,iBACrBtD,IAAK,KACL/B,SAAA,EACA7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACPuD,EAAG,IACHhD,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,KACjDU,SAAA,EACAhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAiBwM,cAAY,EAAA1N,SAAC,mBAGlEhI,EAAAA,EAAAA,KAAC2V,GAAAA,EAAO,CACNC,OACEzP,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEuD,EAAG,EAAGiE,SAAU,KAAM7F,SAAA,EAC/BhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUiM,cAAY,EAAA1N,SAAC,oHAG3ChI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUpD,GAAI,CAAE0E,GAAI,EAAG5J,QAAS,SAAU6G,SAAC,iCAG/DhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUpD,GAAI,CAAElF,QAAS,SAAU6G,SAAC,iCAGxDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUpD,GAAI,CAAElF,QAAS,SAAU6G,SAAC,8BAGxDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUpD,GAAI,CAAElF,QAAS,SAAU6G,SAAC,kCAGxDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUpD,GAAI,CAAElF,QAAS,SAAU6G,SAAC,sCAK5D6N,OAAK,EACLC,UAAU,MAAK9N,UAEf7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,YAAYpD,GAAI,CAAEqD,WAAY,IAAKpD,OAAQ,OAAQnF,QAAS,OAAQC,WAAY,SAAU2I,IAAK,IAAM/B,SAAA,EACvHhI,EAAAA,EAAAA,KAAC+V,GAAAA,EAAY,CAAC1P,GAAI,CAAEgD,SAAU,eAC5BnG,EAAS6B,eAAiB,GAAGkG,QAAQ,SAG3C9E,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAA,CAAC,aACzCvE,EAAAA,EAAAA,IAAeP,EAAS2B,SAAW,UAIjDsB,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACPuD,EAAG,IACHhD,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,KACjDU,SAAA,EACAhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAiBwM,cAAY,EAAA1N,SAAC,kBAGlEhI,EAAAA,EAAAA,KAAC2V,GAAAA,EAAO,CACNC,OACEzP,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEuD,EAAG,EAAGiE,SAAU,KAAM7F,SAAA,EAC/BhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUiM,cAAY,EAAA1N,SAAC,6FAGzC9E,EAAS8B,cAAgB,GAAK,IAC9BmB,EAAAA,EAAAA,MAAAiI,EAAAA,SAAA,CAAApG,SAAA,EACE7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,UAAUpD,GAAI,CAAE0E,GAAI,EAAG5J,QAAS,SAAU6G,SAAA,CAAC,qBAC1C9E,EAAS+B,0BAA4B,GAAGgG,QAAQ,GAAG,QAExE9E,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,UAAUpD,GAAI,CAAE0E,GAAI,EAAG5J,QAAS,SAAU6G,SAAA,CAAC,aAClD9E,EAASgC,mBAAqB,EAAE,WAE5ChC,EAASiC,qBAAuBjC,EAASkC,oBACxCe,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,UAAUpD,GAAI,CAAE0E,GAAI,EAAG5J,QAAS,SAAU6G,SAAA,CAAC,WACpD1F,GAAeY,EAASiC,oBAAqB,SAAS,MAAI7C,GAAeY,EAASkC,kBAAmB,kBAO1HyQ,OAAK,EACLC,UAAU,MAAK9N,UAEf7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,YAAYpD,GAAI,CAAEqD,WAAY,IAAKpD,OAAQ,OAAQnF,QAAS,OAAQC,WAAY,SAAU2I,IAAK,IAAM/B,SAAA,EACvHhI,EAAAA,EAAAA,KAAC+V,GAAAA,EAAY,CAAC1P,GAAI,CAAEgD,SAAU,eAC5BnG,EAAS8B,cAAgB,GAAGiG,QAAQ,GAAG,UAG7C9E,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAA,CAAC,cACxCvE,EAAAA,EAAAA,IAAeP,EAAS4B,UAAY,aAMnD5B,EAAS8S,eAAiB9S,EAAS+S,kBACnC9P,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACPuD,EAAG,IACHhD,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,KACjDU,SAAA,EACAhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAiBwM,cAAY,EAAA1N,SAAC,qBAGlE7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACPlF,QAAS,OACTkM,oBAAqBnK,EAAS8S,eAAiB9S,EAAS+S,eACpD,iBACA,MACJlM,IAAK,KACL/B,SAAA,CACC9E,EAAS8S,gBACR7P,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAC,YAGrD7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,YAAYpD,GAAI,CAAEqD,WAAY,KAAM1B,SAAA,CACrDkK,KAAKgE,IAA4B,QAAzBxB,EAACxR,EAAS+C,uBAAe,IAAAyO,EAAAA,EAAI,EAAG,KAAKzJ,QAAQ,GAAG,UAI9D/H,EAAS+S,iBACR9P,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAC,aAGrD7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,YAAYpD,GAAI,CAAEqD,WAAY,KAAM1B,SAAA,CACrDkK,KAAKgE,IAA6B,QAA1BvB,EAACzR,EAASgD,wBAAgB,IAAAyO,EAAAA,EAAI,EAAG,KAAK1J,QAAQ,GAAG,iBAStE9E,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACPuD,EAAG,IACHhD,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQE,WAAWI,QAAS,KACjDU,SAAA,EACAhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAiBwM,cAAY,EAAA1N,SAAC,qBAGlE7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACPlF,QAAS,OACTkM,oBAAqB,iBACrBtD,IAAK,KACL/B,SAAA,EACA7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAC,YAGrD7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CACTC,QAAQ,YACRpD,GAAI,CACFqD,WAAY,IACZR,MAAOiN,WAAWC,OAAOlT,EAAS4C,uBAAyB,IAAM,EAC7D,eACAqQ,WAAWC,OAAOlT,EAAS4C,uBAAyB,IAAM,EACxD,aACA,gBACNkC,SAAA,CAEDmO,WAAWC,OAAOlT,EAAS4C,uBAAyB,IAAM,EAAI,IAAM,GAAIqQ,WAAWC,OAAOlT,EAAS4C,uBAAyB,IAAImF,QAAQ,GAAG,WAGhJ9E,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAC,aAGrD7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CACTC,QAAQ,YACRpD,GAAI,CACFqD,WAAY,IACZR,MAAOiN,WAAWC,OAAOlT,EAAS6C,wBAA0B,IAAM,EAC9D,eACAoQ,WAAWC,OAAOlT,EAAS6C,wBAA0B,IAAM,EACzD,aACA,gBACNiC,SAAA,CAEDmO,WAAWC,OAAOlT,EAAS6C,wBAA0B,IAAM,EAAI,IAAM,GAAIoQ,WAAWC,OAAOlT,EAAS6C,wBAA0B,IAAIkF,QAAQ,GAAG,WAGlJ9E,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAC,YAGrD7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CACTC,QAAQ,YACRpD,GAAI,CACFqD,WAAY,IACZR,MAAOiN,WAAWC,OAAOlT,EAAS8C,uBAAyB,IAAM,EAC7D,eACAmQ,WAAWC,OAAOlT,EAAS8C,uBAAyB,IAAM,EACxD,aACA,gBACNgC,SAAA,CAEDmO,WAAWC,OAAOlT,EAAS8C,uBAAyB,IAAM,EAAI,IAAM,GAAImQ,WAAWC,OAAOlT,EAAS8C,uBAAyB,IAAIiF,QAAQ,GAAG,wBAQtJ,EAqOV,GAjO8DoL,IAYvD,IAZwD,KAC7DlK,EAAI,QACJE,EAAO,QACPuI,GAAU,EAAK,gBACfzR,EAAe,eACfC,EAAc,oBACdC,EAAmB,eACnBC,EAAc,iBACdC,EAAgB,yBAChBC,EAAwB,kBACxB8S,EAAiB,0BACjBC,GACDF,EACC,MAAM3S,GAAQC,EAAAA,EAAAA,MACR,KAAE6S,IAASC,EAAAA,GAAAA,MACVC,EAAqBC,IAA0B3H,EAAAA,EAAAA,UAAsB,IAAI4H,MAI9ElI,UAAWmI,EACXlI,UAAWmI,EACXC,QAASC,IACPC,EAAAA,EAAAA,GAAa9K,IAASyI,EAAc,OAAJ4B,QAAI,IAAJA,OAAI,EAAJA,EAAMU,SAAMtU,IAG9CuU,eAAgBC,EAChBzI,UAAW0I,EACXN,QAASO,IACPC,EAAAA,EAAAA,GAAkBpL,GAAQyI,EAAc,OAAJ4B,QAAI,IAAJA,OAAI,EAAJA,EAAMU,SAAMtU,IAGpD8M,EAAAA,EAAAA,YAAU,KACJvD,IACEyI,EACF0C,IAEAN,IAEJ,GACC,CAAC7K,EAAMyI,EAASoC,EAAkBM,IAGrC,MAAM5I,EAAYkG,EAAUwC,EAAyBP,GAAoB,GACnElI,EAAYiG,EAAUyC,EAAeP,EACrClB,EAAQhB,EAAU,QAAU,gBAwBlC,OACEzO,EAAAA,EAAAA,MAACyH,EAAAA,GAAM5L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACLmK,KAAMA,EACNE,QAASA,EACTwB,SAAS,KACTC,WAAS,GACLC,GAAAA,GAAW,IAAA/F,SAAA,EAEf7B,EAAAA,EAAAA,MAAC6H,EAAAA,EAAW,CACV3H,GAAI,CACFlF,QAAS,OACTC,WAAY,SACZkJ,eAAgB,gBAChBmL,GAAI,GACJzN,SAAA,EAEF7B,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMhK,WAAW,SAASF,QAAS,EAAE8G,SAAA,CACnD4M,GACC5U,EAAAA,EAAAA,KAAC+M,EAAS,CAAC1G,GAAI,CAAE6C,MAAO,qBAExBlJ,EAAAA,EAAAA,KAACkU,EAAAA,EAAa,CAAC7N,GAAI,CAAE6C,MAAO,mBAE9BlJ,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,KAAKpD,GAAI,CAAEqD,WAAY,KAAM1B,SAC9C4N,KAEHzP,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAgBlB,SAAA,CAAC,IAC/C0G,EAAU/L,OAAO,WAGvB3C,EAAAA,EAAAA,KAAC8L,EAAAA,EAAU,CAAChE,QAASuE,EAASN,KAAK,QAAO/D,UACxChI,EAAAA,EAAAA,KAACwX,GAAAA,EAAS,CAACnO,SAAS,gBAIxBrJ,EAAAA,EAAAA,KAACiO,EAAAA,EAAa,CAAC5H,GAAI,CAAEuD,EAAG,EAAG6N,UAAW,UAAWzP,SAC9C2G,GACC3O,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFlF,QAAS,OACTmJ,eAAgB,SAChBlJ,WAAY,SACZ8M,GAAI,GACJlG,UAEFhI,EAAAA,EAAAA,KAACmO,GAAAA,EAAgB,CAACpC,KAAM,OAEH,IAArB2C,EAAU/L,QACZ3C,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACF4C,UAAW,SACXiF,GAAI,EACJ/M,QAAS,OACTuF,cAAe,SACftF,WAAY,UACZ4G,SAED4M,GACCzO,EAAAA,EAAAA,MAAAiI,EAAAA,SAAA,CAAApG,SAAA,EACEhI,EAAAA,EAAAA,KAAC+M,EAAS,CAAC1G,GAAI,CAAEgD,SAAU,GAAIH,MAAO,iBAAkBI,GAAI,MAC5DtJ,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,YAAYpD,GAAI,CAAEqD,WAAY,IAAKJ,GAAI,GAAItB,SAAC,oBAGhEhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAiB7C,GAAI,CAAEwH,SAAU,KAAM7F,SAAC,wFAK5E7B,EAAAA,EAAAA,MAAAiI,EAAAA,SAAA,CAAApG,SAAA,EACEhI,EAAAA,EAAAA,KAACkU,EAAAA,EAAa,CAAC7N,GAAI,CAAEgD,SAAU,GAAIH,MAAO,iBAAkBI,GAAI,MAChEtJ,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,YAAYpD,GAAI,CAAEqD,WAAY,IAAKJ,GAAI,GAAItB,SAAC,sBAGhEhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAiB7C,GAAI,CAAEwH,SAAU,KAAM7F,SAAC,0EAM9E4M,GACFzO,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CACJjK,QAAS,IACTmF,IAAErE,EAAAA,EAAAA,GAAA,CACA0V,UAAW,OACXC,UAAW,OACXF,UAAW,WACRG,EAAAA,GAAAA,GAAgBlU,IACnBsE,SAAA,EAGF7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFlF,QAAS,OACTC,WAAY,SACZ2I,IAAK,IACLH,EAAG,IACHhD,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ6Q,QAAQhQ,KAAM,KAC3ChB,OAAO,aAADO,QAAeL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ6Q,QAAQhQ,KAAM,MACvDG,SAAA,EAEFhI,EAAAA,EAAAA,KAACmU,GAAAA,EAAY,CAAC9N,GAAI,CAAE6C,MAAO,eAAgBG,SAAU,OACrDlD,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQC,WAAY,IAAKR,MAAM,eAAclB,SAAC,qDAGlEhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAC,iEAOxD0G,EAAUpB,KAAKpK,IACdlD,EAAAA,EAAAA,KAAC8X,GAAiB,CAEhB5U,SAAUA,EACVgQ,UAAWoD,GAAiB,WAAmB,GAC/CnD,kBAAmBoD,GAAyB,WAAmB,IAH1DrT,EAAS6E,UAQpB/H,EAAAA,EAAAA,KAACmL,EAAAA,EAAK,CACJjK,QAAS,EACTmF,IAAErE,EAAAA,EAAAA,GAAA,CACA0V,UAAW,OACXC,UAAW,OACXF,UAAW,SACX7N,EAAE,IACCgO,EAAAA,GAAAA,GAAgBlU,IACnBsE,SAED0G,EAAUpB,KAAKpK,IACdlD,EAAAA,EAAAA,KAACyU,GAAmB,CAElBvR,SAAUA,EACV0R,QAASA,EACTC,WAAY6B,EAAoBqB,IAAI7U,EAAS6E,IAC7C+M,eAAgBA,KAAMkD,OA3JRC,EA2J2B/U,EAAS6E,QA1J9D4O,GAAuBuB,IACrB,MAAMC,EAAS,IAAIvB,IAAIsB,GAMvB,OALIC,EAAOJ,IAAIE,GACbE,EAAOC,OAAOH,GAEdE,EAAOE,IAAIJ,GAENE,CAAM,IARWF,KA2JwC,EACtDnQ,QAASA,KAAMwQ,OAjKAL,EAiKoB/U,EAAS6E,GAhKxD5E,EAAgB8U,QAChB5L,IAF2B4L,KAiKiC,EAChDlD,OAAQA,IAAoB,OAAd3R,QAAc,IAAdA,OAAc,EAAdA,EAAiBF,GAC/ByK,YAAaA,KAEQ,OAAnBtK,QAAmB,IAAnBA,GAAAA,EAAsBH,EAAS,EAEjC0L,OAAQA,IAAoB,OAAdtL,QAAc,IAAdA,OAAc,EAAdA,EAAiBJ,GAC/B8R,SAAUA,IAvJG9R,KACzBmJ,IACgB,OAAhB9I,QAAgB,IAAhBA,GAAAA,EAAmBL,EAAS6E,GAAG,EAqJHwQ,CAAkBrV,GAClCM,yBAA0BA,GAbrBN,EAAS6E,aAmBjB,E,gEChtBb,MAy+CA,GAz+CkC9E,IAO3B,IAADuV,EAAA,IAP6B,UACjC9J,EAAS,UACTC,GAAY,EAAK,iBACjB8J,EAAgB,oBAChBpV,EAAmB,iBACnBE,EAAgB,iBAChBmV,GACDzV,EACC,MAAMS,GAAQC,EAAAA,EAAAA,KACRgV,GAAWC,EAAAA,EAAAA,OACX,KAAEpC,IAASqC,EAAAA,GAAAA,OAGX,eAAEC,EAAgBnK,UAAWoK,GC5C9B,WAEJ,IADDC,EAAyCtW,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAE7C,MAAM,QACJuW,EAAU,CAAC,OAAQ,UAAS,gBAC5BC,EAAkB,IAAM,kBACxBC,GAAoB,GAClBH,GAEE,KAAEI,EAAI,MAAEzO,EAAK,UAAEgE,EAAS,OAAE0K,IAAWC,EAAAA,EAAAA,IAEzC,CAAC,yBAA0BL,EAAQM,KAAK,OAExCrJ,UACE,IACE,MAAMsJ,EAAM,IAAIvG,KACVwG,GAAQ3W,EAAAA,EAAAA,GAAO0W,EAAK,cAoB1B,aAlBqBE,EAAAA,EAAwBC,YAC3C,CACEC,MAAOH,EACPI,IAAKJ,GAEP,CACER,UACAa,cAAc,EACdC,MAAO,MAMiBC,MAAK,CAACC,EAAGC,IACnC,IAAIjH,KAAKgH,EAAEE,UAAU3H,UAAY,IAAIS,KAAKiH,EAAEC,UAAU3H,WAI1D,CAAE,MAAO7B,GAEP,MADAyJ,EAAO,OAAAzP,MAAM,2CAA4CgG,GACnDA,CACR,IAEF,CAEEwI,oBAEAkB,iBAAkB,IAElBnB,kBAEAoB,oBAAoB,EAEpBC,kBAAkB,IAItB,MAAO,CACLzB,eAAoB,OAAJM,QAAI,IAAJA,EAAAA,OAAQxW,EACxB+L,YACAhE,QAIAoM,QAASsC,EAEb,CDrBuDmB,CAA0B,CAC7EvB,QAAS,CAAC,OAAQ,UAClBC,gBAAiB,OAEXuB,aAAcC,EAAe/L,UAAWgM,GZzC3C,SACLC,EACAlM,GAEC,IADDsK,EAA+BtW,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAEnC,MAAM,MACJqX,EAAQ,EAAC,gBACTb,EAAkB,EAAC,kBACnBC,GAAoB,GAClBH,GAEE,KAAEI,EAAI,MAAEzO,EAAK,UAAEgE,EAAS,OAAE0K,IAAWC,EAAAA,EAAAA,IAEzCsB,GAAUlM,EAAY,CAAC,eAAgBkM,EAAQb,GAAS,MAExD7J,UACE,IAAK0K,IAAWlM,EAAW,OAAO,KAElC,IAiBE,aAfwBxO,EAAgB2a,aAAaD,EAAQ,CAC3Db,QACAe,QAAS,aACTC,WAAW,KAIsDzN,KAAI0N,IACrE,MAAM9X,EAAWwL,EAAUe,MAAKwL,GAAOA,EAAIlT,KAAOiT,EAAME,cACxD,OAAAlZ,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACKgZ,GAAK,IACRG,cAAsB,OAARjY,QAAQ,IAARA,OAAQ,EAARA,EAAUvC,OAAQ,oBAAkB,GAKxD,CAAE,MAAOgQ,GAEP,MADAyJ,EAAO,OAAAzP,MAAM,gCAAiCgG,GACxCA,CACR,IAEF,CAEEwI,oBAEAkB,iBAAkB,IAElBnB,kBAEAoB,oBAAoB,EAEpBC,kBAAkB,IAItB,MAAO,CACLE,aAAkB,OAAJrB,QAAI,IAAJA,EAAAA,OAAQxW,EACtB+L,YACAhE,QAIAoM,QAASsC,EAEb,CYvBoE+B,CAAoB,OAAJ5E,QAAI,IAAJA,OAAI,EAAJA,EAAMU,IAAKxI,EAAW,CACtGqL,MAAO,KAGFsB,EAAgBC,IAAqBtM,EAAAA,EAAAA,WAAS,IAG7C+H,QAASC,IAAqBC,EAAAA,EAAAA,GAAiB,OAAJT,QAAI,IAAJA,OAAI,EAAJA,EAAMU,MAGvDC,eAAgBC,EAChBzI,UAAW0I,EACXN,QAASwE,KACPhE,EAAAA,EAAAA,GAAkB8D,EAAqB,OAAJ7E,QAAI,IAAJA,OAAI,EAAJA,EAAMU,SAAMtU,IAE5C4Y,GAAsBC,KAA2BzM,EAAAA,EAAAA,WAAS,IAC1D0M,GAA4BC,KAAiC3M,EAAAA,EAAAA,WAAS,IACtE4M,GAAoBC,KAAyB7M,EAAAA,EAAAA,WAAS,IACtD8M,GAAiBC,KAAsB/M,EAAAA,EAAAA,WAAS,IAGhDgN,GAAiBC,KAAsBjN,EAAAA,EAAAA,WAAS,IAChDkN,GAAUC,KAAenN,EAAAA,EAAAA,UAA8B,OACvDoN,GAAyBC,KAA8BrN,EAAAA,EAAAA,UAAiB,KACxEyL,GAAc6B,KAAmBtN,EAAAA,EAAAA,UAA+C,KAEhFuN,GAAcC,KAAmBxN,EAAAA,EAAAA,WAAS,IAG1CyN,GAAmBC,KAAwB1N,EAAAA,EAAAA,WAAS,IAGpD2N,GAAkBC,KAAuB5N,EAAAA,EAAAA,UAAS,IAGlD6N,GAA0BC,KAA+B9N,EAAAA,EAAAA,WAAS,IAGlE+N,GAAaC,KAAkBhO,EAAAA,EAAAA,UAAiB,KAGhDiO,GAAoBC,KAAyBlO,EAAAA,EAAAA,WAAS,IACtDmO,GAAkBC,KAAuBpO,EAAAA,EAAAA,WAAS,IAClDqO,GAA8BC,KAAmCtO,EAAAA,EAAAA,WAAS,IAC1EuO,GAAkBC,KAAuBxO,EAAAA,EAAAA,WAAS,IAClDyO,GAAkBC,KAAuB1O,EAAAA,EAAAA,UAAwB,OACjE2O,GAAgBC,KAAqB5O,EAAAA,EAAAA,UAA0B,OAC/D6O,GAAqBC,KAA0B9O,EAAAA,EAAAA,UAA0B,OACzE+O,GAAgBC,KAAqBhP,EAAAA,EAAAA,UAA0B,OAC/DiP,GAAWC,KAAgBlP,EAAAA,EAAAA,WAAS,IACpCtB,GAAeyQ,KAAoBnP,EAAAA,EAAAA,WAAS,IAC5CoP,GAAWC,KAAgBrP,EAAAA,EAAAA,WAAS,GAGrCsP,IAAgBC,EAAAA,EAAAA,GAAc7a,EAAM8a,YAAYC,GAAG,QAEzD/O,EAAAA,EAAAA,YAAU,KACR4M,GAAgB5B,EAAc,GAC7B,CAACA,IAIJ,MAAMgE,IAAkBna,EAAAA,EAAAA,UAAQ,KAC9B,MAAMwV,EAAQuE,GAAgB,EAAI,EAClC,MAAO,IAAI5P,GACRW,QAAOC,IAAMA,EAAE8E,aACf4F,MAAK,CAACC,EAAGC,IAAM,IAAIjH,KAAKiH,EAAE3O,YAAYiH,UAAY,IAAIS,KAAKgH,EAAE1O,YAAYiH,YACzEmM,MAAM,EAAG5E,EAAM,GACjB,CAACrL,EAAW4P,KAGTnH,IAAiB5S,EAAAA,EAAAA,UAAQ,KAC7B,MAAMwV,EAAQuE,GAAgB,EAAI,EAClC,MAAO,IAAIlH,GACR4C,MAAK,CAACC,EAAGC,IAAM,IAAIjH,KAAKiH,EAAE9F,YAAa5B,UAAY,IAAIS,KAAKgH,EAAE7F,YAAa5B,YAC3EmM,MAAM,EAAG5E,EAAM,GACjB,CAAC3C,EAAuBkH,KAGrBM,GAAsB1b,IAC1B0a,GAAkB1a,GAClBka,IAAoB,EAAK,EAGrByB,GAA2B3b,IAC/B4a,GAAuB5a,GACvBoa,IAAgC,EAAK,EAGjCwB,GAAsB5b,IAC1B8a,GAAkB9a,GAClBsa,IAAoB,EAAK,EAGrBuB,GAAwB9G,IAC5ByF,GAAoBzF,GACpBiF,IAAsB,EAAK,EAIvB8B,GAAwB9O,UAC5B,UACQ+O,GAAgBC,gBAAgBjH,GACtCsD,IACF,CAAE,MAAO5Q,GACPyP,EAAO,OAAAzP,MAAM,4BAA6BA,EAC5C,GAGIwU,GAAgCjP,UACpC,UACQ+O,GAAgBG,0BAA0BnH,GAChDsD,IACF,CAAE,MAAO5Q,GACPyP,EAAO,OAAAzP,MAAM,uCAAwCA,EACvD,GAII0U,GAA+BnP,MACnC+H,EACAqH,KAEA,MAAMC,EAAiB7Q,EAAUe,MAAKH,GAAKA,EAAEvH,KAAOkQ,IACpD,IAAKsH,EAEH,YADApP,QAAQxF,MAAM,oBAADvD,OAAqB6Q,EAAU,eAI9C,MAAMuH,EAAkBF,EAAeC,GAEvC,OADA7G,EAAiBT,EAAYuH,GACtBA,CAAe,EA2FlBC,IAAiBlb,EAAAA,EAAAA,UAAQ,KAC7B,MAAMmb,EAAiBhR,EAAU/L,OAC3Bgd,EAAkBjR,EAAUW,QAAOC,IAAC,IAAAsQ,EAAA,OAAmB,QAAfA,EAACtQ,EAAE5K,oBAAY,IAAAkb,EAAAA,EAAI,GAAK,CAAC,IAAEjd,OACnE0S,EAAc3G,EAAUmR,QAAO,CAACC,EAAK7E,KAAG,IAAA8E,EAAA,OAAKD,GAAuB,QAApBC,EAAI9E,EAAIvW,oBAAY,IAAAqb,EAAAA,EAAI,EAAE,GAAE,GAC5EC,EAAYtR,EAAUmR,QAAO,CAACC,EAAK7E,KAAG,IAAAgF,EAAA,OAAKH,GAAoB,QAAjBG,EAAIhF,EAAI3V,iBAAS,IAAA2a,EAAAA,EAAI,EAAE,GAAE,GACvEC,EAAcxR,EAAUmR,QAAO,CAACC,EAAK7E,KAAG,IAAAkF,EAAA,OAAKL,GAAqB,QAAlBK,EAAIlF,EAAI1V,kBAAU,IAAA4a,EAAAA,EAAI,EAAE,GAAE,GAC1EC,EAAW1R,EAAUmR,QAAO,CAACC,EAAK7E,KAAG,IAAAoF,EAAA,OAAKP,GAAoB,QAAjBO,EAAIpF,EAAIzW,iBAAS,IAAA6b,EAAAA,EAAI,EAAE,GAAE,GAO5E,MAAO,CACLX,iBACAC,kBACAtK,cACA2K,YACAE,cACA9K,QAVe4K,EAAYE,EAAe,GACtCF,GAAaA,EAAYE,GAAgB,KAAKjV,QAAQ,GACxD,MASFmV,WACD,GACA,CAAC1R,IAEE4R,IAAwB/b,EAAAA,EAAAA,UAAQ,IAC/BmK,EAAU/L,QAAWyZ,IACnB1N,EAAUe,MAAKH,GAAKA,EAAEvH,KAAOqU,MADsB,MAEzD,CAAC1N,EAAW0N,KAITmE,IAAmDhc,EAAAA,EAAAA,UAAQ,IAC1D+b,GAGE,CACL7a,gBAAiB6a,GAAsB7a,gBACvC+a,eAAgBF,GAAsBE,eACtCC,qBAAsBH,GAAsBG,qBAC5CC,0BAA2BJ,GAAsBI,0BACjDC,4BAA6BL,GAAsBK,6BAP5C,CAAElb,gBAAiB,IAS3B,CAAC6a,KAEEM,IAA0C,OAArBN,SAAqB,IAArBA,QAAqB,EAArBA,GAAuBO,OAAQ,GACpDC,IAAuD,OAArBR,SAAqB,IAArBA,QAAqB,EAArBA,GAAuBS,sBAAuB,GAChFC,GAAqE,QAAzCxI,EAAwB,OAArB8H,SAAqB,IAArBA,QAAqB,EAArBA,GAAuB7a,uBAAe,IAAA+S,EAAAA,EAAI,EAkBzEF,GAAuBL,IAC3BU,EAAS,aAADvR,OAAc6Q,GAAa,EAkGrC,OACE9R,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACF4a,UAAW,QACXzW,QAAS,wBACThE,SAAU,WACVC,SAAU,UACVuB,SAAA,EAEFhI,EAAAA,EAAAA,KAACkhB,GAAAA,EAAkB,KAEnB/a,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFmH,GAAI,CAAEtF,GAAI,EAAGC,GAAI,EAAGgZ,GAAI,GACxB1L,GAAI,CAAEvN,GAAI,EAAGC,GAAI,EAAGgZ,GAAI,GACxB5M,GAAI,CAAErM,GAAI,EAAGC,GAAI,EAAGgZ,GAAI,GACxBtT,SAAU,SACVuT,GAAI,OACJ5a,SAAU,WACVwC,OAAQ,GACRhB,SAAA,EAGF7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEiD,GAAI,CAAEpB,GAAI,EAAGC,GAAI,IAAMH,SAAA,EAChChI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,KACRpD,GAAI,CACFqD,WAAY,IACZJ,GAAI,EACJD,SAAU,CAAEnB,GAAI,UAAWC,GAAI,OAAQgZ,GAAI,aAC3CnZ,SACH,eAGDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,QACRP,MAAM,iBACN7C,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,WAAYC,GAAI,SAAWH,SAClD,+CAMH7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFlF,QAAS,OACTkM,oBAAqB,CAAEnF,GAAI,MAAOC,GAAI,iBAAkBkZ,GAAI,kBAC5DtX,IAAK,CAAE7B,GAAI,EAAGC,GAAI,IAAKgZ,GAAI,GAC3B7X,GAAI,CAAEpB,GAAI,EAAGC,GAAI,IACjBH,SAAA,EAGFhI,EAAAA,EAAAA,KAACoG,EAAAA,EAAI,CAACC,GAAI,CAAEO,aAAc,EAAG4D,QAAS,oBAAqBxC,UACzDhI,EAAAA,EAAAA,KAAC2J,EAAAA,EAAW,CAACtD,GAAI,CAAEuD,EAAG,CAAE1B,GAAI,EAAGC,GAAI,IAAKgZ,GAAI,IAAMnZ,UAChD7B,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMd,eAAe,gBAAgBlJ,WAAW,aAAY4G,SAAA,EAC3E7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,QACRP,MAAM,iBACNwM,cAAY,EACZrP,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,UAAWC,GAAI,aAAeH,SACrD,qBAGDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,KACRpD,GAAI,CACFqD,WAAY,IACZJ,GAAI,GACJD,SAAU,CAAEnB,GAAI,SAAUC,GAAI,UAAWgZ,GAAI,aAC7CnZ,SAEDyX,GAAeC,kBAElBvZ,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CACTC,QAAQ,UACRP,MAAM,iBACN7C,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,YAAaC,GAAI,YAAcH,SAAA,CAEpDyX,GAAeE,gBAAgB,iBAGpC3f,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFuD,EAAG,CAAE1B,GAAI,EAAGC,GAAI,KAAMgZ,GAAI,KAC1Bva,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,KAC3CG,UAEFhI,EAAAA,EAAAA,KAACkU,EAAAA,EAAa,CAAC7N,GAAI,CACjB6C,MAAOxF,EAAMsD,QAAQY,QAAQC,KAC7BwB,SAAU,CAAEnB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,iBAQ1CnhB,EAAAA,EAAAA,KAACoG,EAAAA,EAAI,CAACC,GAAI,CAAEO,aAAc,EAAG4D,QAAS,oBAAqBxC,UACzDhI,EAAAA,EAAAA,KAAC2J,EAAAA,EAAW,CAACtD,GAAI,CAAEuD,EAAG,CAAE1B,GAAI,EAAGC,GAAI,IAAKgZ,GAAI,IAAMnZ,UAChD7B,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMd,eAAe,gBAAgBlJ,WAAW,aAAY4G,SAAA,EAC3E7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,QACRP,MAAM,iBACNwM,cAAY,EACZrP,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,UAAWC,GAAI,aAAeH,SACrD,kBAGDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,KACRpD,GAAI,CACFqD,WAAY,IACZJ,GAAI,GACJD,SAAU,CAAEnB,GAAI,SAAUC,GAAI,UAAWgZ,GAAI,aAC7CnZ,SAEDyX,GAAepK,eAElBrV,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,UACRP,MAAM,iBACN7C,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,YAAaC,GAAI,YAAcH,SACtD,6BAIHhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFuD,EAAG,CAAE1B,GAAI,EAAGC,GAAI,KAAMgZ,GAAI,KAC1Bva,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQsa,KAAKzZ,KAAM,KACxCG,UAEFhI,EAAAA,EAAAA,KAAC0K,EAAAA,EAAU,CAACrE,GAAI,CACd6C,MAAOxF,EAAMsD,QAAQsa,KAAKzZ,KAC1BwB,SAAU,CAAEnB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,iBAQ1CnhB,EAAAA,EAAAA,KAACoG,EAAAA,EAAI,CAACC,GAAI,CAAEO,aAAc,EAAG4D,QAAS,oBAAqBxC,UACzDhI,EAAAA,EAAAA,KAAC2J,EAAAA,EAAW,CAACtD,GAAI,CAAEuD,EAAG,CAAE1B,GAAI,EAAGC,GAAI,IAAKgZ,GAAI,IAAMnZ,UAChD7B,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMd,eAAe,gBAAgBlJ,WAAW,aAAY4G,SAAA,EAC3E7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,QACRP,MAAM,iBACNwM,cAAY,EACZrP,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,UAAWC,GAAI,aAAeH,SACrD,cAGD7B,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CACTC,QAAQ,KACRpD,GAAI,CACFqD,WAAY,IACZJ,GAAI,GACJD,SAAU,CAAEnB,GAAI,SAAUC,GAAI,UAAWgZ,GAAI,aAC7CnZ,SAAA,CAEDyX,GAAerK,QAAQ,QAE1BpV,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,UACRP,MAAM,iBACN7C,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,YAAaC,GAAI,YAAcH,SACtD,4BAIHhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFuD,EAAG,CAAE1B,GAAI,EAAGC,GAAI,KAAMgZ,GAAI,KAC1Bva,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQyD,QAAQ5C,KAAM,KAC3CG,UAEFhI,EAAAA,EAAAA,KAAC0K,EAAAA,EAAU,CAACrE,GAAI,CACd6C,MAAOxF,EAAMsD,QAAQyD,QAAQ5C,KAC7BwB,SAAU,CAAEnB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,iBAQ1CnhB,EAAAA,EAAAA,KAACoG,EAAAA,EAAI,CAACC,GAAI,CAAEO,aAAc,EAAG4D,QAAS,oBAAqBxC,UACzDhI,EAAAA,EAAAA,KAAC2J,EAAAA,EAAW,CAACtD,GAAI,CAAEuD,EAAG,CAAE1B,GAAI,EAAGC,GAAI,IAAKgZ,GAAI,IAAMnZ,UAChD7B,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACC,UAAU,MAAMd,eAAe,gBAAgBlJ,WAAW,aAAY4G,SAAA,EAC3E7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,QACRP,MAAM,iBACNwM,cAAY,EACZrP,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,UAAWC,GAAI,aAAeH,SACrD,eAGDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,KACRpD,GAAI,CACFqD,WAAY,IACZJ,GAAI,GACJD,SAAU,CAAEnB,GAAI,SAAUC,GAAI,UAAWgZ,GAAI,aAC7CnZ,UAEDvE,EAAAA,EAAAA,IAAegc,GAAeW,aAEjCja,EAAAA,EAAAA,MAACqD,EAAAA,EAAU,CACTC,QAAQ,UACRP,MAAOuW,GAAeW,UAAY,EAAI,eAAiB,aACvD/Z,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,YAAaC,GAAI,YAAcH,SAAA,CAEpDyX,GAAeW,UAAY,EAAI,SAAM,SAAI,mBAG9CpgB,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFuD,EAAG,CAAE1B,GAAI,EAAGC,GAAI,KAAMgZ,GAAI,KAC1Bva,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IACP0Y,GAAeW,UAAY,EAAI1c,EAAMsD,QAAQyD,QAAQ5C,KAAOnE,EAAMsD,QAAQ2D,MAAM9C,KAChF,KAEFG,SAEDyX,GAAeW,UAAY,GAC1BpgB,EAAAA,EAAAA,KAAC0K,EAAAA,EAAU,CAACrE,GAAI,CACd6C,MAAOxF,EAAMsD,QAAQyD,QAAQ5C,KAC7BwB,SAAU,CAAEnB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,QAGlCnhB,EAAAA,EAAAA,KAAC4K,EAAAA,EAAY,CAACvE,GAAI,CAChB6C,MAAOxF,EAAMsD,QAAQ2D,MAAM9C,KAC3BwB,SAAU,CAAEnB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,oBAU9Chb,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEiD,GAAI,CAAEpB,GAAI,EAAGC,GAAI,IAAMH,SAAA,EAChChI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,KACRpD,GAAI,CACFqD,WAAY,IACZJ,GAAI,CAAEpB,GAAI,EAAGC,GAAI,GACjBkB,SAAU,CAAEnB,GAAI,OAAQC,GAAI,WAAYgZ,GAAI,YAC5CnZ,SACH,mBAGD7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFlF,QAAS,OACTkM,oBAAqB,CAAEnF,GAAI,iBAAkBiZ,GAAI,kBACjDpX,IAAK,CAAE7B,GAAI,IAAKC,GAAI,IACpBH,SAAA,EAGFhI,EAAAA,EAAAA,KAACoG,EAAAA,EAAI,CACHC,GAAI,CACFO,aAAc,EACdC,OAAO,cAADO,QAAgBL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAA6B,SAAvBnE,EAAMsD,QAAQG,KAAkB,GAAM,KAC9FqD,QAAgC,SAAvB9G,EAAMsD,QAAQG,KAAkB,eAAgBJ,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,KAC3FvB,OAAQ,UACRC,WAAY,WACZ,UAAW,CACTO,YAAapD,EAAMsD,QAAQY,QAAQC,KACnC2C,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAA6B,SAAvBnE,EAAMsD,QAAQG,KAAkB,IAAO,KAClFQ,UAAW,qBAGfG,QAvXiByZ,KACtB/K,EAILmF,IAA8B,GAH5BI,IAAmB,EAGc,EAkXK/T,UAE9B7B,EAAAA,EAAAA,MAACwD,EAAAA,EAAW,CAACtD,GAAI,CACf4C,UAAW,SACXiF,GAAI,CAAEhG,GAAI,IAAKC,GAAI,EAAGgZ,GAAI,GAC1B5M,GAAI,CAAErM,GAAI,IAAKC,GAAI,IACnBH,SAAA,EACAhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFkE,MAAO,CAAErC,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,IAC7Bxa,OAAQ,CAAEuB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,IAC9Bva,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAA6B,SAAvBnE,EAAMsD,QAAQG,KAAkB,GAAM,KACjFhG,QAAS,OACTC,WAAY,SACZkJ,eAAgB,SAChB8W,GAAI,OACJ9X,GAAI,CAAEpB,GAAI,IAAKC,GAAI,IACnBH,UAEFhI,EAAAA,EAAAA,KAACwhB,EAAAA,EAAO,CAACnb,GAAI,CACXgD,SAAU,CAAEnB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,IAChCjY,MAAOxF,EAAMsD,QAAQY,QAAQC,WAGjC7H,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,YACRpD,GAAI,CACFqD,WAAY,IACZJ,GAAI,GACJD,SAAU,CAAEnB,GAAI,WAAYC,GAAI,YAAagZ,GAAI,SACjDnZ,SACH,qBAGDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,UACRP,MAAM,iBACN7C,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,YAAaC,GAAI,YAAcH,SACtD,sCAOLhI,EAAAA,EAAAA,KAACoG,EAAAA,EAAI,CACHC,GAAI,CACFO,aAAc,EACdC,OAAO,cAADO,QAAgBL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQsa,KAAKzZ,KAA6B,SAAvBnE,EAAMsD,QAAQG,KAAkB,GAAM,KAC3FqD,QAAgC,SAAvB9G,EAAMsD,QAAQG,KAAkB,eAAgBJ,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQsa,KAAKzZ,KAAM,KACxFvB,OAAQoI,EAAU/L,OAAS,EAAI,UAAY,cAC3C4G,QAASmF,EAAU/L,OAAS,EAAI,EAAI,GACpC4D,WAAY,WACZ,UAAWmI,EAAU/L,OAAS,EAAI,CAChCmE,YAAapD,EAAMsD,QAAQsa,KAAKzZ,KAChC2C,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQsa,KAAKzZ,KAA6B,SAAvBnE,EAAMsD,QAAQG,KAAkB,IAAO,KAC/EQ,UAAW,oBACT,CAAC,GAEPG,QA/Xc2Z,KACnBjL,EAIoB,IAArB9H,EAAU/L,SAId0Z,GAA2B,IAC3BF,IAAYuF,EAAAA,GAAAA,uBACZzF,IAAmB,IATjBF,IAAmB,EASG,EAoXa/T,UAE3B7B,EAAAA,EAAAA,MAACwD,EAAAA,EAAW,CAACtD,GAAI,CACf4C,UAAW,SACXiF,GAAI,CAAEhG,GAAI,IAAKC,GAAI,EAAGgZ,GAAI,GAC1B5M,GAAI,CAAErM,GAAI,IAAKC,GAAI,IACnBH,SAAA,EACAhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFkE,MAAO,CAAErC,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,IAC7Bxa,OAAQ,CAAEuB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,IAC9Bva,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQsa,KAAKzZ,KAA6B,SAAvBnE,EAAMsD,QAAQG,KAAkB,GAAM,KAC9EhG,QAAS,OACTC,WAAY,SACZkJ,eAAgB,SAChB8W,GAAI,OACJ9X,GAAI,CAAEpB,GAAI,IAAKC,GAAI,IACnBH,UAEFhI,EAAAA,EAAAA,KAAC0K,EAAAA,EAAU,CAACrE,GAAI,CACdgD,SAAU,CAAEnB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,IAChCjY,MAAOxF,EAAMsD,QAAQsa,KAAKzZ,WAG9B7H,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,YACRpD,GAAI,CACFqD,WAAY,IACZJ,GAAI,GACJD,SAAU,CAAEnB,GAAI,WAAYC,GAAI,YAAagZ,GAAI,SACjDnZ,SACH,kBAGDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,UACRP,MAAM,iBACN7C,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,YAAaC,GAAI,YAAcH,SACtD,gCAOLhI,EAAAA,EAAAA,KAACoG,EAAAA,EAAI,CACHC,GAAI,CACFO,aAAc,EACdC,OAAO,cAADO,QAAgBL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ6Q,QAAQhQ,KAA6B,SAAvBnE,EAAMsD,QAAQG,KAAkB,GAAM,KAC9FqD,QAAgC,SAAvB9G,EAAMsD,QAAQG,KAAkB,eAAgBJ,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ6Q,QAAQhQ,KAAM,KAC3FvB,OAAQ,UACRC,WAAY,WACZ,UAAW,CACTO,YAAapD,EAAMsD,QAAQ6Q,QAAQhQ,KACnC2C,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ6Q,QAAQhQ,KAA6B,SAAvBnE,EAAMsD,QAAQG,KAAkB,IAAO,KAClFQ,UAAW,qBAGfG,QAASA,KACF0O,EACLkG,IAAqB,GADRX,IAAmB,EACN,EAC1B/T,UAEF7B,EAAAA,EAAAA,MAACwD,EAAAA,EAAW,CAACtD,GAAI,CACf4C,UAAW,SACXiF,GAAI,CAAEhG,GAAI,IAAKC,GAAI,EAAGgZ,GAAI,GAC1B5M,GAAI,CAAErM,GAAI,IAAKC,GAAI,IACnBH,SAAA,EACAhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFkE,MAAO,CAAErC,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,IAC7Bxa,OAAQ,CAAEuB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,IAC9Bva,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ6Q,QAAQhQ,KAA6B,SAAvBnE,EAAMsD,QAAQG,KAAkB,GAAM,KACjFhG,QAAS,OACTC,WAAY,SACZkJ,eAAgB,SAChB8W,GAAI,OACJ9X,GAAI,CAAEpB,GAAI,IAAKC,GAAI,IACnBH,UAEFhI,EAAAA,EAAAA,KAACsL,EAAAA,EAAQ,CAACjF,GAAI,CACZgD,SAAU,CAAEnB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,IAChCjY,MAAOxF,EAAMsD,QAAQ6Q,QAAQhQ,WAGjC7H,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,YACRpD,GAAI,CACFqD,WAAY,IACZJ,GAAI,GACJD,SAAU,CAAEnB,GAAI,WAAYC,GAAI,YAAagZ,GAAI,SACjDnZ,SACH,WAGDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,UACRP,MAAM,iBACN7C,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,YAAaC,GAAI,YAAcH,SACtD,kCAOLhI,EAAAA,EAAAA,KAACoG,EAAAA,EAAI,CACHC,GAAI,CACFO,aAAc,EACdC,OAAO,cAADO,QAAgBL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ8B,UAAUjB,KAA6B,SAAvBnE,EAAMsD,QAAQG,KAAkB,GAAM,KAChGqD,QAAgC,SAAvB9G,EAAMsD,QAAQG,KAAkB,eAAgBJ,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ8B,UAAUjB,KAAM,KAC7FvB,OAAQ,UACRC,WAAY,WACZ,UAAW,CACTO,YAAapD,EAAMsD,QAAQ8B,UAAUjB,KACrC2C,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ8B,UAAUjB,KAA6B,SAAvBnE,EAAMsD,QAAQG,KAAkB,IAAO,KACpFQ,UAAW,qBAGfG,QAASA,KACF0O,EAILgG,IAAgB,GAHdT,IAAmB,EAGA,EACrB/T,UAEF7B,EAAAA,EAAAA,MAACwD,EAAAA,EAAW,CAACtD,GAAI,CACf4C,UAAW,SACXiF,GAAI,CAAEhG,GAAI,IAAKC,GAAI,EAAGgZ,GAAI,GAC1B5M,GAAI,CAAErM,GAAI,IAAKC,GAAI,IACnBH,SAAA,EACAhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFkE,MAAO,CAAErC,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,IAC7Bxa,OAAQ,CAAEuB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,IAC9Bva,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ8B,UAAUjB,KAA6B,SAAvBnE,EAAMsD,QAAQG,KAAkB,GAAM,KACnFhG,QAAS,OACTC,WAAY,SACZkJ,eAAgB,SAChB8W,GAAI,OACJ9X,GAAI,CAAEpB,GAAI,IAAKC,GAAI,IACnBH,UAEFhI,EAAAA,EAAAA,KAAC2hB,EAAAA,EAAM,CAACtb,GAAI,CACVgD,SAAU,CAAEnB,GAAI,GAAIC,GAAI,GAAIgZ,GAAI,IAChCjY,MAAOxF,EAAMsD,QAAQ8B,UAAUjB,WAGnC7H,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,YACRpD,GAAI,CACFqD,WAAY,IACZJ,GAAI,GACJD,SAAU,CAAEnB,GAAI,WAAYC,GAAI,YAAagZ,GAAI,SACjDnZ,SACH,kBAGDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,UACRP,MAAM,iBACN7C,GAAI,CAAEgD,SAAU,CAAEnB,GAAI,YAAaC,GAAI,YAAcH,SACtD,qCAST7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFlF,QAAS,OACTuF,cAAe,CAAEwB,GAAI,SAAUiZ,GAAI,OACnCpX,IAAK,CAAE7B,GAAI,EAAGC,GAAI,IAAKgZ,GAAI,GAC3B7X,GAAI,CAAEpB,GAAI,EAAGC,GAAI,IACjBH,SAAA,EAGF7B,EAAAA,EAAAA,MAACC,EAAAA,EAAI,CACHC,GAAI,CACFgE,KAAM,EACNzD,aAAc,EACdD,OAAQ,CAAEuB,GAAI,OAAQiZ,GAAI,SAC1B1L,GAAI,EACJwL,UAAW,CAAE/Y,GAAI,QAASiZ,GAAI,SAC9BtT,SAAU6Q,GAAgB/b,QAAU,EAAI,CAAEuF,GAAI,OAAQiZ,GAAI,SAAY,OACtEvX,EAAG,CAAE1B,GAAI,GAAKC,GAAI,GAClBhH,QAAS,OACTuF,cAAe,UACfsB,SAAA,EAEF7B,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CACJC,UAAU,MACVd,eAAe,gBACflJ,WAAW,SACXiF,GAAI,CACFiD,GAAI,CAAEpB,GAAI,EAAGC,GAAI,GACjBoM,GAAI,CAAErM,GAAI,IAAKC,GAAI,GACnBqF,GAAI,CAAEtF,GAAI,IAAKC,GAAI,IACnBH,SAAA,EAEFhI,EAAAA,EAAAA,KAAC4hB,GAAAA,EAAW,CACVC,KAAM,CACJ,CAAE9R,MAAO,mBAAoB+R,MAAM9hB,EAAAA,EAAAA,KAACkU,EAAAA,EAAa,CAAC7N,GAAI,CAAEgD,SAAU,OAClE,CAAE0G,MAAO,QAAS+R,MAAM9hB,EAAAA,EAAAA,KAAC+M,EAAS,CAAC1G,GAAI,CAAEgD,SAAU,QAErD0Y,UAAWpF,GACXqF,YAhqBkBC,CAACC,EAA8BC,KAC7DvF,GAAoBuF,GAEH,IAAbA,EAEFnL,IACsB,IAAbmL,IAEJ9G,EAGHE,KAFAD,GAAkB,GAItB,EAopBY7R,QAAQ,eAEVzJ,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,QACRpD,GAAI,CACF6C,MAAO,eACP5C,OAAQ,UACR+C,SAAU,CAAEnB,GAAI,YAAaC,GAAI,YACjC,UAAW,CAAEia,eAAgB,cAE/Bta,QAASA,IAAMgV,IAA4B,GAAM9U,SAClD,iBAMHhI,EAAAA,EAAAA,KAACqiB,GAAAA,EAAQ,CAAC7R,MAAOmM,GAAkB2F,MAAO,EAAEta,SACzC2G,GACC3O,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CAAC5B,GAAI,CAAEkO,GAAI,EAAGkB,GAAI,EAAGpL,KAAM,EAAGlJ,QAAS,OAAQuF,cAAe,MAAOqD,IAAK,GAAI/B,UAChFhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CAAC5B,GAAI,CAAE6D,SAAU,QAASG,KAAM,YAAarC,UAC/ChI,EAAAA,EAAAA,KAACgN,GAAmB,QAGK,IAA3B0R,GAAgB/b,QAClBwD,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACP4C,UAAW,SACXiF,GAAI,EACJqG,GAAI,EACJlK,KAAM,EACNlJ,QAAS,OACTuF,cAAe,SACf4D,eAAgB,SAChBlJ,WAAY,UACZ4G,SAAA,EACAhI,EAAAA,EAAAA,KAACkU,EAAAA,EAAa,CAAC7N,GAAI,CAAEgD,SAAU,GAAIH,MAAO,iBAAkBI,GAAI,EAAG8X,GAAI,WACvEphB,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,YAAYP,MAAM,eAAe7C,GAAI,CAAEiD,GAAI,EAAGI,WAAY,KAAM1B,SAAC,sBAGrFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAiB7C,GAAI,CAAEiD,GAAI,EAAGuE,SAAU,KAAM7F,SAAC,mGAKnFhI,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CAAC5B,GAAI,CACPkO,GAAI,EACJkB,GAAI,EACJpL,KAAM,EACNlJ,QAAS,OACTuF,cAAe,MACfqD,IAAK,GACL/B,SACC0W,GAAgBpR,KAAKpK,IAElBlD,EAAAA,EAAAA,KAACgD,GAAY,CAEXE,SAAUA,EACVC,gBAAiBmV,GACjBlV,eAAgBwb,GAChBvb,oBAAqBwb,GACrBvb,eAAgBwb,GAChBvb,iBAAkBwb,GAClBvb,yBAA0B6b,GAC1B5b,eAAgBA,EAAAA,IARXP,EAAS6E,WAiB1B/H,EAAAA,EAAAA,KAACqiB,GAAAA,EAAQ,CAAC7R,MAAOmM,GAAkB2F,MAAO,EAAEta,SACzCqP,GACClR,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEkO,GAAI,EAAGkB,GAAI,EAAGpL,KAAM,EAAGlJ,QAAS,OAAQuF,cAAe,SAAUqD,IAAK,GAAI/B,SAAA,EACnFhI,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAAC1C,MAAM,OAAO5D,OAAQ,GAAIN,GAAI,CAAEO,aAAc,MACtD5G,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAAC1C,MAAM,OAAO5D,OAAQ,GAAIN,GAAI,CAAEO,aAAc,QAE5B,IAA1BuQ,GAAexU,QACjBwD,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACP4C,UAAW,SACXiF,GAAI,EACJqG,GAAI,EACJlK,KAAM,EACNlJ,QAAS,OACTuF,cAAe,SACf4D,eAAgB,SAChBlJ,WAAY,UACZ4G,SAAA,EACAhI,EAAAA,EAAAA,KAAC+M,EAAS,CAAC1G,GAAI,CAAEgD,SAAU,GAAIH,MAAO,iBAAkBI,GAAI,EAAG8X,GAAI,WACnEphB,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,YAAYP,MAAM,eAAe7C,GAAI,CAAEiD,GAAI,EAAGI,WAAY,KAAM1B,SAAC,oBAGrFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAiB7C,GAAI,CAAEiD,GAAI,EAAGuE,SAAU,KAAM7F,SAAC,wFAKnF7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAEkO,GAAI,EAAGkB,GAAI,EAAGpL,KAAM,EAAGlJ,QAAS,OAAQuF,cAAe,SAAUqD,IAAK,KAAM/B,SAAA,EAErF7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CACF5B,GAAI,CACFlF,QAAS,OACTC,WAAY,SACZ2I,IAAK,IACLH,EAAG,IACHhD,aAAc,EACd4D,SAASzD,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ6Q,QAAQhQ,KAAM,KAC3ChB,OAAO,aAADO,QAAeL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQ6Q,QAAQhQ,KAAM,MACvDG,SAAA,EAEFhI,EAAAA,EAAAA,KAACmU,GAAAA,EAAY,CAAC9N,GAAI,CAAE6C,MAAO,eAAgBG,SAAU,OACrDlD,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAAD,SAAA,EACFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQC,WAAY,IAAKR,MAAM,eAAclB,SAAC,qDAGlEhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,UAAUP,MAAM,iBAAgBlB,SAAC,oFAOzDhI,EAAAA,EAAAA,KAACmL,EAAAA,EAAK,CAACjK,QAAS,EAAE8G,SACfmP,GAAe7J,KAAKpK,IACnBlD,EAAAA,EAAAA,KAAC8X,GAAiB,CAEhB5U,SAAUA,EACVgQ,UAAW8L,GACX7L,kBAAmBgM,IAHdjc,EAAS6E,iBAa5B5B,EAAAA,EAAAA,MAACC,EAAAA,EAAI,CACHC,GAAI,CACFgE,KAAM,EACNzD,aAAc,EACdD,OAAQ,CAAEuB,GAAI,OAAQiZ,GAAI,SAC1BF,UAAW,CAAE/Y,GAAI,QAASiZ,GAAI,SAC9BvX,EAAG,CAAE1B,GAAI,GAAKC,GAAI,GAClBhH,QAAS,OACTuF,cAAe,UACfsB,SAAA,EAEF7B,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CACJC,UAAU,MACVd,eAAe,gBACflJ,WAAW,SACXiF,GAAI,CACFiD,GAAI,CAAEpB,GAAI,EAAGC,GAAI,GACjBoM,GAAI,CAAErM,GAAI,IAAKC,GAAI,GACnBqF,GAAI,CAAEtF,GAAI,IAAKC,GAAI,IACnBH,SAAA,EAEFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,KACRpD,GAAI,CACFqD,WAAY,IACZL,SAAU,CAAEnB,GAAI,OAAQC,GAAI,WAAYgZ,GAAI,YAC5CnZ,SACH,qBAGDhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,QACRpD,GAAI,CACF6C,MAAO,eACP5C,OAAQ,UACR+C,SAAU,CAAEnB,GAAI,YAAaC,GAAI,YACjC,UAAW,CAAEia,eAAgB,cAE/Bta,QAASA,IAAM2T,IAAwB,GAAMzT,SAC9C,gBAKF+Q,GACC/Y,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CAAC5B,IAAErE,EAAAA,EAAAA,GAAA,CAAIuS,GAAI,EAAGkB,GAAI,EAAGpL,KAAM,EAAGsN,UAAW,SAAWC,EAAAA,GAAAA,GAAgBlU,IAASsE,UAC/EhI,EAAAA,EAAAA,KAACuiB,GAAAA,EAAoB,CAACC,MAAO,MAE5B1J,GAA4C,IAA1BA,EAAenW,QAoBpC3C,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CAAC5B,IAAErE,EAAAA,EAAAA,GAAA,CACLuS,GAAI,EACJkB,GAAI,EACJpL,KAAM,EACNsN,UAAW,SACRC,EAAAA,GAAAA,GAAgBlU,IACnBsE,SACC8Q,EAAexL,KAAKmV,IACnBziB,EAAAA,EAAAA,KAACoG,EAAAA,EAAI,CAEHC,GAAI,CACFiD,GAAI,EACJ1C,aAAc,EACdN,OAAQ,UACRC,WAAY,WACZiE,QAAgC,SAAvB9G,EAAMsD,QAAQG,MACnBJ,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQS,OAAOC,MAAO,KAClCX,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQS,OAAOC,MAAO,KACtCb,OAAO,aAADO,QAAeL,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQC,QAAS,KAClD,UAAW,CACTO,UAAW,EACXG,UAAW,mBACX6C,QAAgC,SAAvB9G,EAAMsD,QAAQG,MACnBJ,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQS,OAAOC,MAAO,KAClCX,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQS,OAAOC,MAAO,MAExC,eAAgB,CACd4B,GAAI,IAGRxB,QAASA,IAAM2T,IAAwB,GAAMzT,UAE7ChI,EAAAA,EAAAA,KAAC0iB,GAAAA,EAAqB,CACpBD,MAAOA,EACPlO,GAAI,IACJrG,GAAI,EACJyU,aAAa,EACb7a,QAASA,IAAM2T,IAAwB,MA5BpCgH,EAAM1a,SA5BjB5B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACP4C,UAAW,SACXiF,GAAI,EACJqG,GAAI,EACJlK,KAAM,EACNlJ,QAAS,OACTuF,cAAe,SACf4D,eAAgB,SAChBlJ,WAAY,UACZ4G,SAAA,EACAhI,EAAAA,EAAAA,KAAC4iB,EAAAA,EAAS,CAACvc,GAAI,CAAEgD,SAAU,GAAIH,MAAO,iBAAkBI,GAAI,EAAG8X,GAAI,WACnEphB,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,YAAYP,MAAM,eAAe7C,GAAI,CAAEiD,GAAI,EAAGI,WAAY,KAAM1B,SAAC,8BAGrFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAiB7C,GAAI,CAAEwH,SAAU,KAAM7F,SAAC,qFAqDhF7B,EAAAA,EAAAA,MAACC,EAAAA,EAAI,CACHC,GAAI,CACFgE,KAAM,EACNzD,aAAc,EACdgD,EAAG,CAAE1B,GAAI,EAAGC,GAAI,IAAKgZ,GAAI,IACzBnZ,SAAA,EAEFhI,EAAAA,EAAAA,KAACmL,EAAAA,EAAK,CACJC,UAAU,MACVd,eAAe,gBACflJ,WAAW,SACXiF,GAAI,CAAEiD,GAAI,CAAEpB,GAAI,EAAGC,GAAI,IAAMH,UAE7BhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CACTC,QAAQ,KACRpD,GAAI,CACFqD,WAAY,IACZL,SAAU,CAAEnB,GAAI,OAAQC,GAAI,WAAYgZ,GAAI,YAC5CnZ,SACH,oBAMF2S,GACC3a,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFlF,QAAS,OACTkM,oBAAqB,CACnBnF,GAAI,MACJC,GAAI,yCAEN4B,IAAK,CAAE7B,GAAI,IAAKC,GAAI,IACpBH,SAED6a,MAAMC,KAAK,CAAEngB,OAAQ,IAAK2K,KAAI,CAACyV,EAAGT,KACjCtiB,EAAAA,EAAAA,KAACoG,EAAAA,EAAI,CAEHC,GAAI,CACFO,aAAc,EACdC,OAAQ,YACRC,aAAaC,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,IAC/C0G,iBAAiBxH,EAAAA,EAAAA,IAAMrD,EAAMsD,QAAQY,QAAQC,KAAM,MACnDG,UAEFhI,EAAAA,EAAAA,KAAC2J,EAAAA,EAAW,CAACtD,GAAI,CAAEuD,EAAG,EAAG4D,GAAI,EAAG,eAAgB,CAAEiI,GAAI,IAAMzN,UAC1D7B,EAAAA,EAAAA,MAACgF,EAAAA,EAAK,CAACjK,QAAS,IAAI8G,SAAA,EAElB7B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAElF,QAAS,OAAQmJ,eAAgB,gBAAiBlJ,WAAY,cAAe4G,SAAA,EACtFhI,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAAC1C,MAAM,MAAM5D,OAAQ,GAAIN,GAAI,CAAEO,aAAc,MACrD5G,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAAC1C,MAAM,MAAM5D,OAAQ,GAAIN,GAAI,CAAEO,aAAc,SAIvDT,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAElF,QAAS,OAAQ4I,IAAK,EAAG3I,WAAY,UAAW4G,SAAA,EACzDhI,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAAC1C,MAAO,GAAI5D,OAAQ,GAAIN,GAAI,CAAEO,aAAc,UACpD5G,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAAC1C,MAAO,GAAI5D,OAAQ,GAAIN,GAAI,CAAEO,aAAc,MACpD5G,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAAC1C,MAAO,GAAI5D,OAAQ,GAAIN,GAAI,CAAEO,aAAc,UACpD5G,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAAC1C,MAAO,GAAI5D,OAAQ,GAAIN,GAAI,CAAEO,aAAc,SAItDT,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CAAElF,QAAS,OAAQ6hB,SAAU,OAAQjZ,IAAK,IAAM/B,SAAA,EACvDhI,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAAC1C,MAAO,GAAI5D,OAAQ,GAAIN,GAAI,CAAEO,aAAc,OACpD5G,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAAC1C,MAAO,IAAK5D,OAAQ,GAAIN,GAAI,CAAEO,aAAc,OACrD5G,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAAC1C,MAAO,GAAI5D,OAAQ,GAAIN,GAAI,CAAEO,aAAc,OACpD5G,EAAAA,EAAAA,KAACiN,EAAAA,EAAO,CAAC1C,MAAO,GAAI5D,OAAQ,GAAIN,GAAI,CAAEO,aAAc,eA7BrD0b,OAoCR7H,IAAwC,IAAxBA,GAAa9X,QAkBhC3C,EAAAA,EAAAA,KAACiI,EAAAA,EAAG,CACF5B,GAAI,CACFlF,QAAS,OACTkM,oBAAqB,CACnBnF,GAAI,MACJC,GAAI,yCAEN4B,IAAK,CAAE7B,GAAI,IAAKC,GAAI,IACpBH,SAEDyS,GAAanN,KAAK0N,IACjBhb,EAAAA,EAAAA,KAACijB,GAAAA,EAAS,CAERjI,MAAOA,EACPkI,UAAU,EACVpb,QAASA,IAv/BDkT,KACxBrC,EAAS,aAADvR,OAAc4T,EAAME,aAAc,EAs/BXiI,CAAiBnI,IAH3BA,EAAMjT,SA7BjB5B,EAAAA,EAAAA,MAAC8B,EAAAA,EAAG,CAAC5B,GAAI,CACP4C,UAAW,SACXiF,GAAI,EACJ/M,QAAS,OACTuF,cAAe,SACf4D,eAAgB,SAChBlJ,WAAY,UACZ4G,SAAA,EACAhI,EAAAA,EAAAA,KAAC0K,EAAAA,EAAU,CAACrE,GAAI,CAAEgD,SAAU,GAAIH,MAAO,iBAAkBI,GAAI,EAAG8X,GAAI,WACpEphB,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,YAAYP,MAAM,eAAe7C,GAAI,CAAEiD,GAAI,EAAGI,WAAY,KAAM1B,SAAC,sBAGrFhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAACC,QAAQ,QAAQP,MAAM,iBAAiB7C,GAAI,CAAEwH,SAAU,KAAM7F,SAAC,qGA6BnF0G,EAAU/L,OAAS,IAClB3C,EAAAA,EAAAA,KAACojB,GAAAA,EAAsB,CACrBjX,KAAMqP,GACNnP,QAASA,IAAMoP,IAAwB,GACvCvY,SAAUwL,EAAU,GACpB2U,gBAAiB,CACfC,kBAAmBA,OACnBC,sBAAuBA,IAAMC,QAAQC,aAAQ7gB,GAC7C8gB,YAAaA,OACbC,cAAeA,IAAMH,QAAQC,UAC7BG,uBAAwBA,OACxBC,YAAa7G,GACb8G,gBAAiBA,KAAM,EACvB7L,WAAYvJ,EAAU,GAAG3G,GACzB7E,SAAUwL,EAAU,GACpBlL,yBAA0BA,IAAMggB,QAAQC,aAAQ7gB,IAElDmhB,YAAU,KAKd/jB,EAAAA,EAAAA,KAACgkB,GAAAA,EAAY,CACX7X,KAAMoQ,GACNlQ,QAASA,IAAMmQ,IAAgB,GAC/B6G,gBAAiB,CACfC,kBAAmBA,OACnBC,sBAAuBA,IAAMC,QAAQC,aAAQ7gB,GAC7C8gB,YAAaA,OACbC,cAAeA,IAAMH,QAAQC,UAC7BG,uBAAwBA,OACxBC,YAAa7G,GACb8G,gBAAiBA,KAAM,EACvBtgB,yBAA0BA,IAAMggB,QAAQC,aAAQ7gB,IAElDmhB,YAAY,KAId/jB,EAAAA,EAAAA,KAACikB,GAAAA,EAAW,CACV9X,KAAMsQ,GACNpQ,QAASA,IAAMqQ,IAAqB,GACpCwH,oBAAoB,IAIrBxV,EAAU/L,OAAS,IAClB3C,EAAAA,EAAAA,KAACmkB,GAAAA,GAAe,CACdhY,KAAM6P,GACN3P,QA3+BqB+X,KACvBlI,IAAYA,GAASmI,iBACvBnI,GAASmI,eAAeC,SAAQC,IAC9BC,IAAIC,gBAAgBF,EAAMG,QAAQ,IAEpCvI,GAAY,OAEdF,IAAmB,EAAM,EAq+BnB0I,aAAczI,SAAYtZ,EAC1BgiB,WAAY,IAAI3R,KAChB4R,SAAU,CAAE1Y,KAAM6P,GAAiB8I,eAAWliB,EAAWmiB,iBAAiB,GAC1Etf,gBAAiBub,GACjBgE,WA3gCuB9U,UAC7B,MAAM+H,EAAa+C,EAAME,cAAoC,OAArBoF,SAAqB,IAArBA,QAAqB,EAArBA,GAAuBvY,KAAMqU,GACrE,IAAKnE,EACH,MAAM,IAAIpH,MAAM,iCAEZoO,GAAgBgG,SAAShN,GAAUjW,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOgZ,GAAK,IAAEE,YAAajD,KACpE,MAAMkD,GAAoC,OAArBmF,SAAqB,IAArBA,QAAqB,EAArBA,GAAuB3f,OAAQ,GAC9CukB,GAA4CljB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQgZ,GAAK,IAAEG,iBACjEmB,IAAgBpE,GACP,CAACgN,KAA2BhN,GAAQ,KAC3C,EAkgCI8E,eAAgBA,GAChBmI,gBAp+BuBC,IAC7BjJ,IAAYjE,IACV,MAAMmN,EAAW,OAAJnN,QAAI,IAAJA,EAAAA,GAAQwJ,EAAAA,GAAAA,sBACrB,OAAO0D,EAAQC,EAAK,GACpB,EAi+BIC,SAz+BsBC,KAC5BtJ,IAAmB,EAAM,EAy+BnB/Y,SAAUod,GACVkF,oBAAqBjF,GACrBM,KAAMD,GACN6E,kBAAmB3E,GACnBpS,UAAWA,EACXgX,iBAxhC2BzN,IACjCoE,GAA2BpE,EAAW,KA4hCpCjY,EAAAA,EAAAA,KAAC2lB,GAAAA,EAAkB,CACjBxZ,KAAMuP,GACNrP,QAASA,IAAMsP,IAA8B,GAC7CiK,SA3jC6B1V,UACjC2L,IAAsB,GACtB,IACE,MAAMgK,QAAoBpN,EACxBW,EAAKzY,KACLyY,EAAK3T,gBACL2T,EAAK0M,mBACL1M,EAAKpD,cACLoD,EAAKnD,eACLmD,EAAK2M,cACL3M,EAAKoH,eACLpH,EAAKqH,qBACLrH,EAAKsH,0BACLtH,EAAKuH,4BACLvH,EAAK3Q,eACL2Q,EAAK4M,wBAGPrK,IAA8B,GAC9BhD,EAAS,aAADvR,OAAcye,EAAY9d,IACpC,CAAE,MAAO4C,GACPyP,EAAO,OAAAzP,MAAM,2BAA4BA,EAC3C,CAAC,QACCkR,IAAsB,EACxB,GAoiCI5M,aAAc2M,GACdzU,KAAK,SACLyO,MAAM,sBACNqQ,iBAAiB,YAInBjmB,EAAAA,EAAAA,KAAC2lB,GAAAA,EAAkB,CACjBxZ,KAAMgR,GACN9Q,QAASA,IAAM+Q,IAAoB,GACnCwI,SA7uC2B1V,UAC/B,GAAKyN,GAAL,CAEAO,IAAa,GACb,UACQxF,EAAiBiF,GAAe5V,GAAI,CACxCpH,KAAMyY,EAAKzY,KACX8E,gBAAiB2T,EAAK3T,gBACtBqgB,mBAAoB1M,EAAK0M,mBACzB9P,cAAeoD,EAAKpD,cACpBC,eAAgBmD,EAAKnD,eACrB8P,cAAe3M,EAAK2M,cACpBvF,eAAgBpH,EAAKoH,eACrBC,qBAAsBrH,EAAKqH,qBAC3BC,0BAA2BtH,EAAKsH,0BAChCC,4BAA6BvH,EAAKuH,4BAClClY,eAAgB2Q,EAAK3Q,eACrBud,uBAAwB5M,EAAK4M,yBAE/B5I,IAAoB,GACpBQ,GAAkB,KACpB,CAAE,MAAOjT,GACPyP,EAAO,OAAAzP,MAAM,2BAA4BA,EAC3C,CAAC,QACCuT,IAAa,EACf,CAxB2B,CAwB3B,EAqtCIgI,YAAavI,SAAkB/a,EAC/BqM,aAAcgP,GACd9W,KAAK,OACLyO,MAAM,gBACNqQ,iBAAiB,kBAInBjmB,EAAAA,EAAAA,KAACyN,GAAuB,CACtBtB,KAAMkR,GACNna,SAAU2a,GACVnQ,cAAeA,GACfrB,QAASA,KACPiR,IAAgC,GAChCQ,GAAuB,KAAK,EAE9BnQ,YAluC8BuC,UAClC,GAAK2N,GAAL,CAEAM,IAAiB,GACjB,IACE,MAAMgI,EAAO,GAAA/e,OAAMyW,GAAoBld,KAAI,iBACrC0C,EAAoBwa,GAAoB9V,GAAIoe,EAASC,GAC3D9I,IAAgC,GAChCQ,GAAuB,KACzB,CAAE,MAAOnT,GACPyP,EAAO,OAAAzP,MAAM,8BAA+BA,EAC9C,CAAC,QACCwT,IAAiB,EACnB,CAZgC,CAYhC,KAytCEne,EAAAA,EAAAA,KAACqmB,GAAkB,CACjBla,KAAM0Q,GACNxQ,QAASA,IAAMyQ,IAA4B,GAC3ClI,QAA8B,IAArB+H,GACTxZ,gBAAiBmV,GACjBlV,eAAgBwb,GAChBvb,oBAAqBwb,GACrBvb,eAAgBwb,GAChBvb,iBAAkBwb,GAClBvb,yBAA0B6b,GAC1B/I,kBAAmB0I,GACnBzI,0BAA2B4I,MAI7Bnf,EAAAA,EAAAA,KAACyO,GAAkB,CACjBtC,KAAMoR,GACNra,SAAU6a,GACVrP,UAAWA,EACXC,UAAWyP,GACX/R,QAASA,KACPmR,IAAoB,GACpBQ,GAAkB,KAAK,EAEzBpP,OA9uCmBsB,UACvB,GAAK6N,GAAL,CAEAM,IAAa,GACb,UACQY,GAAgBqH,aAAavI,GAAehW,GAAIwe,SAChDvP,IACNwG,IAAoB,GACpBQ,GAAkB,KACpB,CAAE,MAAOrT,GAEP,MADAyP,EAAO,OAAAzP,MAAM,0BAA2BA,GAClCA,CACR,CAAC,QACC0T,IAAa,EACf,CAb2B,CAa3B,EAiuCIxP,SA9tCqBqB,UACzB,GAAK6N,GAAL,CAEAM,IAAa,GACb,UACQY,GAAgBuH,eAAezI,GAAehW,UAC9CiP,IACNwG,IAAoB,GACpBQ,GAAkB,KACpB,CAAE,MAAOrT,GAEP,MADAyP,EAAO,OAAAzP,MAAM,4BAA6BA,GACpCA,CACR,CAAC,QACC0T,IAAa,EACf,CAb2B,CAa3B,KAotCElY,EAAAA,EAAAA,MAACyH,EAAAA,GAAM5L,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACLmK,KAAM8Q,GACN5Q,QAASA,IAAM6Q,IAAsB,GACrCrP,SAAS,KACTC,WAAS,GACLC,GAAAA,GAAW,IAAA/F,SAAA,EAEf7B,EAAAA,EAAAA,MAAC6H,EAAAA,EAAW,CAAC3H,GAAI,CACflF,QAAS,OACTC,WAAY,SACZ2I,IAAK,EACLb,MAAO,cACPlB,SAAA,EACAhI,EAAAA,EAAAA,KAACwU,EAAAA,EAAU,CAACnL,SAAS,UAAU,sBAGjCrJ,EAAAA,EAAAA,KAACiO,EAAAA,EAAa,CAAAjG,UACZhI,EAAAA,EAAAA,KAACwJ,EAAAA,EAAU,CAAAxB,SAAC,oFAId7B,EAAAA,EAAAA,MAACqI,EAAAA,EAAa,CAAAxG,SAAA,EACZhI,EAAAA,EAAAA,KAACqO,EAAAA,EAAM,CACLvG,QAASA,IAAMoV,IAAsB,GACrC7W,GAAI,CAAE6C,MAAO,kBAAmBlB,SACjC,YAGDhI,EAAAA,EAAAA,KAACqO,EAAAA,EAAM,CACLvG,QA9uCkBoI,UACtBuN,WACIla,EAAiBka,IACvBC,GAAoB,OAEtBR,IAAsB,EAAM,EA0uCpB7W,GAAI,CACF6C,MAAO,cACPlB,SACH,mBAOLhI,EAAAA,EAAAA,KAACymB,GAAAA,EAAW,CACVta,KAAM2P,GACNzP,QAnlCyBqa,KAC7B3K,IAAmB,EAAM,EAmlCrBnG,MAAM,eACN+Q,SAAS,0BAEP,C","sources":["../node_modules/@mui/icons-material/esm/DeleteOutline.js","hooks/useRecentTrades.ts","../node_modules/@mui/material/esm/CardActions/cardActionsClasses.js","../node_modules/@mui/material/esm/CardActions/CardActions.js","components/CalendarCard.tsx","components/CalendarCardShimmer.tsx","components/dialogs/DuplicateCalendarDialog.tsx","components/dialogs/CalendarLinkDialog.tsx","../node_modules/@mui/icons-material/esm/Restore.js","../node_modules/date-fns/esm/differenceInDays/index.js","../node_modules/date-fns/esm/differenceInCalendarDays/index.js","components/trash/TrashCalendarItem.tsx","components/dialogs/CalendarListDialog.tsx","pages/HomePage.tsx","hooks/useUpcomingEconomicEvents.ts"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z\"\n}), 'DeleteOutline');","/**\r\n * useRecentTrades Hook\r\n *\r\n * Hook for fetching and managing recent trades with SWR.\r\n * Automatically refetches data when browser tab regains focus,\r\n * solving the Chrome Energy Saver tab freezing issue.\r\n */\r\n\r\nimport useSWR from 'swr';\r\nimport { TradeRepository } from '../services/repository/repositories/TradeRepository';\r\nimport type { Trade } from '../types/dualWrite';\r\nimport type { Calendar } from '../types/calendar';\r\nimport { logger } from '../utils/logger';\r\n\r\n// Create singleton repository instance at module level\r\nconst tradeRepository = new TradeRepository();\r\n\r\nexport interface TradeWithCalendarName extends Trade {\r\n  calendarName: string;\r\n}\r\n\r\ninterface UseRecentTradesOptions {\r\n  /**\r\n   * Number of recent trades to fetch\r\n   * @default 5\r\n   */\r\n  limit?: number;\r\n\r\n  /**\r\n   * Interval in milliseconds to automatically refetch data.\r\n   * Set to 0 to disable automatic revalidation.\r\n   * @default 0\r\n   */\r\n  refreshInterval?: number;\r\n\r\n  /**\r\n   * Whether to revalidate when the browser tab regains focus.\r\n   * This solves the Chrome tab freezing issue.\r\n   * @default true\r\n   */\r\n  revalidateOnFocus?: boolean;\r\n}\r\n\r\n/**\r\n * Custom hook to fetch recent trades for a user with automatic focus revalidation\r\n */\r\nexport function useRecentTrades(\r\n  userId: string | undefined,\r\n  calendars: Calendar[] | undefined,\r\n  options: UseRecentTradesOptions = {}\r\n) {\r\n  const {\r\n    limit = 5,\r\n    refreshInterval = 0,\r\n    revalidateOnFocus = true,\r\n  } = options;\r\n\r\n  const { data, error, isLoading, mutate } = useSWR(\r\n    // Only fetch if userId is defined and calendars are loaded\r\n    userId && calendars ? ['recentTrades', userId, limit] : null,\r\n    // Fetcher function\r\n    async () => {\r\n      if (!userId || !calendars) return null;\r\n\r\n      try {\r\n        // Fetch trades ordered by trade_date (descending) with limit\r\n        const allTrades = await tradeRepository.findByUserId(userId, {\r\n          limit,\r\n          orderBy: 'trade_date',\r\n          ascending: false\r\n        });\r\n\r\n        // Map trades with calendar names\r\n        const tradesWithCalendarNames: TradeWithCalendarName[] = allTrades.map(trade => {\r\n          const calendar = calendars.find(cal => cal.id === trade.calendar_id);\r\n          return {\r\n            ...trade,\r\n            calendarName: calendar?.name || 'Unknown Calendar'\r\n          };\r\n        });\r\n\r\n        return tradesWithCalendarNames;\r\n      } catch (err) {\r\n        logger.error('Error fetching recent trades:', err);\r\n        throw err;\r\n      }\r\n    },\r\n    {\r\n      // Automatically refetch when tab regains focus (solves Chrome freezing)\r\n      revalidateOnFocus,\r\n      // Prevent duplicate requests within 2 seconds\r\n      dedupingInterval: 2000,\r\n      // Optional: auto-refresh interval\r\n      refreshInterval,\r\n      // Don't retry on error (let user manually refresh)\r\n      shouldRetryOnError: false,\r\n      // Keep previous data while revalidating to prevent empty arrays\r\n      keepPreviousData: true,\r\n    }\r\n  );\r\n\r\n  return {\r\n    recentTrades: data ?? undefined,\r\n    isLoading,\r\n    error,\r\n    /**\r\n     * Manually refresh recent trades data\r\n     */\r\n    refresh: mutate,\r\n  };\r\n}\r\n\r\n","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCardActionsUtilityClass(slot) {\n  return generateUtilityClass('MuiCardActions', slot);\n}\nconst cardActionsClasses = generateUtilityClasses('MuiCardActions', ['root', 'spacing']);\nexport default cardActionsClasses;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport { styled } from \"../zero-styled/index.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport { getCardActionsUtilityClass } from \"./cardActionsClasses.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    disableSpacing\n  } = ownerState;\n  const slots = {\n    root: ['root', !disableSpacing && 'spacing']\n  };\n  return composeClasses(slots, getCardActionsUtilityClass, classes);\n};\nconst CardActionsRoot = styled('div', {\n  name: 'MuiCardActions',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, !ownerState.disableSpacing && styles.spacing];\n  }\n})({\n  display: 'flex',\n  alignItems: 'center',\n  padding: 8,\n  variants: [{\n    props: {\n      disableSpacing: false\n    },\n    style: {\n      '& > :not(style) ~ :not(style)': {\n        marginLeft: 8\n      }\n    }\n  }]\n});\nconst CardActions = /*#__PURE__*/React.forwardRef(function CardActions(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCardActions'\n  });\n  const {\n    disableSpacing = false,\n    className,\n    ...other\n  } = props;\n  const ownerState = {\n    ...props,\n    disableSpacing\n  };\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardActionsRoot, {\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref,\n    ...other\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? CardActions.propTypes /* remove-proptypes */ = {\n  //  Warning \n  //  These PropTypes are generated from the TypeScript type definitions. \n  //     To update them, edit the d.ts file and run `pnpm proptypes`.     \n  // \n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the actions do not have additional margin.\n   * @default false\n   */\n  disableSpacing: PropTypes.bool,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default CardActions;","import React, { useCallback, useMemo } from 'react';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardActions,\r\n  Box,\r\n  Typography,\r\n  IconButton,\r\n  alpha,\r\n  useTheme,\r\n  Button,\r\n  Menu,\r\n  MenuItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Stack,\r\n  Divider,\r\n  Tooltip,\r\n  Theme\r\n} from '@mui/material';\r\nimport {\r\n  TrendingUp,\r\n  TrendingDown,\r\n  MoreVert as MoreVertIcon,\r\n  ContentCopy as CopyIcon,\r\n  Delete as TrashIcon,\r\n  Edit as EditIcon,\r\n  CalendarToday as CalendarIcon,\r\n  Link as LinkIcon\r\n} from '@mui/icons-material';\r\nimport { format, isValid } from 'date-fns';\r\nimport { Calendar } from '../types/calendar';\r\nimport { CalendarStats } from '../services/calendarService';\r\nimport ShareButton from './sharing/ShareButton';\r\n\r\n/**\r\n * Safely format a date value, returning a fallback string for invalid dates\r\n */\r\nconst safeFormatDate = (date: Date | undefined | null, formatStr: string, fallback: string = 'N/A'): string => {\r\n  if (!date || !isValid(date)) return fallback;\r\n  try {\r\n    return format(date, formatStr);\r\n  } catch {\r\n    return fallback;\r\n  }\r\n};\r\n\r\ninterface CalendarCardProps {\r\n  calendar: Calendar;\r\n  onCalendarClick: (calendarId: string) => void;\r\n  onEditCalendar: (calendar: Calendar) => void;\r\n  onDuplicateCalendar: (calendar: Calendar) => void;\r\n  onLinkCalendar?: (calendar: Calendar) => void;\r\n  onDeleteCalendar: (calendarId: string) => void;\r\n  onUpdateCalendarProperty?: (calendarId: string, updateCallback: (calendar: Calendar) => Calendar) => Promise<Calendar | undefined>;\r\n  formatCurrency: (amount: number) => string;\r\n}\r\n\r\nconst CalendarCard: React.FC<CalendarCardProps> = ({\r\n  calendar,\r\n  onCalendarClick,\r\n  onEditCalendar,\r\n  onDuplicateCalendar,\r\n  onLinkCalendar,\r\n  onDeleteCalendar,\r\n  onUpdateCalendarProperty,\r\n  formatCurrency\r\n}) => {\r\n  const theme = useTheme();\r\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState<HTMLElement | null>(null);\r\n\r\n  const handleMenuClick = useCallback((e: React.MouseEvent<HTMLElement>) => {\r\n    e.stopPropagation();\r\n    setMenuAnchorEl(e.currentTarget);\r\n  }, []);\r\n\r\n  const handleMenuClose = useCallback(() => {\r\n    setMenuAnchorEl(null);\r\n  }, []);\r\n\r\n  const handleMenuItemClick = useCallback((action: () => void) => {\r\n    handleMenuClose();\r\n    action();\r\n  }, [handleMenuClose]);\r\n\r\n  \r\n  const stats: CalendarStats = useMemo(() => {\r\n    return {  // Extract stats from calendar object (stats are auto-calculated by Supabase)\r\n      total_pnl: calendar.total_pnl || 0,\r\n      win_rate: calendar.win_rate || 0,\r\n      total_trades: calendar.total_trades || 0,\r\n      growth_percentage: calendar.pnl_performance || 0,\r\n      avg_win: calendar.avg_win || 0,\r\n      avg_loss: calendar.avg_loss || 0,\r\n      profit_factor: calendar.profit_factor || 0,\r\n      max_drawdown: calendar.max_drawdown || 0,\r\n      drawdown_recovery_needed: calendar.drawdown_recovery_needed || 0,\r\n      drawdown_duration: calendar.drawdown_duration || 0,\r\n      drawdown_start_date: calendar.drawdown_start_date || null,\r\n      drawdown_end_date: calendar.drawdown_end_date || null,\r\n      target_progress: calendar.target_progress || 0,\r\n      pnl_performance: calendar.pnl_performance || 0,\r\n      win_count: calendar.win_count || 0,\r\n      loss_count: calendar.loss_count || 0,\r\n      current_balance: calendar.current_balance || calendar.account_balance,\r\n      initial_balance: calendar.account_balance,\r\n      weekly_pnl: calendar.weekly_pnl,\r\n      monthly_pnl: calendar.monthly_pnl,\r\n      yearly_pnl: calendar.yearly_pnl,\r\n      weekly_pnl_percentage: calendar.weekly_pnl_percentage,\r\n      monthly_pnl_percentage: calendar.monthly_pnl_percentage,\r\n      yearly_pnl_percentage: calendar.yearly_pnl_percentage,\r\n      weekly_progress: calendar.weekly_progress,\r\n      monthly_progress: calendar.monthly_progress\r\n    };\r\n  }, [calendar])\r\n\r\n  function renderAccountGrowth(\r\n    stats: CalendarStats,\r\n    theme: Theme,\r\n    formatCurrency: (amount: number) => string\r\n  ): React.ReactNode {\r\n    const growth = stats.growth_percentage;\r\n    if (isNaN(growth)) return null;\r\n\r\n    return (\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          mt: 1,\r\n          gap: 1.5,\r\n          p: 1.5,\r\n          borderRadius: 2,\r\n          bgcolor: stats.total_pnl > 0\r\n            ? alpha(theme.palette.success.main, 0.1)\r\n            : stats.total_pnl < 0\r\n              ? alpha(theme.palette.error.main, 0.1)\r\n              : alpha(theme.palette.grey[500], 0.1),\r\n          border: `1px solid ${stats.total_pnl > 0\r\n            ? alpha(theme.palette.success.main, 0.2)\r\n            : stats.total_pnl < 0\r\n              ? alpha(theme.palette.error.main, 0.2)\r\n              : alpha(theme.palette.grey[500], 0.2)}`,\r\n        }}\r\n      >\r\n        <Box\r\n          sx={{\r\n            width: 40,\r\n            height: 40,\r\n            borderRadius: '50%',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            bgcolor: stats.total_pnl > 0\r\n              ? alpha(theme.palette.success.main, 0.1)\r\n              : stats.total_pnl < 0\r\n                ? alpha(theme.palette.error.main, 0.1)\r\n                : alpha(theme.palette.grey[500], 0.1)\r\n          }}\r\n        >\r\n          <TrendingUp sx={{\r\n            fontSize: '1.2rem',\r\n            color: stats.total_pnl > 0\r\n              ? theme.palette.success.main\r\n              : stats.total_pnl < 0\r\n                ? theme.palette.error.main\r\n                : theme.palette.grey[500]\r\n          }} />\r\n        </Box>\r\n        <Box>\r\n          <Typography variant=\"h6\" sx={{\r\n            color: stats.total_pnl > 0\r\n              ? 'success.main'\r\n              : stats.total_pnl < 0\r\n                ? 'error.main'\r\n                : 'text.secondary',\r\n            fontWeight: 600\r\n          }}>\r\n            {formatCurrency(stats.total_pnl)}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            Growth: {stats.growth_percentage.toFixed(2)}%\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n    );\r\n  }\r\n  return (\r\n    <Card\r\n      sx={{\r\n        cursor: 'pointer',\r\n        transition: 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)',\r\n        position: 'relative',\r\n        overflow: 'hidden',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        height: 'auto',\r\n        borderRadius: 1,\r\n        border: '1px solid',\r\n        borderColor: alpha(theme.palette.divider, 0.1),\r\n        background: theme.palette.mode === 'dark'\r\n          ? `linear-gradient(145deg, ${alpha(theme.palette.background.paper, 0.95)} 0%, ${alpha(theme.palette.background.default, 0.98)} 100%)`\r\n          : `linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(248,250,252,0.98) 100%)`,\r\n        backdropFilter: 'blur(10px)',\r\n        boxShadow: `0 4px 20px ${alpha(theme.palette.common.black, theme.palette.mode === 'dark' ? 0.3 : 0.08)}`,\r\n        '&:hover': {\r\n          transform: 'translateY(-8px) scale(1.02)',\r\n          boxShadow: `0 20px 40px ${alpha(theme.palette.common.black, theme.palette.mode === 'dark' ? 0.4 : 0.15)}`,\r\n          borderColor: alpha(theme.palette.primary.main, 0.3),\r\n          '& .hero-image': {\r\n            transform: 'scale(1.05)'\r\n          }\r\n        }\r\n      }}\r\n      onClick={() => onCalendarClick(calendar.id)}\r\n    >\r\n      {/* Hero Image Section - Always rendered for consistent layout */}\r\n      <Box\r\n        sx={{\r\n          position: 'relative',\r\n          overflow: 'hidden',\r\n          height: { xs: 160, sm: 200 },\r\n          flexShrink: 0\r\n        }}\r\n      >\r\n        <Box\r\n          className=\"hero-image\"\r\n          sx={{\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            ...(calendar.hero_image_url ? {\r\n              backgroundImage: `url(${calendar.hero_image_url})`,\r\n              backgroundSize: 'cover',\r\n              backgroundPosition: 'center',\r\n              backgroundRepeat: 'no-repeat',\r\n            } : {\r\n              // Gradient placeholder for calendars without hero images\r\n              background: `linear-gradient(135deg,\r\n                ${alpha(theme.palette.primary.main, 0.1)} 0%,\r\n                ${alpha(theme.palette.secondary.main, 0.1)} 50%,\r\n                ${alpha(theme.palette.primary.main, 0.05)} 100%)`,\r\n            }),\r\n            transition: 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)',\r\n            '&::before': {\r\n              content: '\"\"',\r\n              position: 'absolute',\r\n              top: 0,\r\n              left: 0,\r\n              right: 0,\r\n              bottom: 0,\r\n              background: calendar.hero_image_url\r\n                ? `linear-gradient(135deg, ${alpha(theme.palette.common.black, 0.2)} 0%, ${alpha(theme.palette.common.black, 0.1)} 50%, ${alpha(theme.palette.common.black, 0.4)} 100%)`\r\n                : 'transparent',\r\n              zIndex: 1,\r\n              transition: 'background 0.4s ease'\r\n            }\r\n          }}\r\n        />\r\n\r\n        {/* Placeholder content for calendars without hero images */}\r\n        {!calendar.hero_image_url && (\r\n          <Box\r\n            sx={{\r\n              position: 'absolute',\r\n              top: '50%',\r\n              left: '50%',\r\n              transform: 'translate(-50%, -50%)',\r\n              zIndex: 2,\r\n              textAlign: 'center',\r\n              color: alpha(theme.palette.text.secondary, 0.6)\r\n            }}\r\n          >\r\n            <CalendarIcon sx={{ fontSize: '3rem', mb: 1, opacity: 0.4 }} />\r\n            <Typography\r\n              variant=\"body2\"\r\n              sx={{\r\n                \r\n                fontWeight: 500,\r\n                opacity: 0.7,\r\n                fontSize: '0.9rem'\r\n              }}\r\n            >\r\n              {calendar.name}\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n \r\n      </Box>\r\n\r\n      {/* Content Section */}\r\n      <CardContent sx={{\r\n        p: 3,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        flexGrow: 1,\r\n        position: 'relative',\r\n        zIndex: 1\r\n      }}>\r\n        {/* Title section */}\r\n        <Box sx={{ mb: 2 }}>\r\n          <Box sx={{ mb: 1.5 }}>\r\n            <Typography\r\n              variant=\"h5\"\r\n              component=\"div\"\r\n              sx={{\r\n                fontWeight: 700,\r\n                color: 'text.primary',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: 1.5,\r\n                mb: 0.5,\r\n                fontSize: '1.4rem',\r\n                letterSpacing: '-0.02em',\r\n                lineHeight: 1.2,\r\n                minWidth: 0\r\n              }}\r\n            >\r\n              <Box\r\n                component=\"span\"\r\n                sx={{\r\n                  overflow: 'hidden',\r\n                  textOverflow: 'ellipsis',\r\n                  whiteSpace: 'nowrap',\r\n                  minWidth: 0,\r\n                  flex: 1\r\n                }}\r\n              >\r\n                {calendar.name}\r\n              </Box>\r\n              {stats.total_pnl > 0 && (\r\n                <Box sx={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  width: 28,\r\n                  height: 28,\r\n                  borderRadius: '50%',\r\n                  bgcolor: alpha(theme.palette.success.main, 0.1),\r\n                  border: `1px solid ${alpha(theme.palette.success.main, 0.2)}`\r\n                }}>\r\n                  <TrendingUp sx={{ fontSize: '1rem', color: 'success.main' }} />\r\n                </Box>\r\n              )}\r\n              {stats.total_pnl < 0 && (\r\n                <Box sx={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  width: 28,\r\n                  height: 28,\r\n                  borderRadius: '50%',\r\n                  bgcolor: alpha(theme.palette.error.main, 0.1),\r\n                  border: `1px solid ${alpha(theme.palette.error.main, 0.2)}`\r\n                }}>\r\n                  <TrendingDown sx={{ fontSize: '1rem', color: 'error.main' }} />\r\n                </Box>\r\n              )}\r\n            </Typography>\r\n            {/* Account Growth */}\r\n            {renderAccountGrowth(stats, theme, formatCurrency)}\r\n          </Box>\r\n        </Box>\r\n\r\n\r\n\r\n\r\n        {/* Metadata section */}\r\n        <Stack direction=\"row\" spacing={3} sx={{ mb: 1.5 }}>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.8 }}>\r\n            <Box sx={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              width: 20,\r\n              height: 20,\r\n              borderRadius: '50%',\r\n              bgcolor: alpha(theme.palette.primary.main, 0.1)\r\n            }}>\r\n              <CalendarIcon sx={{ fontSize: '0.8rem', color: 'primary.main' }} />\r\n            </Box>\r\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ fontSize: '0.8rem', fontWeight: 500 }}>\r\n              Created {safeFormatDate(calendar.created_at, 'MMM d, yyyy')}\r\n            </Typography>\r\n          </Box>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.8 }}>\r\n            <Box sx={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              width: 20,\r\n              height: 20,\r\n              borderRadius: '50%',\r\n              bgcolor: alpha(theme.palette.secondary.main, 0.1)\r\n            }}>\r\n              <EditIcon sx={{ fontSize: '0.8rem', color: 'secondary.main' }} />\r\n            </Box>\r\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ fontSize: '0.8rem', fontWeight: 500 }}>\r\n              Updated {safeFormatDate(calendar.updated_at, 'MMM d, yyyy')}\r\n            </Typography>\r\n          </Box>\r\n        </Stack>\r\n      </CardContent>\r\n\r\n      {/* Card Actions */}\r\n      <CardActions sx={{\r\n        justifyContent: 'flex-end',\r\n        alignItems: 'center',\r\n        p: 2,\r\n        borderTop: `1px solid ${alpha(theme.palette.divider, 0.1)}`\r\n      }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n          {/* Share Calendar Button */}\r\n          {onUpdateCalendarProperty && (\r\n            <ShareButton\r\n              type=\"calendar\"\r\n              item={calendar}\r\n              onUpdateItemProperty={onUpdateCalendarProperty}\r\n            />\r\n          )}\r\n\r\n          <IconButton\r\n            size=\"small\"\r\n            onClick={handleMenuClick}\r\n            sx={{\r\n              color: 'text.secondary',\r\n              '&:hover': {\r\n                bgcolor: alpha(theme.palette.primary.main, 0.1),\r\n                color: 'primary.main'\r\n              }\r\n            }}\r\n          >\r\n            <MoreVertIcon />\r\n          </IconButton>\r\n\r\n          <Menu\r\n            anchorEl={menuAnchorEl}\r\n            open={Boolean(menuAnchorEl)}\r\n            onClose={handleMenuClose}\r\n            onClick={(e) => e.stopPropagation()}\r\n            transformOrigin={{ horizontal: 'right', vertical: 'top' }}\r\n            anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\r\n          >\r\n            <MenuItem onClick={() => handleMenuItemClick(() => onEditCalendar(calendar))}>\r\n              <ListItemIcon>\r\n                <EditIcon fontSize=\"small\" />\r\n              </ListItemIcon>\r\n              <ListItemText>Edit</ListItemText>\r\n            </MenuItem>\r\n\r\n            <MenuItem onClick={() => handleMenuItemClick(() => onDuplicateCalendar(calendar))}>\r\n              <ListItemIcon>\r\n                <CopyIcon fontSize=\"small\" />\r\n              </ListItemIcon>\r\n              <ListItemText>Duplicate</ListItemText>\r\n            </MenuItem>\r\n\r\n            {onLinkCalendar && (\r\n              <MenuItem onClick={() => handleMenuItemClick(() => onLinkCalendar(calendar))}>\r\n                <ListItemIcon>\r\n                  <LinkIcon fontSize=\"small\" />\r\n                </ListItemIcon>\r\n                <ListItemText>Link</ListItemText>\r\n              </MenuItem>\r\n            )}\r\n\r\n            <MenuItem\r\n              onClick={() => handleMenuItemClick(() => onDeleteCalendar(calendar.id))}\r\n              sx={{ color: 'error.main' }}\r\n            >\r\n              <ListItemIcon>\r\n                <TrashIcon fontSize=\"small\" sx={{ color: 'error.main' }} />\r\n              </ListItemIcon>\r\n              <ListItemText>Delete</ListItemText>\r\n            </MenuItem>\r\n          </Menu>\r\n        </Box>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default React.memo(CalendarCard);\r\n","import React from 'react';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardActions,\r\n  Box,\r\n  Stack,\r\n  Divider,\r\n  alpha,\r\n  useTheme\r\n} from '@mui/material';\r\nimport Shimmer from './Shimmer';\r\n\r\n/**\r\n * Reusable shimmer loading component for calendar cards\r\n * Used in Home and CalendarTrash components\r\n */\r\nconst CalendarCardShimmer: React.FC = () => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Card\r\n      sx={{\r\n        height: '100%',\r\n        width: '350px',\r\n        position: 'relative',\r\n        overflow: 'hidden',\r\n        transition: 'transform 0.3s ease-in-out',\r\n        '&::before': {\r\n          content: '\"\"',\r\n          position: 'absolute',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0, \r\n          zIndex: 1\r\n        }\r\n      }}\r\n    >\r\n      <CardContent sx={{ p: 3 }}>\r\n        <Box sx={{ mb: 2.5 }}>\r\n          {/* Title shimmer */}\r\n          <Shimmer\r\n            height={28}\r\n            width=\"60%\"\r\n            borderRadius={8}\r\n            variant=\"wave\"\r\n            intensity=\"medium\"\r\n            sx={{ mb: 1 }}\r\n          />\r\n\r\n          {/* Date shimmer */}\r\n          <Stack direction=\"row\" spacing={2} sx={{ mb: 1 }}>\r\n            <Shimmer\r\n              height={20}\r\n              width=\"30%\"\r\n              borderRadius={4}\r\n              variant=\"default\"\r\n              intensity=\"low\"\r\n            />\r\n            <Shimmer\r\n              height={20}\r\n              width=\"30%\"\r\n              borderRadius={4}\r\n              variant=\"default\"\r\n              intensity=\"low\"\r\n            />\r\n          </Stack>\r\n        </Box>\r\n\r\n        <Divider sx={{ my: 2, opacity: 0.6 }} />\r\n\r\n        {/* Stats shimmer */}\r\n        <Stack spacing={2}>\r\n          {/* Main stats box with gradient */}\r\n          <Box\r\n            sx={{\r\n              p: 1.5,\r\n              borderRadius: 1,\r\n              bgcolor: alpha(theme.palette.background.default, 0.6),\r\n              mb: 1\r\n            }}\r\n          >\r\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1.5 }}>\r\n              <Shimmer\r\n                height={40}\r\n                width={40}\r\n                borderRadius=\"50%\"\r\n                variant=\"pulse\"\r\n                intensity=\"medium\"\r\n              />\r\n              <Box sx={{ width: '100%' }}>\r\n                <Shimmer\r\n                  height={24}\r\n                  width=\"40%\"\r\n                  borderRadius={6}\r\n                  variant=\"wave\"\r\n                  intensity=\"high\"\r\n                  sx={{ mb: 1 }}\r\n                />\r\n                <Shimmer\r\n                  height={16}\r\n                  width=\"30%\"\r\n                  borderRadius={4}\r\n                  variant=\"default\"\r\n                  intensity=\"low\"\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </Box>\r\n\r\n          {/* Grid stats */}\r\n          <Box sx={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: 2 }}>\r\n            <Box sx={{ p: 1.5, borderRadius: 1, bgcolor: alpha(theme.palette.background.default, 0.6) }}>\r\n              <Shimmer\r\n                height={16}\r\n                width=\"60%\"\r\n                borderRadius={4}\r\n                variant=\"default\"\r\n                intensity=\"low\"\r\n                sx={{ mb: 1 }}\r\n              />\r\n              <Shimmer\r\n                height={24}\r\n                width=\"40%\"\r\n                borderRadius={6}\r\n                variant=\"wave\"\r\n                intensity=\"medium\"\r\n              />\r\n            </Box>\r\n            <Box sx={{ p: 1.5, borderRadius: 1, bgcolor: alpha(theme.palette.background.default, 0.6) }}>\r\n              <Shimmer\r\n                height={16}\r\n                width=\"60%\"\r\n                borderRadius={4}\r\n                variant=\"default\"\r\n                intensity=\"low\"\r\n                sx={{ mb: 1 }}\r\n              />\r\n              <Shimmer\r\n                height={24}\r\n                width=\"40%\"\r\n                borderRadius={6}\r\n                variant=\"wave\"\r\n                intensity=\"medium\"\r\n              />\r\n            </Box>\r\n          </Box>\r\n\r\n          {/* Additional stats */}\r\n          <Box sx={{ p: 1.5, borderRadius: 1, bgcolor: alpha(theme.palette.background.default, 0.6) }}>\r\n            <Shimmer\r\n              height={16}\r\n              width=\"40%\"\r\n              borderRadius={4}\r\n              variant=\"default\"\r\n              intensity=\"low\"\r\n              sx={{ mb: 1 }}\r\n            />\r\n            <Box sx={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: 1 }}>\r\n              {[1, 2, 3].map((i) => (\r\n                <Box key={i}>\r\n                  <Shimmer\r\n                    height={14}\r\n                    width=\"70%\"\r\n                    borderRadius={4}\r\n                    variant=\"default\"\r\n                    intensity=\"low\"\r\n                    sx={{ mb: 0.5 }}\r\n                  />\r\n                  <Shimmer\r\n                    height={20}\r\n                    width=\"50%\"\r\n                    borderRadius={6}\r\n                    variant={i === 2 ? \"pulse\" : \"default\"}\r\n                    intensity=\"medium\"\r\n                  />\r\n                </Box>\r\n              ))}\r\n            </Box>\r\n          </Box>\r\n        </Stack>\r\n      </CardContent>\r\n\r\n      <CardActions sx={{\r\n        justifyContent: 'flex-end',\r\n        p: 2,\r\n        pt: 1,\r\n        borderTop: `1px solid ${alpha(theme.palette.divider, 0.1)}`\r\n      }}>\r\n        {/* Action buttons shimmer */}\r\n        <Stack direction=\"row\" spacing={1}>\r\n          {[1, 2, 3].map((i) => (\r\n            <Shimmer\r\n              key={i}\r\n              height={32}\r\n              width={80}\r\n              borderRadius={8}\r\n              variant={i === 1 ? \"pulse\" : \"default\"}\r\n              intensity={i === 1 ? \"high\" : \"medium\"}\r\n            />\r\n          ))}\r\n        </Stack>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default CalendarCardShimmer;\r\n\r\n","import React from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  Typography,\r\n  Box,\r\n  Stack,\r\n  CircularProgress,\r\n  useTheme,\r\n  alpha\r\n} from '@mui/material';\r\nimport { ContentCopy as CopyIcon } from '@mui/icons-material';\r\nimport { Calendar } from '../../types/calendar';\r\nimport { dialogProps } from '../../styles/dialogStyles';\r\n\r\ninterface DuplicateCalendarDialogProps {\r\n  open: boolean;\r\n  calendar: Calendar | null;\r\n  isDuplicating: boolean;\r\n  onClose: () => void;\r\n  onDuplicate: (withContent: boolean) => void;\r\n}\r\n\r\nexport const DuplicateCalendarDialog: React.FC<DuplicateCalendarDialogProps> = ({\r\n  open,\r\n  calendar,\r\n  isDuplicating,\r\n  onClose,\r\n  onDuplicate\r\n}) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n      {...dialogProps}\r\n    >\r\n      <DialogTitle sx={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: 1,\r\n        color: 'primary.main'\r\n      }}>\r\n        <CopyIcon fontSize=\"small\" />\r\n        Duplicate Calendar Options\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        {isDuplicating ? (\r\n          <Box sx={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            py: 4\r\n          }}>\r\n            <CircularProgress size={40} sx={{ mb: 2 }} />\r\n            <Typography variant=\"body1\" color=\"text.secondary\">\r\n              Duplicating calendar...\r\n            </Typography>\r\n          </Box>\r\n        ) : (\r\n          <>\r\n            <Typography variant=\"body1\" sx={{ mb: 3 }}>\r\n              How would you like to duplicate \"{calendar?.name}\"?\r\n            </Typography>\r\n\r\n            <Stack spacing={2}>\r\n              <Button\r\n                variant=\"outlined\"\r\n                onClick={() => onDuplicate(false)}\r\n                disabled={isDuplicating}\r\n                sx={{\r\n                  p: 2,\r\n                  textAlign: 'left',\r\n                  justifyContent: 'flex-start',\r\n                  borderColor: 'primary.main',\r\n                  '&:hover': {\r\n                    borderColor: 'primary.dark',\r\n                    backgroundColor: alpha(theme.palette.primary.main, 0.05)\r\n                  }\r\n                }}\r\n              >\r\n                <Box>\r\n                  <Typography variant=\"subtitle1\" sx={{ fontWeight: 600, mb: 0.5 }}>\r\n                    Settings Only\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Copy calendar settings without trades\r\n                  </Typography>\r\n                </Box>\r\n              </Button>\r\n\r\n              <Button\r\n                variant=\"outlined\"\r\n                onClick={() => onDuplicate(true)}\r\n                disabled={isDuplicating}\r\n                sx={{\r\n                  p: 2,\r\n                  textAlign: 'left',\r\n                  justifyContent: 'flex-start',\r\n                  borderColor: 'primary.main',\r\n                  '&:hover': {\r\n                    borderColor: 'primary.dark',\r\n                    backgroundColor: alpha(theme.palette.primary.main, 0.05)\r\n                  }\r\n                }}\r\n              >\r\n                <Box>\r\n                  <Typography variant=\"subtitle1\" sx={{ fontWeight: 600, mb: 0.5 }}>\r\n                    Settings & Trades\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Copy everything including all trades\r\n                  </Typography>\r\n                </Box>\r\n              </Button>\r\n            </Stack>\r\n          </>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button\r\n          onClick={onClose}\r\n          disabled={isDuplicating}\r\n          sx={{ color: 'text.secondary' }}\r\n        >\r\n          Cancel\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  Typography,\r\n  Box,\r\n  Stack,\r\n  CircularProgress,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Alert,\r\n  Chip,\r\n  useTheme,\r\n  alpha\r\n} from '@mui/material';\r\nimport { Link as LinkIcon, LinkOff as UnlinkIcon } from '@mui/icons-material';\r\nimport { Calendar } from '../../types/dualWrite';\r\nimport { dialogProps } from '../../styles/dialogStyles';\r\n\r\ninterface CalendarLinkDialogProps {\r\n  open: boolean;\r\n  calendar: Calendar | null;\r\n  calendars: Calendar[];\r\n  isLoading: boolean;\r\n  onClose: () => void;\r\n  onLink: (targetCalendarId: string) => Promise<void>;\r\n  onUnlink: () => Promise<void>;\r\n}\r\n\r\nexport const CalendarLinkDialog: React.FC<CalendarLinkDialogProps> = ({\r\n  open,\r\n  calendar,\r\n  calendars,\r\n  isLoading,\r\n  onClose,\r\n  onLink,\r\n  onUnlink\r\n}) => {\r\n  const theme = useTheme();\r\n  const [selectedCalendarId, setSelectedCalendarId] = useState<string>('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Filter out:\r\n  // 1. Current calendar (self-link)\r\n  // 2. Calendars that link to this calendar (would create immediate cycle)\r\n  const availableCalendars = calendars.filter(\r\n    (c) => c.id !== calendar?.id && c.linked_to_calendar_id !== calendar?.id\r\n  );\r\n\r\n  // Find the currently linked calendar\r\n  const linkedCalendar = calendar?.linked_to_calendar_id\r\n    ? calendars.find((c) => c.id === calendar.linked_to_calendar_id)\r\n    : null;\r\n\r\n  // Reset state when dialog opens\r\n  useEffect(() => {\r\n    if (open) {\r\n      setSelectedCalendarId('');\r\n      setError(null);\r\n    }\r\n  }, [open]);\r\n\r\n  const handleLink = async () => {\r\n    if (!selectedCalendarId) return;\r\n\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n    try {\r\n      await onLink(selectedCalendarId);\r\n      onClose();\r\n    } catch (err) {\r\n      console.error('Error linking calendar:', err);\r\n      const message = err instanceof Error ? err.message : 'Failed to link calendar';\r\n      // Handle circular link error from database\r\n      if (message.toLowerCase().includes('circular')) {\r\n        setError('Cannot link: this would create a circular link chain.');\r\n      } else {\r\n        setError(message);\r\n      }\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleUnlink = async () => {\r\n    setIsSubmitting(true);\r\n    try {\r\n      await onUnlink();\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Error unlinking calendar:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const isProcessing = isLoading || isSubmitting;\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n      {...dialogProps}\r\n    >\r\n      <DialogTitle\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: 1,\r\n          color: 'primary.main'\r\n        }}\r\n      >\r\n        <LinkIcon fontSize=\"small\" />\r\n        Link Calendar\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        {isProcessing ? (\r\n          <Box\r\n            sx={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center',\r\n              py: 4\r\n            }}\r\n          >\r\n            <CircularProgress size={40} sx={{ mb: 2 }} />\r\n            <Typography variant=\"body1\" color=\"text.secondary\">\r\n              {isSubmitting ? 'Updating link...' : 'Loading...'}\r\n            </Typography>\r\n          </Box>\r\n        ) : (\r\n          <Stack spacing={3}>\r\n            <Alert severity=\"info\" sx={{ borderRadius: 2 }}>\r\n              <Typography variant=\"body2\">\r\n                When you link calendars, trades created in \"{calendar?.name}\" will\r\n                automatically be copied to the target calendar. Updates and deletes\r\n                sync for 24 hours after trade creation.\r\n              </Typography>\r\n            </Alert>\r\n\r\n            {error && (\r\n              <Alert severity=\"error\" sx={{ borderRadius: 2 }}>\r\n                <Typography variant=\"body2\">{error}</Typography>\r\n              </Alert>\r\n            )}\r\n\r\n            {linkedCalendar ? (\r\n              <Box>\r\n                <Typography variant=\"subtitle2\" color=\"text.secondary\" sx={{ mb: 1 }}>\r\n                  Currently linked to:\r\n                </Typography>\r\n                <Box\r\n                  sx={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    p: 2,\r\n                    borderRadius: 2,\r\n                    bgcolor: alpha(theme.palette.primary.main, 0.08),\r\n                    border: `1px solid ${alpha(theme.palette.primary.main, 0.2)}`\r\n                  }}\r\n                >\r\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                    <Chip\r\n                      label={linkedCalendar.name}\r\n                      color=\"primary\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      Trades sync to this calendar\r\n                    </Typography>\r\n                  </Box>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    color=\"error\"\r\n                    size=\"small\"\r\n                    startIcon={<UnlinkIcon />}\r\n                    onClick={handleUnlink}\r\n                    disabled={isProcessing}\r\n                  >\r\n                    Unlink\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n            ) : (\r\n              <FormControl fullWidth>\r\n                <InputLabel id=\"target-calendar-label\">Target Calendar</InputLabel>\r\n                <Select\r\n                  labelId=\"target-calendar-label\"\r\n                  value={selectedCalendarId}\r\n                  label=\"Target Calendar\"\r\n                  onChange={(e) => setSelectedCalendarId(e.target.value)}\r\n                  disabled={isProcessing}\r\n                >\r\n                  {availableCalendars.length === 0 ? (\r\n                    <MenuItem value=\"\" disabled>\r\n                      No available calendars\r\n                    </MenuItem>\r\n                  ) : (\r\n                    availableCalendars.map((c) => (\r\n                      <MenuItem key={c.id} value={c.id}>\r\n                        {c.name}\r\n                      </MenuItem>\r\n                    ))\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n            )}\r\n\r\n            {!linkedCalendar && availableCalendars.length === 0 && (\r\n              <Alert severity=\"warning\" sx={{ borderRadius: 2 }}>\r\n                <Typography variant=\"body2\">\r\n                  No calendars available to link. Create another calendar first.\r\n                </Typography>\r\n              </Alert>\r\n            )}\r\n          </Stack>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose} disabled={isProcessing} sx={{ color: 'text.secondary' }}>\r\n          Cancel\r\n        </Button>\r\n        {!linkedCalendar && (\r\n          <Button\r\n            variant=\"contained\"\r\n            onClick={handleLink}\r\n            disabled={isProcessing || !selectedCalendarId}\r\n            startIcon={<LinkIcon />}\r\n          >\r\n            Link Calendar\r\n          </Button>\r\n        )}\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z\"\n}), 'Restore');","import toDate from \"../toDate/index.js\";\nimport differenceInCalendarDays from \"../differenceInCalendarDays/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\"; // Like `compareAsc` but uses local time not UTC, which is needed\n// for accurate equality comparisons of UTC timestamps that end up\n// having the same representation in local time, e.g. one hour before\n// DST ends vs. the instant that DST ends.\n\nfunction compareLocalAsc(dateLeft, dateRight) {\n  var diff = dateLeft.getFullYear() - dateRight.getFullYear() || dateLeft.getMonth() - dateRight.getMonth() || dateLeft.getDate() - dateRight.getDate() || dateLeft.getHours() - dateRight.getHours() || dateLeft.getMinutes() - dateRight.getMinutes() || dateLeft.getSeconds() - dateRight.getSeconds() || dateLeft.getMilliseconds() - dateRight.getMilliseconds();\n\n  if (diff < 0) {\n    return -1;\n  } else if (diff > 0) {\n    return 1; // Return 0 if diff is 0; return NaN if diff is NaN\n  } else {\n    return diff;\n  }\n}\n/**\n * @name differenceInDays\n * @category Day Helpers\n * @summary Get the number of full days between the given dates.\n *\n * @description\n * Get the number of full day periods between two dates. Fractional days are\n * truncated towards zero.\n *\n * One \"full day\" is the distance between a local time in one day to the same\n * local time on the next or previous day. A full day can sometimes be less than\n * or more than 24 hours if a daylight savings change happens between two dates.\n *\n * To ignore DST and only measure exact 24-hour periods, use this instead:\n * `Math.floor(differenceInHours(dateLeft, dateRight)/24)|0`.\n *\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of full days according to the local timezone\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many full days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 365\n * // How many full days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 0\n * // How many full days are between\n * // 1 March 2020 0:00 and 1 June 2020 0:00 ?\n * // Note: because local time is used, the\n * // result will always be 92 days, even in\n * // time zones where DST starts and the\n * // period has only 92*24-1 hours.\n * const result = differenceInDays(\n *   new Date(2020, 5, 1),\n *   new Date(2020, 2, 1)\n * )\n//=> 92\n */\n\n\nexport default function differenceInDays(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  var sign = compareLocalAsc(dateLeft, dateRight);\n  var difference = Math.abs(differenceInCalendarDays(dateLeft, dateRight));\n  dateLeft.setDate(dateLeft.getDate() - sign * difference); // Math.abs(diff in full days - diff in calendar days) === 1 if last calendar day is not full\n  // If so, result must be decreased by 1 in absolute value\n\n  var isLastDayNotFull = Number(compareLocalAsc(dateLeft, dateRight) === -sign);\n  var result = sign * (difference - isLastDayNotFull); // Prevent negative zero\n\n  return result === 0 ? 0 : result;\n}","import getTimezoneOffsetInMilliseconds from \"../_lib/getTimezoneOffsetInMilliseconds/index.js\";\nimport startOfDay from \"../startOfDay/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nvar MILLISECONDS_IN_DAY = 86400000;\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of calendar days\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInCalendarDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\n\nexport default function differenceInCalendarDays(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var startOfDayLeft = startOfDay(dirtyDateLeft);\n  var startOfDayRight = startOfDay(dirtyDateRight);\n  var timestampLeft = startOfDayLeft.getTime() - getTimezoneOffsetInMilliseconds(startOfDayLeft);\n  var timestampRight = startOfDayRight.getTime() - getTimezoneOffsetInMilliseconds(startOfDayRight); // Round the number of days to the nearest integer\n  // because the number of milliseconds in a day is not constant\n  // (e.g. it's different in the day of the daylight saving time clock shift)\n\n  return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_DAY);\n}","import React, { useState } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Avatar,\r\n  Stack,\r\n  Button,\r\n  alpha,\r\n  useTheme,\r\n  CircularProgress\r\n} from '@mui/material';\r\nimport {\r\n  CalendarToday,\r\n  Schedule as ScheduleIcon,\r\n  Restore as RestoreIcon,\r\n  Delete as DeleteIcon\r\n} from '@mui/icons-material';\r\nimport { format, isValid, differenceInDays } from 'date-fns';\r\nimport { Calendar } from '../../types/calendar';\r\n\r\ninterface TrashCalendarItemProps {\r\n  calendar: Calendar;\r\n  onRestore: (calendarId: string) => Promise<void>;\r\n  onPermanentDelete: (calendarId: string) => Promise<void>;\r\n}\r\n\r\nconst safeFormatDate = (\r\n  date: Date | string | undefined | null,\r\n  formatStr: string,\r\n  fallback: string = 'N/A'\r\n): string => {\r\n  if (!date) return fallback;\r\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\r\n  if (!isValid(dateObj)) return fallback;\r\n  try {\r\n    return format(dateObj, formatStr);\r\n  } catch {\r\n    return fallback;\r\n  }\r\n};\r\n\r\nconst getDaysUntilDeletion = (autoDeleteAt: Date | string | undefined | null): number => {\r\n  if (!autoDeleteAt) return 30;\r\n  const deleteDate = typeof autoDeleteAt === 'string' ? new Date(autoDeleteAt) : autoDeleteAt;\r\n  if (!isValid(deleteDate)) return 30;\r\n  const days = differenceInDays(deleteDate, new Date());\r\n  return Math.max(0, days);\r\n};\r\n\r\nconst TrashCalendarItem: React.FC<TrashCalendarItemProps> = ({\r\n  calendar,\r\n  onRestore,\r\n  onPermanentDelete\r\n}) => {\r\n  const theme = useTheme();\r\n  const [isRestoring, setIsRestoring] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n  const daysUntilDeletion = getDaysUntilDeletion(calendar.auto_delete_at);\r\n\r\n  const handleRestore = async (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    setIsRestoring(true);\r\n    try {\r\n      await onRestore(calendar.id);\r\n    } finally {\r\n      setIsRestoring(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    setIsDeleting(true);\r\n    try {\r\n      await onPermanentDelete(calendar.id);\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: 1.5,\r\n        p: 1.5,\r\n        borderRadius: 2,\r\n        bgcolor: theme.palette.mode === 'dark'\r\n          ? alpha(theme.palette.background.paper, 0.4)\r\n          : alpha(theme.palette.background.default, 0.6),\r\n        border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\r\n        transition: 'all 0.2s',\r\n      }}\r\n    >\r\n      {/* Hero Image or Placeholder */}\r\n      <Avatar\r\n        src={calendar.hero_image_url || undefined}\r\n        variant=\"rounded\"\r\n        sx={{\r\n          width: 48,\r\n          height: 48,\r\n          flexShrink: 0,\r\n          bgcolor: alpha(theme.palette.error.main, 0.1),\r\n          opacity: 0.7,\r\n          '& img': {\r\n            objectFit: 'cover'\r\n          }\r\n        }}\r\n      >\r\n        <CalendarToday sx={{ color: theme.palette.text.secondary }} />\r\n      </Avatar>\r\n\r\n      {/* Calendar Info */}\r\n      <Box sx={{ flex: 1, minWidth: 0 }}>\r\n        <Typography\r\n          variant=\"subtitle2\"\r\n          sx={{\r\n            fontWeight: 600,\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            whiteSpace: 'nowrap',\r\n            mb: 0.25\r\n          }}\r\n        >\r\n          {calendar.name}\r\n        </Typography>\r\n        <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n          <ScheduleIcon sx={{ fontSize: 14, color: 'text.secondary' }} />\r\n          <Typography variant=\"caption\" color=\"text.secondary\">\r\n            {daysUntilDeletion} days until deletion\r\n          </Typography>\r\n        </Stack>\r\n      </Box>\r\n\r\n      {/* Dates */}\r\n      <Box sx={{ textAlign: 'right', flexShrink: 0, minWidth: 100 }}>\r\n        <Stack spacing={0.25}>\r\n          <Stack direction=\"row\" justifyContent=\"space-between\" spacing={2}>\r\n            <Typography variant=\"caption\" color=\"text.secondary\">\r\n              Deleted\r\n            </Typography>\r\n            <Typography variant=\"caption\" fontWeight={500}>\r\n              {safeFormatDate(calendar.deleted_at, 'MMM d, yyyy')}\r\n            </Typography>\r\n          </Stack>\r\n          <Stack direction=\"row\" justifyContent=\"space-between\" spacing={2}>\r\n            <Typography variant=\"caption\" color=\"text.secondary\">\r\n              Auto-delete\r\n            </Typography>\r\n            <Typography variant=\"caption\" color=\"text.secondary\">\r\n              {safeFormatDate(calendar.auto_delete_at, 'MMM d, yyyy')}\r\n            </Typography>\r\n          </Stack>\r\n        </Stack>\r\n      </Box>\r\n\r\n      {/* Actions */}\r\n      <Stack direction=\"row\" spacing={1} sx={{ flexShrink: 0 }}>\r\n        <Button\r\n          size=\"small\"\r\n          startIcon={isRestoring ? <CircularProgress size={14} /> : <RestoreIcon />}\r\n          onClick={handleRestore}\r\n          disabled={isRestoring || isDeleting}\r\n          sx={{\r\n            textTransform: 'none',\r\n            color: 'primary.main',\r\n            fontSize: '0.75rem',\r\n            minWidth: 'auto',\r\n            px: 1\r\n          }}\r\n        >\r\n          Restore\r\n        </Button>\r\n        <Button\r\n          size=\"small\"\r\n          startIcon={isDeleting ? <CircularProgress size={14} /> : <DeleteIcon />}\r\n          onClick={handleDelete}\r\n          disabled={isRestoring || isDeleting}\r\n          sx={{\r\n            textTransform: 'none',\r\n            color: 'error.main',\r\n            fontSize: '0.75rem',\r\n            minWidth: 'auto',\r\n            px: 1\r\n          }}\r\n        >\r\n          Delete\r\n        </Button>\r\n      </Stack>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default TrashCalendarItem;\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  Box,\r\n  Typography,\r\n  IconButton,\r\n  alpha,\r\n  useTheme,\r\n  Stack,\r\n  Avatar,\r\n  Menu,\r\n  MenuItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  CircularProgress,\r\n  Tooltip,\r\n  Divider\r\n} from '@mui/material';\r\nimport {\r\n  Close as CloseIcon,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  CalendarToday,\r\n  DeleteOutline as TrashIcon,\r\n  MoreVert as MoreVertIcon,\r\n  Edit as EditIcon,\r\n  ContentCopy as DuplicateIcon,\r\n  Delete as DeleteIcon,\r\n  Schedule as ScheduleIcon,\r\n  ExpandMore,\r\n  ExpandLess,\r\n  InfoOutlined,\r\n  Link as LinkIcon\r\n} from '@mui/icons-material';\r\nimport { format, isValid } from 'date-fns';\r\nimport { Calendar } from '../../types/calendar';\r\nimport { formatCurrency } from '../../utils/formatters';\r\nimport { dialogProps } from '../../styles/dialogStyles';\r\nimport { scrollbarStyles } from '../../styles/scrollbarStyles';\r\nimport ShareButton from '../sharing/ShareButton';\r\nimport TrashCalendarItem from '../trash/TrashCalendarItem';\r\nimport { useCalendars, useTrashCalendars } from '../../hooks/useCalendars';\r\nimport { useAuthState } from '../../contexts/AuthStateContext';\r\n\r\ninterface CalendarListDialogProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  isTrash?: boolean;\r\n  onCalendarClick: (calendarId: string) => void;\r\n  onEditCalendar?: (calendar: Calendar) => void;\r\n  onDuplicateCalendar?: (calendar: Calendar) => void;\r\n  onLinkCalendar?: (calendar: Calendar) => void;\r\n  onDeleteCalendar?: (calendarId: string) => void;\r\n  onUpdateCalendarProperty?: (\r\n    calendarId: string,\r\n    updateCallback: (calendar: Calendar) => Calendar\r\n  ) => Promise<Calendar | undefined>;\r\n  onRestoreCalendar?: (calendarId: string) => Promise<void>;\r\n  onPermanentDeleteCalendar?: (calendarId: string) => Promise<void>;\r\n}\r\n\r\ninterface CompactCalendarItemProps {\r\n  calendar: Calendar;\r\n  isTrash?: boolean;\r\n  isExpanded?: boolean;\r\n  onToggleExpand?: () => void;\r\n  onClick: () => void;\r\n  onEdit?: () => void;\r\n  onDuplicate?: () => void;\r\n  onLink?: () => void;\r\n  onDelete?: () => void;\r\n  onUpdateCalendarProperty?: (\r\n    calendarId: string,\r\n    updateCallback: (calendar: Calendar) => Calendar\r\n  ) => Promise<Calendar | undefined>;\r\n}\r\n\r\nconst safeFormatDate = (\r\n  date: Date | string | undefined | null,\r\n  formatStr: string,\r\n  fallback: string = 'N/A'\r\n): string => {\r\n  if (!date) return fallback;\r\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\r\n  if (!isValid(dateObj)) return fallback;\r\n  try {\r\n    return format(dateObj, formatStr);\r\n  } catch {\r\n    return fallback;\r\n  }\r\n};\r\n\r\nconst CompactCalendarItem: React.FC<CompactCalendarItemProps> = ({\r\n  calendar,\r\n  isTrash,\r\n  isExpanded = false,\r\n  onToggleExpand,\r\n  onClick,\r\n  onEdit,\r\n  onDuplicate,\r\n  onLink,\r\n  onDelete,\r\n  onUpdateCalendarProperty\r\n}) => {\r\n  const theme = useTheme();\r\n  const [menuAnchorEl, setMenuAnchorEl] = useState<HTMLElement | null>(null);\r\n  const menuOpen = Boolean(menuAnchorEl);\r\n\r\n  const pnl = calendar.total_pnl || 0;\r\n  const isPositive = pnl >= 0;\r\n  const winRate = calendar.win_rate || 0;\r\n  const totalTrades = calendar.total_trades || 0;\r\n\r\n  const handleMenuClick = (e: React.MouseEvent<HTMLElement>) => {\r\n    e.stopPropagation();\r\n    setMenuAnchorEl(e.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setMenuAnchorEl(null);\r\n  };\r\n\r\n  const handleEdit = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    handleMenuClose();\r\n    onEdit?.();\r\n  };\r\n\r\n  const handleDuplicate = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    handleMenuClose();\r\n    onDuplicate?.();\r\n  };\r\n\r\n  const handleLink = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    handleMenuClose();\r\n    onLink?.();\r\n  };\r\n\r\n  const handleDelete = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    handleMenuClose();\r\n    onDelete?.();\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        borderRadius: 1,\r\n        bgcolor: theme.palette.mode === 'dark'\r\n          ? alpha(theme.palette.background.paper, 0.4)\r\n          : alpha(theme.palette.background.default, 0.6),\r\n        border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\r\n        transition: 'all 0.2s',\r\n        opacity: isTrash ? 0.8 : 1,\r\n        '&:hover': {\r\n          bgcolor: theme.palette.mode === 'dark'\r\n            ? alpha(theme.palette.background.paper, 0.6)\r\n            : alpha(theme.palette.background.default, 0.9),\r\n          borderColor: alpha(theme.palette.primary.main, 0.3)\r\n        }\r\n      }}\r\n    >\r\n      <Box\r\n        onClick={onClick}\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: 1.5,\r\n          p: 1.5,\r\n          cursor: 'pointer'\r\n        }}\r\n      >\r\n        {/* Hero Image or Placeholder */}\r\n        <Avatar\r\n          src={calendar.hero_image_url || undefined}\r\n          variant=\"rounded\"\r\n          sx={{\r\n            width: 48,\r\n            height: 48,\r\n            flexShrink: 0,\r\n            bgcolor: alpha(theme.palette.primary.main, 0.1),\r\n            '& img': {\r\n              objectFit: 'cover'\r\n            }\r\n          }}\r\n        >\r\n          <CalendarToday sx={{ color: theme.palette.primary.main }} />\r\n        </Avatar>\r\n\r\n        {/* Calendar Info */}\r\n        <Box sx={{ flex: 1, minWidth: 0 }}>\r\n          <Typography\r\n            variant=\"subtitle2\"\r\n            sx={{\r\n              fontWeight: 600,\r\n              overflow: 'hidden',\r\n              textOverflow: 'ellipsis',\r\n              whiteSpace: 'nowrap',\r\n              mb: 0.25\r\n            }}\r\n          >\r\n            {calendar.name}\r\n          </Typography>\r\n          <Stack direction=\"row\" spacing={1.5} alignItems=\"center\">\r\n            <Typography variant=\"caption\" color=\"text.secondary\">\r\n              {totalTrades} trades\r\n            </Typography>\r\n            <Typography variant=\"caption\" color=\"text.secondary\">\r\n              {winRate.toFixed(1)}% win\r\n            </Typography>\r\n            {isTrash && calendar.deleted_at && (\r\n              <Typography variant=\"caption\" color=\"error.main\">\r\n                Deleted {safeFormatDate(calendar.deleted_at, 'MMM d')}\r\n              </Typography>\r\n            )}\r\n          </Stack>\r\n        </Box>\r\n\r\n        {/* P&L */}\r\n        <Box sx={{ textAlign: 'right', flexShrink: 0 }}>\r\n          <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"flex-end\" spacing={0.5}>\r\n            {isPositive ? (\r\n              <TrendingUp sx={{ fontSize: 16, color: 'success.main' }} />\r\n            ) : (\r\n              <TrendingDown sx={{ fontSize: 16, color: 'error.main' }} />\r\n            )}\r\n            <Typography\r\n              variant=\"subtitle2\"\r\n              sx={{\r\n                fontWeight: 600,\r\n                color: isPositive ? 'success.main' : 'error.main'\r\n              }}\r\n            >\r\n              {formatCurrency(pnl)}\r\n            </Typography>\r\n          </Stack>\r\n          <Typography variant=\"caption\" color=\"text.secondary\">\r\n            {safeFormatDate(calendar.updated_at, 'MMM d, yyyy')}\r\n          </Typography>\r\n        </Box>\r\n\r\n        {/* Actions */}\r\n        {!isTrash && (\r\n          <Stack direction=\"row\" alignItems=\"center\" spacing={0.5} sx={{ flexShrink: 0 }}>\r\n            {onToggleExpand && (\r\n              <IconButton\r\n                size=\"small\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onToggleExpand();\r\n                }}\r\n                sx={{ color: 'text.secondary' }}\r\n              >\r\n                {isExpanded ? <ExpandLess fontSize=\"small\" /> : <ExpandMore fontSize=\"small\" />}\r\n              </IconButton>\r\n            )}\r\n            {onUpdateCalendarProperty && (\r\n              <ShareButton\r\n                type=\"calendar\"\r\n                item={calendar}\r\n                onUpdateItemProperty={onUpdateCalendarProperty}\r\n                size=\"small\"\r\n              />\r\n            )}\r\n            <IconButton\r\n              size=\"small\"\r\n              onClick={handleMenuClick}\r\n              sx={{ color: 'text.secondary' }}\r\n            >\r\n              <MoreVertIcon fontSize=\"small\" />\r\n            </IconButton>\r\n            <Menu\r\n              anchorEl={menuAnchorEl}\r\n              open={menuOpen}\r\n              onClose={() => handleMenuClose()}\r\n              onClick={(e) => e.stopPropagation()}\r\n              transformOrigin={{ horizontal: 'right', vertical: 'top' }}\r\n              anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\r\n            >\r\n              <MenuItem onClick={handleEdit}>\r\n                <ListItemIcon>\r\n                  <EditIcon fontSize=\"small\" />\r\n                </ListItemIcon>\r\n                <ListItemText>Edit</ListItemText>\r\n              </MenuItem>\r\n              <MenuItem onClick={handleDuplicate}>\r\n                <ListItemIcon>\r\n                  <DuplicateIcon fontSize=\"small\" />\r\n                </ListItemIcon>\r\n                <ListItemText>Duplicate</ListItemText>\r\n              </MenuItem>\r\n              <MenuItem onClick={handleLink}>\r\n                <ListItemIcon>\r\n                  <LinkIcon fontSize=\"small\" />\r\n                </ListItemIcon>\r\n                <ListItemText>Link Calendar</ListItemText>\r\n              </MenuItem>\r\n              <MenuItem onClick={handleDelete} sx={{ color: 'error.main' }}>\r\n                <ListItemIcon>\r\n                  <DeleteIcon fontSize=\"small\" sx={{ color: 'error.main' }} />\r\n                </ListItemIcon>\r\n                <ListItemText>Delete</ListItemText>\r\n              </MenuItem>\r\n            </Menu>\r\n          </Stack>\r\n        )}\r\n      </Box>\r\n\r\n      {/* Expanded Content */}\r\n      {isExpanded && !isTrash && (\r\n        <Box sx={{ px: 1.5, pb: 1.5 }}>\r\n          <Divider sx={{ mb: 1.5, opacity: 0.6 }} />\r\n          <Stack spacing={1.5}>\r\n            {/* Initial Balance and Win Rate */}\r\n            <Box sx={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(2, 1fr)',\r\n              gap: 1.5\r\n            }}>\r\n              <Box sx={{\r\n                p: 1.5,\r\n                borderRadius: 1,\r\n                bgcolor: alpha(theme.palette.background.default, 0.6)\r\n              }}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\" gutterBottom>\r\n                  Initial Balance\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" sx={{ fontWeight: 600 }}>\r\n                  {formatCurrency(calendar.account_balance || 0)}\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  Current: {formatCurrency((calendar.account_balance || 0) + pnl)}\r\n                </Typography>\r\n              </Box>\r\n\r\n              <Box sx={{\r\n                p: 1.5,\r\n                borderRadius: 1,\r\n                bgcolor: alpha(theme.palette.background.default, 0.6)\r\n              }}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\" gutterBottom>\r\n                  Win Rate\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" sx={{ fontWeight: 600 }}>\r\n                  {winRate.toFixed(1)}%\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  {calendar.win_count || 0}W - {calendar.loss_count || 0}L\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n\r\n            {/* Profit Factor and Max Drawdown */}\r\n            <Box sx={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(2, 1fr)',\r\n              gap: 1.5\r\n            }}>\r\n              <Box sx={{\r\n                p: 1.5,\r\n                borderRadius: 1,\r\n                bgcolor: alpha(theme.palette.background.default, 0.6)\r\n              }}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\" gutterBottom>\r\n                  Profit Factor\r\n                </Typography>\r\n                <Tooltip\r\n                  title={\r\n                    <Box sx={{ p: 1, maxWidth: 300 }}>\r\n                      <Typography variant=\"caption\" gutterBottom>\r\n                        Profit Factor is the ratio of gross profit to gross loss. A value greater than 1 indicates profitable trading.\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" sx={{ mt: 1, display: 'block' }}>\r\n                         Value &gt; 3: Excellent\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" sx={{ display: 'block' }}>\r\n                         Value 2-3: Very Good\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" sx={{ display: 'block' }}>\r\n                         Value 1.5-2: Good\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" sx={{ display: 'block' }}>\r\n                         Value 1-1.5: Marginal\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" sx={{ display: 'block' }}>\r\n                         Value &lt; 1: Unprofitable\r\n                      </Typography>\r\n                    </Box>\r\n                  }\r\n                  arrow\r\n                  placement=\"top\"\r\n                >\r\n                  <Typography variant=\"subtitle2\" sx={{ fontWeight: 600, cursor: 'help', display: 'flex', alignItems: 'center', gap: 0.5 }}>\r\n                    <InfoOutlined sx={{ fontSize: '0.875rem' }} />\r\n                    {(calendar.profit_factor || 0).toFixed(2)}\r\n                  </Typography>\r\n                </Tooltip>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  Avg Win: {formatCurrency(calendar.avg_win || 0)}\r\n                </Typography>\r\n              </Box>\r\n\r\n              <Box sx={{\r\n                p: 1.5,\r\n                borderRadius: 1,\r\n                bgcolor: alpha(theme.palette.background.default, 0.6)\r\n              }}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\" gutterBottom>\r\n                  Max Drawdown\r\n                </Typography>\r\n                <Tooltip\r\n                  title={\r\n                    <Box sx={{ p: 1, maxWidth: 300 }}>\r\n                      <Typography variant=\"caption\" gutterBottom>\r\n                        Maximum drawdown represents the largest peak-to-trough decline in your account balance.\r\n                      </Typography>\r\n                      {(calendar.max_drawdown || 0) > 0 && (\r\n                        <>\r\n                          <Typography variant=\"caption\" sx={{ mt: 1, display: 'block' }}>\r\n                            Recovery needed: {(calendar.drawdown_recovery_needed || 0).toFixed(1)}%\r\n                          </Typography>\r\n                          <Typography variant=\"caption\" sx={{ mt: 1, display: 'block' }}>\r\n                            Duration: {calendar.drawdown_duration || 0} days\r\n                          </Typography>\r\n                          {calendar.drawdown_start_date && calendar.drawdown_end_date && (\r\n                            <Typography variant=\"caption\" sx={{ mt: 1, display: 'block' }}>\r\n                              Period: {safeFormatDate(calendar.drawdown_start_date, 'MMM d')} - {safeFormatDate(calendar.drawdown_end_date, 'MMM d')}\r\n                            </Typography>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                    </Box>\r\n                  }\r\n                  arrow\r\n                  placement=\"top\"\r\n                >\r\n                  <Typography variant=\"subtitle2\" sx={{ fontWeight: 600, cursor: 'help', display: 'flex', alignItems: 'center', gap: 0.5 }}>\r\n                    <InfoOutlined sx={{ fontSize: '0.875rem' }} />\r\n                    {(calendar.max_drawdown || 0).toFixed(1)}%\r\n                  </Typography>\r\n                </Tooltip>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  Avg Loss: {formatCurrency(calendar.avg_loss || 0)}\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n\r\n            {/* Target Progress Section */}\r\n            {(calendar.weekly_target || calendar.monthly_target) && (\r\n              <Box sx={{\r\n                p: 1.5,\r\n                borderRadius: 1,\r\n                bgcolor: alpha(theme.palette.background.default, 0.6)\r\n              }}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\" gutterBottom>\r\n                  Target Progress\r\n                </Typography>\r\n                <Box sx={{\r\n                  display: 'grid',\r\n                  gridTemplateColumns: calendar.weekly_target && calendar.monthly_target\r\n                    ? 'repeat(2, 1fr)'\r\n                    : '1fr',\r\n                  gap: 1.5\r\n                }}>\r\n                  {calendar.weekly_target && (\r\n                    <Box>\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        Weekly\r\n                      </Typography>\r\n                      <Typography variant=\"subtitle2\" sx={{ fontWeight: 600 }}>\r\n                        {Math.min(calendar.weekly_progress ?? 0, 100).toFixed(1)}%\r\n                      </Typography>\r\n                    </Box>\r\n                  )}\r\n                  {calendar.monthly_target && (\r\n                    <Box>\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        Monthly\r\n                      </Typography>\r\n                      <Typography variant=\"subtitle2\" sx={{ fontWeight: 600 }}>\r\n                        {Math.min(calendar.monthly_progress ?? 0, 100).toFixed(1)}%\r\n                      </Typography>\r\n                    </Box>\r\n                  )}\r\n                </Box>\r\n              </Box>\r\n            )}\r\n\r\n            {/* PnL Performance Section */}\r\n            <Box sx={{\r\n              p: 1.5,\r\n              borderRadius: 1,\r\n              bgcolor: alpha(theme.palette.background.default, 0.6)\r\n            }}>\r\n              <Typography variant=\"caption\" color=\"text.secondary\" gutterBottom>\r\n                PnL Performance\r\n              </Typography>\r\n              <Box sx={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(3, 1fr)',\r\n                gap: 1.5\r\n              }}>\r\n                <Box>\r\n                  <Typography variant=\"caption\" color=\"text.secondary\">\r\n                    Weekly\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"subtitle2\"\r\n                    sx={{\r\n                      fontWeight: 600,\r\n                      color: parseFloat(String(calendar.weekly_pnl_percentage || 0)) > 0\r\n                        ? 'success.main'\r\n                        : parseFloat(String(calendar.weekly_pnl_percentage || 0)) < 0\r\n                          ? 'error.main'\r\n                          : 'text.primary'\r\n                    }}\r\n                  >\r\n                    {parseFloat(String(calendar.weekly_pnl_percentage || 0)) > 0 ? '+' : ''}{parseFloat(String(calendar.weekly_pnl_percentage || 0)).toFixed(1)}%\r\n                  </Typography>\r\n                </Box>\r\n                <Box>\r\n                  <Typography variant=\"caption\" color=\"text.secondary\">\r\n                    Monthly\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"subtitle2\"\r\n                    sx={{\r\n                      fontWeight: 600,\r\n                      color: parseFloat(String(calendar.monthly_pnl_percentage || 0)) > 0\r\n                        ? 'success.main'\r\n                        : parseFloat(String(calendar.monthly_pnl_percentage || 0)) < 0\r\n                          ? 'error.main'\r\n                          : 'text.primary'\r\n                    }}\r\n                  >\r\n                    {parseFloat(String(calendar.monthly_pnl_percentage || 0)) > 0 ? '+' : ''}{parseFloat(String(calendar.monthly_pnl_percentage || 0)).toFixed(1)}%\r\n                  </Typography>\r\n                </Box>\r\n                <Box>\r\n                  <Typography variant=\"caption\" color=\"text.secondary\">\r\n                    Yearly\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"subtitle2\"\r\n                    sx={{\r\n                      fontWeight: 600,\r\n                      color: parseFloat(String(calendar.yearly_pnl_percentage || 0)) > 0\r\n                        ? 'success.main'\r\n                        : parseFloat(String(calendar.yearly_pnl_percentage || 0)) < 0\r\n                          ? 'error.main'\r\n                          : 'text.primary'\r\n                    }}\r\n                  >\r\n                    {parseFloat(String(calendar.yearly_pnl_percentage || 0)) > 0 ? '+' : ''}{parseFloat(String(calendar.yearly_pnl_percentage || 0)).toFixed(1)}%\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          </Stack>\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst CalendarListDialog: React.FC<CalendarListDialogProps> = ({\r\n  open,\r\n  onClose,\r\n  isTrash = false,\r\n  onCalendarClick,\r\n  onEditCalendar,\r\n  onDuplicateCalendar,\r\n  onLinkCalendar,\r\n  onDeleteCalendar,\r\n  onUpdateCalendarProperty,\r\n  onRestoreCalendar,\r\n  onPermanentDeleteCalendar\r\n}) => {\r\n  const theme = useTheme();\r\n  const { user } = useAuthState();\r\n  const [expandedCalendarIds, setExpandedCalendarIds] = useState<Set<string>>(new Set());\r\n\r\n  // Fetch fresh data when dialog opens\r\n  const {\r\n    calendars: fetchedCalendars,\r\n    isLoading: loadingCalendars,\r\n    refresh: refreshCalendars\r\n  } = useCalendars(open && !isTrash ? user?.uid : undefined);\r\n\r\n  const {\r\n    trashCalendars: fetchedTrashCalendars,\r\n    isLoading: loadingTrash,\r\n    refresh: refreshTrash\r\n  } = useTrashCalendars(open && isTrash ? user?.uid : undefined);\r\n\r\n  // Refresh data when dialog opens\r\n  useEffect(() => {\r\n    if (open) {\r\n      if (isTrash) {\r\n        refreshTrash();\r\n      } else {\r\n        refreshCalendars();\r\n      }\r\n    }\r\n  }, [open, isTrash, refreshCalendars, refreshTrash]);\r\n\r\n  // Get the appropriate data and loading state\r\n  const calendars = isTrash ? fetchedTrashCalendars : (fetchedCalendars || []);\r\n  const isLoading = isTrash ? loadingTrash : loadingCalendars;\r\n  const title = isTrash ? 'Trash' : 'All Calendars';\r\n\r\n  const handleCalendarClick = (calendarId: string) => {\r\n    onCalendarClick(calendarId);\r\n    onClose();\r\n  };\r\n\r\n  const handleToggleExpand = (calendarId: string) => {\r\n    setExpandedCalendarIds(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(calendarId)) {\r\n        newSet.delete(calendarId);\r\n      } else {\r\n        newSet.add(calendarId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const handleDeleteClick = (calendar: Calendar) => {\r\n    onClose();\r\n    onDeleteCalendar?.(calendar.id);\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n      {...dialogProps}\r\n    >\r\n      <DialogTitle\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'space-between',\r\n          pb: 1\r\n        }}\r\n      >\r\n        <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\r\n          {isTrash ? (\r\n            <TrashIcon sx={{ color: 'text.secondary' }} />\r\n          ) : (\r\n            <CalendarToday sx={{ color: 'primary.main' }} />\r\n          )}\r\n          <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\r\n            {title}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            ({calendars.length})\r\n          </Typography>\r\n        </Stack>\r\n        <IconButton onClick={onClose} size=\"small\">\r\n          <CloseIcon fontSize=\"small\" />\r\n        </IconButton>\r\n      </DialogTitle>\r\n\r\n      <DialogContent sx={{ p: 2, overflowX: 'hidden' }}>\r\n        {isLoading ? (\r\n          <Box\r\n            sx={{\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n              py: 6\r\n            }}\r\n          >\r\n            <CircularProgress size={32} />\r\n          </Box>\r\n        ) : calendars.length === 0 ? (\r\n          <Box\r\n            sx={{\r\n              textAlign: 'center',\r\n              py: 6,\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center'\r\n            }}\r\n          >\r\n            {isTrash ? (\r\n              <>\r\n                <TrashIcon sx={{ fontSize: 48, color: 'text.secondary', mb: 2 }} />\r\n                <Typography variant=\"subtitle2\" sx={{ fontWeight: 600, mb: 1 }}>\r\n                  Trash is empty\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ maxWidth: 280 }}>\r\n                  Deleted calendars will appear here for 30 days before being permanently removed\r\n                </Typography>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <CalendarToday sx={{ fontSize: 48, color: 'text.secondary', mb: 2 }} />\r\n                <Typography variant=\"subtitle2\" sx={{ fontWeight: 600, mb: 1 }}>\r\n                  No calendars yet\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ maxWidth: 280 }}>\r\n                  Create your first trading calendar to start tracking your trades\r\n                </Typography>\r\n              </>\r\n            )}\r\n          </Box>\r\n        ) : isTrash ? (\r\n          <Stack\r\n            spacing={1.5}\r\n            sx={{\r\n              maxHeight: '60vh',\r\n              overflowY: 'auto',\r\n              overflowX: 'hidden',\r\n              ...scrollbarStyles(theme)\r\n            }}\r\n          >\r\n            {/* Trash Header */}\r\n            <Box\r\n              sx={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: 1.5,\r\n                p: 1.5,\r\n                borderRadius: 2,\r\n                bgcolor: alpha(theme.palette.warning.main, 0.08),\r\n                border: `1px solid ${alpha(theme.palette.warning.main, 0.2)}`\r\n              }}\r\n            >\r\n              <ScheduleIcon sx={{ color: 'warning.main', fontSize: 20 }} />\r\n              <Box>\r\n                <Typography variant=\"body2\" fontWeight={600} color=\"warning.main\">\r\n                  Items will be permanently deleted after 30 days\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  Restore calendars before they're automatically removed\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n\r\n            {/* Trash Items */}\r\n            {calendars.map((calendar) => (\r\n              <TrashCalendarItem\r\n                key={calendar.id}\r\n                calendar={calendar}\r\n                onRestore={onRestoreCalendar || (async () => {})}\r\n                onPermanentDelete={onPermanentDeleteCalendar || (async () => {})}\r\n              />\r\n            ))}\r\n          </Stack>\r\n        ) : (\r\n          <Stack\r\n            spacing={1}\r\n            sx={{\r\n              maxHeight: '60vh',\r\n              overflowY: 'auto',\r\n              overflowX: 'hidden',\r\n              p:1,\r\n              ...scrollbarStyles(theme)\r\n            }}\r\n          >\r\n            {calendars.map((calendar) => (\r\n              <CompactCalendarItem\r\n                key={calendar.id}\r\n                calendar={calendar}\r\n                isTrash={isTrash}\r\n                isExpanded={expandedCalendarIds.has(calendar.id)}\r\n                onToggleExpand={() => handleToggleExpand(calendar.id)}\r\n                onClick={() => handleCalendarClick(calendar.id)}\r\n                onEdit={() => onEditCalendar?.(calendar)}\r\n                onDuplicate={() => {\r\n                  \r\n                  onDuplicateCalendar?.(calendar);\r\n                }}\r\n                onLink={() => onLinkCalendar?.(calendar)}\r\n                onDelete={() => handleDeleteClick(calendar)}\r\n                onUpdateCalendarProperty={onUpdateCalendarProperty}\r\n              />\r\n            ))}\r\n          </Stack>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default CalendarListDialog;\r\n","import React, { useState, useEffect, useMemo } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Card,\r\n  CardContent,\r\n  Stack,\r\n  useTheme,\r\n  useMediaQuery,\r\n  alpha,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  IconButton\r\n} from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  CalendarToday,\r\n  Event as EventIcon,\r\n  Delete as DeleteIcon,\r\n  Edit as EditIcon,\r\n  SmartToy as AIIcon,\r\n  DeleteOutline as TrashIcon,\r\n  Close as CloseIcon\r\n} from '@mui/icons-material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Calendar } from '../types/calendar';\r\nimport { Trade } from '../types/dualWrite';\r\nimport { formatCurrency } from '../utils/formatters';\r\nimport { TradeWithCalendarName, useRecentTrades } from '../hooks/useRecentTrades';\r\nimport { useUpcomingEconomicEvents } from '../hooks/useUpcomingEconomicEvents';\r\nimport { useCalendars, useTrashCalendars } from '../hooks/useCalendars';\r\nimport { useCalendarTrades } from '../hooks/useCalendarTrades';\r\n\r\nimport Shimmer from '../components/Shimmer';\r\nimport CalendarCard from '../components/CalendarCard';\r\nimport CalendarCardShimmer from '../components/CalendarCardShimmer';\r\nimport PerformanceCharts from '../components/PerformanceCharts';\r\nimport RoundedTabs, { TabPanel } from '../components/common/RoundedTabs';\r\nimport { logger } from '../utils/logger';\r\nimport { useAuth } from '../contexts/SupabaseAuthContext';\r\nimport LoginDialog from '../components/auth/LoginDialog';\r\nimport TradeCard from '../components/aiChat/TradeCard';\r\nimport EconomicCalendarDrawer from '../components/economicCalendar/EconomicCalendarDrawer';\r\nimport EconomicEventListItem from '../components/economicCalendar/EconomicEventListItem';\r\nimport EconomicEventShimmer from '../components/economicCalendar/EconomicEventShimmer';\r\nimport { scrollbarStyles } from '../styles/scrollbarStyles';\r\nimport { dialogProps } from '../styles/dialogStyles';\r\nimport CalendarFormDialog, { CalendarFormData } from '../components/CalendarFormDialog';\r\nimport AnimatedBackground from '../components/common/AnimatedBackground';\r\nimport { DuplicateCalendarDialog } from '../components/dialogs/DuplicateCalendarDialog';\r\nimport { CalendarLinkDialog } from '../components/dialogs/CalendarLinkDialog';\r\nimport CalendarListDialog from '../components/dialogs/CalendarListDialog';\r\nimport AIChatDrawer from '../components/aiChat/AIChatDrawer';\r\nimport TradeFormDialog from '../components/trades/TradeFormDialog';\r\nimport { NewTradeForm } from '../components/trades';\r\nimport { createNewTradeData } from './TradeCalendarPage';\r\nimport { DynamicRiskSettings } from '../utils/dynamicRiskUtils';\r\nimport * as calendarService from '../services/calendarService';\r\nimport { CalendarManagementProps } from '../App';\r\nimport NotesDrawer from '../components/notes/NotesDrawer';\r\nimport TrashCalendarItem from '../components/trash/TrashCalendarItem';\r\nimport { Schedule as ScheduleIcon } from '@mui/icons-material';\r\n\r\ninterface HomeProps extends CalendarManagementProps {}\r\n\r\nconst Home: React.FC<HomeProps> = ({\r\n  calendars,\r\n  isLoading = false,\r\n  onCreateCalendar,\r\n  onDuplicateCalendar,\r\n  onDeleteCalendar,\r\n  onUpdateCalendar\r\n}) => {\r\n  const theme = useTheme();\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n\r\n  // Use custom hooks for data fetching with SWR caching\r\n  const { economicEvents, isLoading: loadingEvents } = useUpcomingEconomicEvents({\r\n    impacts: ['High', 'Medium'],\r\n    refreshInterval: 300000, // Refresh every 5 minutes\r\n  });\r\n  const { recentTrades: recentTrades_, isLoading: loadingTrades } = useRecentTrades(user?.uid, calendars, {\r\n    limit: 4,\r\n  });\r\n  // Track if trash tab has been selected (for lazy loading)\r\n  const [hasLoadedTrash, setHasLoadedTrash] = useState(false);\r\n\r\n  // Get refresh function for calendars (SWR will dedupe with parent's data)\r\n  const { refresh: refreshCalendars } = useCalendars(user?.uid);\r\n\r\n  const {\r\n    trashCalendars: fetchedTrashCalendars,\r\n    isLoading: loadingTrash,\r\n    refresh: refreshTrashCalendars\r\n  } = useTrashCalendars(hasLoadedTrash ? user?.uid : undefined);\r\n\r\n  const [economicCalendarOpen, setEconomicCalendarOpen] = useState(false);\r\n  const [isCreateCalendarDialogOpen, setIsCreateCalendarDialogOpen] = useState(false);\r\n  const [isCreatingCalendar, setIsCreatingCalendar] = useState(false);\r\n  const [showLoginDialog, setShowLoginDialog] = useState(false);\r\n\r\n  // Trade creation dialog state\r\n  const [isTradeFormOpen, setIsTradeFormOpen] = useState(false);\r\n  const [newTrade, setNewTrade] = useState<NewTradeForm | null>(null);\r\n  const [selectedTradeCalendarId, setSelectedTradeCalendarId] = useState<string>('');\r\n  const [recentTrades, setRecentTrades] = useState< TradeWithCalendarName[] | undefined>([]);\r\n  // AI Chat drawer state\r\n  const [isAIChatOpen, setIsAIChatOpen] = useState(false);\r\n\r\n  // Notes drawer state\r\n  const [isNotesDrawerOpen, setIsNotesDrawerOpen] = useState(false);\r\n\r\n  // Calendar tabs state (0 = Recent, 1 = Trash)\r\n  const [calendarTabIndex, setCalendarTabIndex] = useState(0);\r\n\r\n  // Calendar list dialog state\r\n  const [isCalendarListDialogOpen, setIsCalendarListDialogOpen] = useState(false);\r\n\r\n  // Image zoom state\r\n  const [zoomedImage, setZoomedImage] = useState<string>('');\r\n\r\n  // Calendar dialog states\r\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\r\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\r\n  const [isDuplicateOptionsDialogOpen, setIsDuplicateOptionsDialogOpen] = useState(false);\r\n  const [isLinkDialogOpen, setIsLinkDialogOpen] = useState(false);\r\n  const [calendarToDelete, setCalendarToDelete] = useState<string | null>(null);\r\n  const [calendarToEdit, setCalendarToEdit] = useState<Calendar | null>(null);\r\n  const [calendarToDuplicate, setCalendarToDuplicate] = useState<Calendar | null>(null);\r\n  const [calendarToLink, setCalendarToLink] = useState<Calendar | null>(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [isDuplicating, setIsDuplicating] = useState(false);\r\n  const [isLinking, setIsLinking] = useState(false);\r\n\r\n  // Check if screen is large (xl breakpoint = 1536px+)\r\n  const isLargeScreen = useMediaQuery(theme.breakpoints.up('xl'));\r\n\r\n  useEffect(()=> {\r\n    setRecentTrades(recentTrades_)\r\n  }, [recentTrades_])\r\n\r\n  // Get recently updated calendars (top 2 for large screens, top 1 for smaller screens)\r\n  // Filter out deleted calendars from recent\r\n  const recentCalendars = useMemo(() => {\r\n    const limit = isLargeScreen ? 2 : 1;\r\n    return [...calendars]\r\n      .filter(c => !c.deleted_at)\r\n      .sort((a, b) => new Date(b.updated_at).getTime() - new Date(a.updated_at).getTime())\r\n      .slice(0, limit);\r\n  }, [calendars, isLargeScreen]);\r\n\r\n  // Get trash calendars (soft-deleted) - use fetched data\r\n  const trashCalendars = useMemo(() => {\r\n    const limit = isLargeScreen ? 2 : 1;\r\n    return [...fetchedTrashCalendars]\r\n      .sort((a, b) => new Date(b.deleted_at!).getTime() - new Date(a.deleted_at!).getTime())\r\n      .slice(0, limit);\r\n  }, [fetchedTrashCalendars, isLargeScreen]);\r\n\r\n  // Calendar action handlers - open dialogs for edit/duplicate/delete\r\n  const handleEditCalendar = (calendar: Calendar) => {\r\n    setCalendarToEdit(calendar);\r\n    setIsEditDialogOpen(true);\r\n  };\r\n\r\n  const handleDuplicateCalendar = (calendar: Calendar) => {\r\n    setCalendarToDuplicate(calendar);\r\n    setIsDuplicateOptionsDialogOpen(true);\r\n  };\r\n\r\n  const handleLinkCalendar = (calendar: Calendar) => {\r\n    setCalendarToLink(calendar);\r\n    setIsLinkDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteCalendar = (calendarId: string) => {\r\n    setCalendarToDelete(calendarId);\r\n    setIsDeleteDialogOpen(true);\r\n  };\r\n\r\n  // Trash action handlers\r\n  const handleRestoreCalendar = async (calendarId: string) => {\r\n    try {\r\n      await calendarService.restoreCalendar(calendarId);\r\n      refreshTrashCalendars();\r\n    } catch (error) {\r\n      logger.error('Error restoring calendar:', error);\r\n    }\r\n  };\r\n\r\n  const handlePermanentDeleteCalendar = async (calendarId: string) => {\r\n    try {\r\n      await calendarService.permanentlyDeleteCalendar(calendarId);\r\n      refreshTrashCalendars();\r\n    } catch (error) {\r\n      logger.error('Error permanently deleting calendar:', error);\r\n    }\r\n  };\r\n\r\n  // Update calendar property handler for share button\r\n  const handleUpdateCalendarProperty = async (\r\n    calendarId: string,\r\n    updateCallback: (calendar: Calendar) => Calendar\r\n  ): Promise<Calendar | undefined> => {\r\n    const targetCalendar = calendars.find(c => c.id === calendarId);\r\n    if (!targetCalendar) {\r\n      console.error(`Calendar with ID ${calendarId} not found`);\r\n      return undefined;\r\n    }\r\n\r\n    const updatedCalendar = updateCallback(targetCalendar);\r\n    onUpdateCalendar(calendarId, updatedCalendar);\r\n    return updatedCalendar;\r\n  };\r\n\r\n  // Dialog submit handlers\r\n  const handleEditCalendarSubmit = async (data: CalendarFormData) => {\r\n    if (!calendarToEdit) return;\r\n\r\n    setIsEditing(true);\r\n    try {\r\n      await onUpdateCalendar(calendarToEdit.id, {\r\n        name: data.name,\r\n        account_balance: data.account_balance,\r\n        max_daily_drawdown: data.max_daily_drawdown,\r\n        weekly_target: data.weekly_target,\r\n        monthly_target: data.monthly_target,\r\n        yearly_target: data.yearly_target,\r\n        risk_per_trade: data.risk_per_trade,\r\n        dynamic_risk_enabled: data.dynamic_risk_enabled,\r\n        increased_risk_percentage: data.increased_risk_percentage,\r\n        profit_threshold_percentage: data.profit_threshold_percentage,\r\n        hero_image_url: data.hero_image_url,\r\n        hero_image_attribution: data.hero_image_attribution\r\n      });\r\n      setIsEditDialogOpen(false);\r\n      setCalendarToEdit(null);\r\n    } catch (error) {\r\n      logger.error('Error updating calendar:', error);\r\n    } finally {\r\n      setIsEditing(false);\r\n    }\r\n  };\r\n\r\n  const handleDuplicateOptionSelect = async (withContent: boolean) => {\r\n    if (!calendarToDuplicate) return;\r\n\r\n    setIsDuplicating(true);\r\n    try {\r\n      const newName = `${calendarToDuplicate.name} (Copy)`;\r\n      await onDuplicateCalendar(calendarToDuplicate.id, newName, withContent);\r\n      setIsDuplicateOptionsDialogOpen(false);\r\n      setCalendarToDuplicate(null);\r\n    } catch (error) {\r\n      logger.error('Error duplicating calendar:', error);\r\n    } finally {\r\n      setIsDuplicating(false);\r\n    }\r\n  };\r\n\r\n  const handleLinkSubmit = async (targetCalendarId: string) => {\r\n    if (!calendarToLink) return;\r\n\r\n    setIsLinking(true);\r\n    try {\r\n      await calendarService.linkCalendar(calendarToLink.id, targetCalendarId);\r\n      await refreshCalendars();\r\n      setIsLinkDialogOpen(false);\r\n      setCalendarToLink(null);\r\n    } catch (error) {\r\n      logger.error('Error linking calendar:', error);\r\n      throw error;\r\n    } finally {\r\n      setIsLinking(false);\r\n    }\r\n  };\r\n\r\n  const handleUnlinkSubmit = async () => {\r\n    if (!calendarToLink) return;\r\n\r\n    setIsLinking(true);\r\n    try {\r\n      await calendarService.unlinkCalendar(calendarToLink.id);\r\n      await refreshCalendars();\r\n      setIsLinkDialogOpen(false);\r\n      setCalendarToLink(null);\r\n    } catch (error) {\r\n      logger.error('Error unlinking calendar:', error);\r\n      throw error;\r\n    } finally {\r\n      setIsLinking(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (calendarToDelete) {\r\n      await onDeleteCalendar(calendarToDelete);\r\n      setCalendarToDelete(null);\r\n    }\r\n    setIsDeleteDialogOpen(false);\r\n  };\r\n\r\n  // Calculate dashboard statistics from calendars\r\n  const dashboardStats = useMemo(() => {\r\n    const totalCalendars = calendars.length;\r\n    const activeCalendars = calendars.filter(c => (c.total_trades ?? 0) > 0).length;\r\n    const totalTrades = calendars.reduce((sum, cal) => sum + (cal.total_trades ?? 0), 0);\r\n    const totalWins = calendars.reduce((sum, cal) => sum + (cal.win_count ?? 0), 0);\r\n    const totalLosses = calendars.reduce((sum, cal) => sum + (cal.loss_count ?? 0), 0);\r\n    const totalPnL = calendars.reduce((sum, cal) => sum + (cal.total_pnl ?? 0), 0);\r\n\r\n    // Calculate win rate from total wins and losses\r\n    const winRate = (totalWins + totalLosses) > 0\r\n      ? ((totalWins / (totalWins + totalLosses)) * 100).toFixed(1)\r\n      : '0.0';\r\n\r\n    return {\r\n      totalCalendars,\r\n      activeCalendars,\r\n      totalTrades,\r\n      totalWins,\r\n      totalLosses,\r\n      winRate,\r\n      totalPnL\r\n    };\r\n  }, [calendars]);\r\n\r\n  const selectedTradeCalendar = useMemo(() => {\r\n    if (!calendars.length || !selectedTradeCalendarId) return null;\r\n    return calendars.find(c => c.id === selectedTradeCalendarId) || null;\r\n  }, [calendars, selectedTradeCalendarId]);\r\n\r\n \r\n\r\n  const dynamicRiskSettingsForTrade: DynamicRiskSettings = useMemo(() => {\r\n    if (!selectedTradeCalendar) {\r\n      return { account_balance: 0 };\r\n    }\r\n    return {\r\n      account_balance: selectedTradeCalendar.account_balance,\r\n      risk_per_trade: selectedTradeCalendar.risk_per_trade,\r\n      dynamic_risk_enabled: selectedTradeCalendar.dynamic_risk_enabled,\r\n      increased_risk_percentage: selectedTradeCalendar.increased_risk_percentage,\r\n      profit_threshold_percentage: selectedTradeCalendar.profit_threshold_percentage\r\n    };\r\n  }, [selectedTradeCalendar]);\r\n\r\n  const tagsForTradeDialog = selectedTradeCalendar?.tags || [];\r\n  const requiredTagGroupsForTradeDialog = selectedTradeCalendar?.required_tag_groups || [];\r\n  const accountBalanceForTradeDialog = selectedTradeCalendar?.account_balance ?? 0;\r\n\r\n  const handleCalendarTabChange = (_event: React.SyntheticEvent, newValue: number) => {\r\n    setCalendarTabIndex(newValue);\r\n    // Refresh data in background when switching tabs\r\n    if (newValue === 0) {\r\n      // Switching to Recent Calendars - refresh calendars\r\n      refreshCalendars();\r\n    } else if (newValue === 1) {\r\n      // Switching to Trash - lazy load on first visit, then refresh\r\n      if (!hasLoadedTrash) {\r\n        setHasLoadedTrash(true);\r\n      } else {\r\n        refreshTrashCalendars();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCalendarClick = (calendarId: string) => {\r\n    navigate(`/calendar/${calendarId}`);\r\n  };\r\n\r\n  const handleTradeClick = (trade: Trade & { calendarName: string }) => {\r\n    navigate(`/calendar/${trade.calendar_id}`);\r\n  };\r\n\r\n  const handleCreateCalendar = () => {\r\n    if (!user) {\r\n      setShowLoginDialog(true);\r\n      return;\r\n    }\r\n    setIsCreateCalendarDialogOpen(true);\r\n  };\r\n\r\n  const handleCreateCalendarSubmit = async (data: CalendarFormData) => {\r\n    setIsCreatingCalendar(true);\r\n    try {\r\n      const newCalendar = await onCreateCalendar(\r\n        data.name,\r\n        data.account_balance,\r\n        data.max_daily_drawdown,\r\n        data.weekly_target,\r\n        data.monthly_target,\r\n        data.yearly_target,\r\n        data.risk_per_trade,\r\n        data.dynamic_risk_enabled,\r\n        data.increased_risk_percentage,\r\n        data.profit_threshold_percentage,\r\n        data.hero_image_url,\r\n        data.hero_image_attribution\r\n      );\r\n\r\n      setIsCreateCalendarDialogOpen(false);\r\n      navigate(`/calendar/${newCalendar.id}`);\r\n    } catch (error) {\r\n      logger.error('Error creating calendar:', error);\r\n    } finally {\r\n      setIsCreatingCalendar(false);\r\n    }\r\n  };\r\n\r\n  const handleTradeCalendarChange = (calendarId: string) => {\r\n    setSelectedTradeCalendarId(calendarId);\r\n  };\r\n\r\n  const handleAddTradeFromHome = async (trade: Trade & { id?: string }) => {\r\n    const calendarId = trade.calendar_id || selectedTradeCalendar?.id || selectedTradeCalendarId;\r\n    if (!calendarId) {\r\n      throw new Error('Calendar ID is required');\r\n    }\r\n    await calendarService.addTrade(calendarId, { ...trade, calendar_id: calendarId });\r\n    const calendarName = selectedTradeCalendar?.name || '';\r\n    const tradeWithCalendarName: TradeWithCalendarName = { ...trade, calendarName };\r\n    setRecentTrades(prev => {\r\n      return [tradeWithCalendarName, ...(prev || [])];\r\n    });\r\n  };\r\n\r\n  const handleCreateTrade = () => {\r\n    if (!user) {\r\n      setShowLoginDialog(true);\r\n      return;\r\n    }\r\n    if (calendars.length === 0) {\r\n      return; // Button should be disabled, but just in case\r\n    }\r\n    // Do not preselect calendar; user must choose one in the dialog\r\n    setSelectedTradeCalendarId('');\r\n    setNewTrade(createNewTradeData());\r\n    setIsTradeFormOpen(true);\r\n  };\r\n\r\n  const handleTradeFormClose = () => {\r\n    if (newTrade && newTrade.pending_images) {\r\n      newTrade.pending_images.forEach(image => {\r\n        URL.revokeObjectURL(image.preview);\r\n      });\r\n      setNewTrade(null);\r\n    }\r\n    setIsTradeFormOpen(false);\r\n  };\r\n\r\n  const handleTradeFormCancel = () => {\r\n    setIsTradeFormOpen(false);\r\n  };\r\n\r\n  const handleSetNewMainTrade = (updater: (trade: NewTradeForm) => NewTradeForm | null) => {\r\n    setNewTrade(prev => {\r\n      const base = prev ?? createNewTradeData();\r\n      return updater(base);\r\n    });\r\n  };\r\n\r\n  const handleLoginDialogClose = () => {\r\n    setShowLoginDialog(false);\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        minHeight: '100vh',\r\n        bgcolor: 'custom.pageBackground',\r\n        position: 'relative',\r\n        overflow: 'hidden',\r\n      }}\r\n    >\r\n      <AnimatedBackground />\r\n\r\n      <Box\r\n        sx={{\r\n          pt: { xs: 2, sm: 3, md: 4 },\r\n          pb: { xs: 2, sm: 3, md: 4 },\r\n          px: { xs: 2, sm: 3, md: 4 },\r\n          maxWidth: '1400px',\r\n          mx: 'auto',\r\n          position: 'relative',\r\n          zIndex: 1,\r\n        }}\r\n      >\r\n        {/* Header Section */}\r\n        <Box sx={{ mb: { xs: 3, sm: 4 } }}>\r\n          <Typography\r\n            variant=\"h4\"\r\n            sx={{\r\n              fontWeight: 700,\r\n              mb: 1,\r\n              fontSize: { xs: '1.75rem', sm: '2rem', md: '2.125rem' }\r\n            }}\r\n          >\r\n            Dashboard\r\n          </Typography>\r\n          <Typography\r\n            variant=\"body1\"\r\n            color=\"text.secondary\"\r\n            sx={{ fontSize: { xs: '0.875rem', sm: '1rem' } }}\r\n          >\r\n            Welcome back! Here's what's happening.\r\n          </Typography>\r\n        </Box>\r\n\r\n        {/* Statistics Cards */}\r\n        <Box\r\n          sx={{\r\n            display: 'grid',\r\n            gridTemplateColumns: { xs: '1fr', sm: 'repeat(2, 1fr)', lg: 'repeat(4, 1fr)' },\r\n            gap: { xs: 2, sm: 2.5, md: 3 },\r\n            mb: { xs: 3, sm: 4 }\r\n          }}\r\n        >\r\n          {/* Total Calendars */}\r\n          <Card sx={{ borderRadius: 2, bgcolor: 'background.paper' }}>\r\n            <CardContent sx={{ p: { xs: 2, sm: 2.5, md: 3 } }}>\r\n              <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"flex-start\">\r\n                <Box>\r\n                  <Typography\r\n                    variant=\"body2\"\r\n                    color=\"text.secondary\"\r\n                    gutterBottom\r\n                    sx={{ fontSize: { xs: '0.75rem', sm: '0.875rem' } }}\r\n                  >\r\n                    Total Calendars\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"h4\"\r\n                    sx={{\r\n                      fontWeight: 700,\r\n                      mb: 0.5,\r\n                      fontSize: { xs: '1.5rem', sm: '1.75rem', md: '2.125rem' }\r\n                    }}\r\n                  >\r\n                    {dashboardStats.totalCalendars}\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"caption\"\r\n                    color=\"text.secondary\"\r\n                    sx={{ fontSize: { xs: '0.6875rem', sm: '0.75rem' } }}\r\n                  >\r\n                    {dashboardStats.activeCalendars} active\r\n                  </Typography>\r\n                </Box>\r\n                <Box\r\n                  sx={{\r\n                    p: { xs: 1, sm: 1.25, md: 1.5 },\r\n                    borderRadius: 2,\r\n                    bgcolor: alpha(theme.palette.primary.main, 0.1)\r\n                  }}\r\n                >\r\n                  <CalendarToday sx={{\r\n                    color: theme.palette.primary.main,\r\n                    fontSize: { xs: 24, sm: 26, md: 28 }\r\n                  }} />\r\n                </Box>\r\n              </Stack>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Total Trades */}\r\n          <Card sx={{ borderRadius: 2, bgcolor: 'background.paper' }}>\r\n            <CardContent sx={{ p: { xs: 2, sm: 2.5, md: 3 } }}>\r\n              <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"flex-start\">\r\n                <Box>\r\n                  <Typography\r\n                    variant=\"body2\"\r\n                    color=\"text.secondary\"\r\n                    gutterBottom\r\n                    sx={{ fontSize: { xs: '0.75rem', sm: '0.875rem' } }}\r\n                  >\r\n                    Total Trades\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"h4\"\r\n                    sx={{\r\n                      fontWeight: 700,\r\n                      mb: 0.5,\r\n                      fontSize: { xs: '1.5rem', sm: '1.75rem', md: '2.125rem' }\r\n                    }}\r\n                  >\r\n                    {dashboardStats.totalTrades}\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"caption\"\r\n                    color=\"text.secondary\"\r\n                    sx={{ fontSize: { xs: '0.6875rem', sm: '0.75rem' } }}\r\n                  >\r\n                    Across all calendars\r\n                  </Typography>\r\n                </Box>\r\n                <Box\r\n                  sx={{\r\n                    p: { xs: 1, sm: 1.25, md: 1.5 },\r\n                    borderRadius: 2,\r\n                    bgcolor: alpha(theme.palette.info.main, 0.1)\r\n                  }}\r\n                >\r\n                  <TrendingUp sx={{\r\n                    color: theme.palette.info.main,\r\n                    fontSize: { xs: 24, sm: 26, md: 28 }\r\n                  }} />\r\n                </Box>\r\n              </Stack>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Win Rate */}\r\n          <Card sx={{ borderRadius: 2, bgcolor: 'background.paper' }}>\r\n            <CardContent sx={{ p: { xs: 2, sm: 2.5, md: 3 } }}>\r\n              <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"flex-start\">\r\n                <Box>\r\n                  <Typography\r\n                    variant=\"body2\"\r\n                    color=\"text.secondary\"\r\n                    gutterBottom\r\n                    sx={{ fontSize: { xs: '0.75rem', sm: '0.875rem' } }}\r\n                  >\r\n                    Win Rate\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"h4\"\r\n                    sx={{\r\n                      fontWeight: 700,\r\n                      mb: 0.5,\r\n                      fontSize: { xs: '1.5rem', sm: '1.75rem', md: '2.125rem' }\r\n                    }}\r\n                  >\r\n                    {dashboardStats.winRate}%\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"caption\"\r\n                    color=\"text.secondary\"\r\n                    sx={{ fontSize: { xs: '0.6875rem', sm: '0.75rem' } }}\r\n                  >\r\n                    Overall performance\r\n                  </Typography>\r\n                </Box>\r\n                <Box\r\n                  sx={{\r\n                    p: { xs: 1, sm: 1.25, md: 1.5 },\r\n                    borderRadius: 2,\r\n                    bgcolor: alpha(theme.palette.success.main, 0.1)\r\n                  }}\r\n                >\r\n                  <TrendingUp sx={{\r\n                    color: theme.palette.success.main,\r\n                    fontSize: { xs: 24, sm: 26, md: 28 }\r\n                  }} />\r\n                </Box>\r\n              </Stack>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Total P&L */}\r\n          <Card sx={{ borderRadius: 2, bgcolor: 'background.paper' }}>\r\n            <CardContent sx={{ p: { xs: 2, sm: 2.5, md: 3 } }}>\r\n              <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"flex-start\">\r\n                <Box>\r\n                  <Typography\r\n                    variant=\"body2\"\r\n                    color=\"text.secondary\"\r\n                    gutterBottom\r\n                    sx={{ fontSize: { xs: '0.75rem', sm: '0.875rem' } }}\r\n                  >\r\n                    Total P&L\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"h4\"\r\n                    sx={{\r\n                      fontWeight: 700,\r\n                      mb: 0.5,\r\n                      fontSize: { xs: '1.5rem', sm: '1.75rem', md: '2.125rem' }\r\n                    }}\r\n                  >\r\n                    {formatCurrency(dashboardStats.totalPnL)}\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"caption\"\r\n                    color={dashboardStats.totalPnL >= 0 ? 'success.main' : 'error.main'}\r\n                    sx={{ fontSize: { xs: '0.6875rem', sm: '0.75rem' } }}\r\n                  >\r\n                    {dashboardStats.totalPnL >= 0 ? '' : ''} All time\r\n                  </Typography>\r\n                </Box>\r\n                <Box\r\n                  sx={{\r\n                    p: { xs: 1, sm: 1.25, md: 1.5 },\r\n                    borderRadius: 2,\r\n                    bgcolor: alpha(\r\n                      dashboardStats.totalPnL >= 0 ? theme.palette.success.main : theme.palette.error.main,\r\n                      0.1\r\n                    )\r\n                  }}\r\n                >\r\n                  {dashboardStats.totalPnL >= 0 ? (\r\n                    <TrendingUp sx={{\r\n                      color: theme.palette.success.main,\r\n                      fontSize: { xs: 24, sm: 26, md: 28 }\r\n                    }} />\r\n                  ) : (\r\n                    <TrendingDown sx={{\r\n                      color: theme.palette.error.main,\r\n                      fontSize: { xs: 24, sm: 26, md: 28 }\r\n                    }} />\r\n                  )}\r\n                </Box>\r\n              </Stack>\r\n            </CardContent>\r\n          </Card>\r\n        </Box>\r\n\r\n        {/* Quick Actions Section */}\r\n        <Box sx={{ mb: { xs: 3, sm: 4 } }}>\r\n          <Typography\r\n            variant=\"h6\"\r\n            sx={{\r\n              fontWeight: 600,\r\n              mb: { xs: 2, sm: 3 },\r\n              fontSize: { xs: '1rem', sm: '1.125rem', md: '1.25rem' }\r\n            }}\r\n          >\r\n            Quick Actions\r\n          </Typography>\r\n          <Box\r\n            sx={{\r\n              display: 'grid',\r\n              gridTemplateColumns: { xs: 'repeat(2, 1fr)', md: 'repeat(4, 1fr)' },\r\n              gap: { xs: 1.5, sm: 2 }\r\n            }}\r\n          >\r\n            {/* Create Calendar */}\r\n            <Card\r\n              sx={{\r\n                borderRadius: 2,\r\n                border: `2px dashed ${alpha(theme.palette.primary.main, theme.palette.mode === 'dark' ? 0.3 : 0.5)}`,\r\n                bgcolor: theme.palette.mode === 'dark' ? 'transparent' : alpha(theme.palette.primary.main, 0.03),\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s',\r\n                '&:hover': {\r\n                  borderColor: theme.palette.primary.main,\r\n                  bgcolor: alpha(theme.palette.primary.main, theme.palette.mode === 'dark' ? 0.05 : 0.08),\r\n                  transform: 'translateY(-2px)'\r\n                }\r\n              }}\r\n              onClick={handleCreateCalendar}\r\n            >\r\n              <CardContent sx={{\r\n                textAlign: 'center',\r\n                py: { xs: 2.5, sm: 3, md: 4 },\r\n                px: { xs: 1.5, sm: 2 }\r\n              }}>\r\n                <Box\r\n                  sx={{\r\n                    width: { xs: 40, sm: 48, md: 56 },\r\n                    height: { xs: 40, sm: 48, md: 56 },\r\n                    borderRadius: 2,\r\n                    bgcolor: alpha(theme.palette.primary.main, theme.palette.mode === 'dark' ? 0.1 : 0.15),\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    mx: 'auto',\r\n                    mb: { xs: 1.5, sm: 2 }\r\n                  }}\r\n                >\r\n                  <AddIcon sx={{\r\n                    fontSize: { xs: 24, sm: 28, md: 32 },\r\n                    color: theme.palette.primary.main\r\n                  }} />\r\n                </Box>\r\n                <Typography\r\n                  variant=\"subtitle1\"\r\n                  sx={{\r\n                    fontWeight: 600,\r\n                    mb: 0.5,\r\n                    fontSize: { xs: '0.875rem', sm: '0.9375rem', md: '1rem' }\r\n                  }}\r\n                >\r\n                  Create Calendar\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"caption\"\r\n                  color=\"text.secondary\"\r\n                  sx={{ fontSize: { xs: '0.6875rem', sm: '0.75rem' } }}\r\n                >\r\n                  Start a new trading journal\r\n                </Typography>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Create Trade */}\r\n            <Card\r\n              sx={{\r\n                borderRadius: 2,\r\n                border: `2px dashed ${alpha(theme.palette.info.main, theme.palette.mode === 'dark' ? 0.3 : 0.5)}`,\r\n                bgcolor: theme.palette.mode === 'dark' ? 'transparent' : alpha(theme.palette.info.main, 0.03),\r\n                cursor: calendars.length > 0 ? 'pointer' : 'not-allowed',\r\n                opacity: calendars.length > 0 ? 1 : 0.6,\r\n                transition: 'all 0.2s',\r\n                '&:hover': calendars.length > 0 ? {\r\n                  borderColor: theme.palette.info.main,\r\n                  bgcolor: alpha(theme.palette.info.main, theme.palette.mode === 'dark' ? 0.05 : 0.08),\r\n                  transform: 'translateY(-2px)'\r\n                } : {}\r\n              }}\r\n              onClick={handleCreateTrade}\r\n            >\r\n              <CardContent sx={{\r\n                textAlign: 'center',\r\n                py: { xs: 2.5, sm: 3, md: 4 },\r\n                px: { xs: 1.5, sm: 2 }\r\n              }}>\r\n                <Box\r\n                  sx={{\r\n                    width: { xs: 40, sm: 48, md: 56 },\r\n                    height: { xs: 40, sm: 48, md: 56 },\r\n                    borderRadius: 2,\r\n                    bgcolor: alpha(theme.palette.info.main, theme.palette.mode === 'dark' ? 0.1 : 0.15),\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    mx: 'auto',\r\n                    mb: { xs: 1.5, sm: 2 }\r\n                  }}\r\n                >\r\n                  <TrendingUp sx={{\r\n                    fontSize: { xs: 24, sm: 28, md: 32 },\r\n                    color: theme.palette.info.main\r\n                  }} />\r\n                </Box>\r\n                <Typography\r\n                  variant=\"subtitle1\"\r\n                  sx={{\r\n                    fontWeight: 600,\r\n                    mb: 0.5,\r\n                    fontSize: { xs: '0.875rem', sm: '0.9375rem', md: '1rem' }\r\n                  }}\r\n                >\r\n                  Create Trade\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"caption\"\r\n                  color=\"text.secondary\"\r\n                  sx={{ fontSize: { xs: '0.6875rem', sm: '0.75rem' } }}\r\n                >\r\n                  Log a new trade entry\r\n                </Typography>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Notes */}\r\n            <Card\r\n              sx={{\r\n                borderRadius: 2,\r\n                border: `2px dashed ${alpha(theme.palette.warning.main, theme.palette.mode === 'dark' ? 0.3 : 0.5)}`,\r\n                bgcolor: theme.palette.mode === 'dark' ? 'transparent' : alpha(theme.palette.warning.main, 0.03),\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s',\r\n                '&:hover': {\r\n                  borderColor: theme.palette.warning.main,\r\n                  bgcolor: alpha(theme.palette.warning.main, theme.palette.mode === 'dark' ? 0.05 : 0.08),\r\n                  transform: 'translateY(-2px)'\r\n                }\r\n              }}\r\n              onClick={() => {\r\n                if (!user) { setShowLoginDialog(true); return; }\r\n                setIsNotesDrawerOpen(true);\r\n              }}\r\n            >\r\n              <CardContent sx={{\r\n                textAlign: 'center',\r\n                py: { xs: 2.5, sm: 3, md: 4 },\r\n                px: { xs: 1.5, sm: 2 }\r\n              }}>\r\n                <Box\r\n                  sx={{\r\n                    width: { xs: 40, sm: 48, md: 56 },\r\n                    height: { xs: 40, sm: 48, md: 56 },\r\n                    borderRadius: 2,\r\n                    bgcolor: alpha(theme.palette.warning.main, theme.palette.mode === 'dark' ? 0.1 : 0.15),\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    mx: 'auto',\r\n                    mb: { xs: 1.5, sm: 2 }\r\n                  }}\r\n                >\r\n                  <EditIcon sx={{\r\n                    fontSize: { xs: 24, sm: 28, md: 32 },\r\n                    color: theme.palette.warning.main\r\n                  }} />\r\n                </Box>\r\n                <Typography\r\n                  variant=\"subtitle1\"\r\n                  sx={{\r\n                    fontWeight: 600,\r\n                    mb: 0.5,\r\n                    fontSize: { xs: '0.875rem', sm: '0.9375rem', md: '1rem' }\r\n                  }}\r\n                >\r\n                  Notes\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"caption\"\r\n                  color=\"text.secondary\"\r\n                  sx={{ fontSize: { xs: '0.6875rem', sm: '0.75rem' } }}\r\n                >\r\n                  Create and manage notes\r\n                </Typography>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Chat with AI */}\r\n            <Card\r\n              sx={{\r\n                borderRadius: 2,\r\n                border: `2px dashed ${alpha(theme.palette.secondary.main, theme.palette.mode === 'dark' ? 0.3 : 0.5)}`,\r\n                bgcolor: theme.palette.mode === 'dark' ? 'transparent' : alpha(theme.palette.secondary.main, 0.03),\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s',\r\n                '&:hover': {\r\n                  borderColor: theme.palette.secondary.main,\r\n                  bgcolor: alpha(theme.palette.secondary.main, theme.palette.mode === 'dark' ? 0.05 : 0.08),\r\n                  transform: 'translateY(-2px)'\r\n                }\r\n              }}\r\n              onClick={() => {\r\n                if (!user) {\r\n                  setShowLoginDialog(true);\r\n                  return;\r\n                }\r\n                setIsAIChatOpen(true);\r\n              }}\r\n            >\r\n              <CardContent sx={{\r\n                textAlign: 'center',\r\n                py: { xs: 2.5, sm: 3, md: 4 },\r\n                px: { xs: 1.5, sm: 2 }\r\n              }}>\r\n                <Box\r\n                  sx={{\r\n                    width: { xs: 40, sm: 48, md: 56 },\r\n                    height: { xs: 40, sm: 48, md: 56 },\r\n                    borderRadius: 2,\r\n                    bgcolor: alpha(theme.palette.secondary.main, theme.palette.mode === 'dark' ? 0.1 : 0.15),\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    mx: 'auto',\r\n                    mb: { xs: 1.5, sm: 2 }\r\n                  }}\r\n                >\r\n                  <AIIcon sx={{\r\n                    fontSize: { xs: 24, sm: 28, md: 32 },\r\n                    color: theme.palette.secondary.main\r\n                  }} />\r\n                </Box>\r\n                <Typography\r\n                  variant=\"subtitle1\"\r\n                  sx={{\r\n                    fontWeight: 600,\r\n                    mb: 0.5,\r\n                    fontSize: { xs: '0.875rem', sm: '0.9375rem', md: '1rem' }\r\n                  }}\r\n                >\r\n                  Chat with AI\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"caption\"\r\n                  color=\"text.secondary\"\r\n                  sx={{ fontSize: { xs: '0.6875rem', sm: '0.75rem' } }}\r\n                >\r\n                  Get trading insights\r\n                </Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Box>\r\n        </Box>\r\n\r\n        {/* Recent Calendars and Trades Side by Side */}\r\n        <Box\r\n          sx={{\r\n            display: 'flex',\r\n            flexDirection: { xs: 'column', md: 'row' },\r\n            gap: { xs: 2, sm: 2.5, md: 2 },\r\n            mb: { xs: 3, sm: 4 }\r\n          }}\r\n        >\r\n          {/* Recent Calendars Card */}\r\n          <Card\r\n            sx={{\r\n              flex: 1,\r\n              borderRadius: 1,\r\n              height: { xs: 'auto', md: '620px' },\r\n              pb: 2,\r\n              minHeight: { xs: '400px', md: '620px' },\r\n              maxWidth: recentCalendars.length <= 1 ? { xs: 'none', md: '400px' } : 'none',\r\n              p: { xs: 0.5, sm: 1 },\r\n              display: 'flex',\r\n              flexDirection: 'column'\r\n            }}\r\n          >\r\n            <Stack\r\n              direction=\"row\"\r\n              justifyContent=\"space-between\"\r\n              alignItems=\"center\"\r\n              sx={{\r\n                mb: { xs: 2, sm: 3 },\r\n                px: { xs: 1.5, sm: 2 },\r\n                pt: { xs: 1.5, sm: 2 }\r\n              }}\r\n            >\r\n              <RoundedTabs\r\n                tabs={[\r\n                  { label: 'Recent Calendars', icon: <CalendarToday sx={{ fontSize: 18 }} /> },\r\n                  { label: 'Trash', icon: <TrashIcon sx={{ fontSize: 18 }} /> }\r\n                ]}\r\n                activeTab={calendarTabIndex}\r\n                onTabChange={handleCalendarTabChange} \r\n                variant=\"contained\"\r\n              />\r\n              <Typography\r\n                variant=\"body2\"\r\n                sx={{\r\n                  color: 'primary.main',\r\n                  cursor: 'pointer',\r\n                  fontSize: { xs: '0.8125rem', sm: '0.875rem' },\r\n                  '&:hover': { textDecoration: 'underline' }\r\n                }}\r\n                onClick={() => setIsCalendarListDialogOpen(true)}\r\n              >\r\n                View all\r\n              </Typography>\r\n            </Stack>\r\n\r\n            {/* Recent Calendars Tab */}\r\n            <TabPanel value={calendarTabIndex} index={0}>\r\n              {isLoading ? (\r\n                <Box sx={{ px: 2, pb: 2, flex: 1, display: 'flex', flexDirection: 'row', gap: 2 }}>\r\n                  <Box sx={{ minWidth: '450px', flex: '0 0 auto' }}>\r\n                    <CalendarCardShimmer />\r\n                  </Box>\r\n                </Box>\r\n              ) : recentCalendars.length === 0 ? (\r\n                <Box sx={{\r\n                  textAlign: 'center',\r\n                  py: 6,\r\n                  px: 2,\r\n                  flex: 1,\r\n                  display: 'flex',\r\n                  flexDirection: 'column',\r\n                  justifyContent: 'center',\r\n                  alignItems: 'center'\r\n                }}>\r\n                  <CalendarToday sx={{ fontSize: 48, color: 'text.secondary', mb: 2, mx: 'auto' }} />\r\n                  <Typography variant=\"subtitle2\" color=\"text.primary\" sx={{ mb: 1, fontWeight: 600 }}>\r\n                    No calendars yet\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3, maxWidth: 300 }}>\r\n                    Create your first trading calendar to start tracking your trades and analyzing performance\r\n                  </Typography>\r\n                </Box>\r\n              ) : (\r\n                <Box sx={{\r\n                  px: 1,\r\n                  pb: 2,\r\n                  flex: 1,\r\n                  display: 'flex',\r\n                  flexDirection: 'row',\r\n                  gap: 1\r\n                }}>\r\n                  {recentCalendars.map((calendar) => { \r\n                    return (\r\n                      <CalendarCard\r\n                        key={calendar.id}\r\n                        calendar={calendar}\r\n                        onCalendarClick={handleCalendarClick}\r\n                        onEditCalendar={handleEditCalendar}\r\n                        onDuplicateCalendar={handleDuplicateCalendar}\r\n                        onLinkCalendar={handleLinkCalendar}\r\n                        onDeleteCalendar={handleDeleteCalendar}\r\n                        onUpdateCalendarProperty={handleUpdateCalendarProperty}\r\n                        formatCurrency={formatCurrency}\r\n                      />\r\n                    );\r\n                  })}\r\n                </Box>\r\n              )}\r\n            </TabPanel>\r\n\r\n            {/* Trash Calendars Tab */}\r\n            <TabPanel value={calendarTabIndex} index={1}>\r\n              {loadingTrash ? (\r\n                <Box sx={{ px: 2, pb: 2, flex: 1, display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n                  <Shimmer width=\"100%\" height={60} sx={{ borderRadius: 2 }} />\r\n                  <Shimmer width=\"100%\" height={60} sx={{ borderRadius: 2 }} />\r\n                </Box>\r\n              ) : trashCalendars.length === 0 ? (\r\n                <Box sx={{\r\n                  textAlign: 'center',\r\n                  py: 6,\r\n                  px: 2,\r\n                  flex: 1,\r\n                  display: 'flex',\r\n                  flexDirection: 'column',\r\n                  justifyContent: 'center',\r\n                  alignItems: 'center'\r\n                }}>\r\n                  <TrashIcon sx={{ fontSize: 48, color: 'text.secondary', mb: 2, mx: 'auto' }} />\r\n                  <Typography variant=\"subtitle2\" color=\"text.primary\" sx={{ mb: 1, fontWeight: 600 }}>\r\n                    Trash is empty\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3, maxWidth: 300 }}>\r\n                    Deleted calendars will appear here for 30 days before being permanently removed\r\n                  </Typography>\r\n                </Box>\r\n              ) : (\r\n                <Box sx={{ px: 2, pb: 2, flex: 1, display: 'flex', flexDirection: 'column', gap: 1.5 }}>\r\n                  {/* Trash Header */}\r\n                  <Box\r\n                    sx={{\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: 1.5,\r\n                      p: 1.5,\r\n                      borderRadius: 2,\r\n                      bgcolor: alpha(theme.palette.warning.main, 0.08),\r\n                      border: `1px solid ${alpha(theme.palette.warning.main, 0.2)}`\r\n                    }}\r\n                  >\r\n                    <ScheduleIcon sx={{ color: 'warning.main', fontSize: 20 }} />\r\n                    <Box>\r\n                      <Typography variant=\"body2\" fontWeight={600} color=\"warning.main\">\r\n                        Items will be permanently deleted after 30 days\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        Restore calendars before they're automatically removed from your account\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n\r\n                  {/* Trash Items */}\r\n                  <Stack spacing={1}>\r\n                    {trashCalendars.map((calendar) => (\r\n                      <TrashCalendarItem\r\n                        key={calendar.id}\r\n                        calendar={calendar}\r\n                        onRestore={handleRestoreCalendar}\r\n                        onPermanentDelete={handlePermanentDeleteCalendar}\r\n                      />\r\n                    ))}\r\n                  </Stack>\r\n                </Box>\r\n              )}\r\n            </TabPanel>\r\n          </Card>\r\n\r\n  {/* Economic Events Section */}\r\n          <Card\r\n            sx={{\r\n              flex: 1,\r\n              borderRadius: 1,\r\n              height: { xs: 'auto', md: '620px' },\r\n              minHeight: { xs: '400px', md: '620px' },\r\n              p: { xs: 0.5, sm: 1 },\r\n              display: 'flex',\r\n              flexDirection: 'column'\r\n            }}\r\n          >\r\n            <Stack\r\n              direction=\"row\"\r\n              justifyContent=\"space-between\"\r\n              alignItems=\"center\"\r\n              sx={{\r\n                mb: { xs: 2, sm: 3 },\r\n                px: { xs: 1.5, sm: 2 },\r\n                pt: { xs: 1.5, sm: 2 }\r\n              }}\r\n            >\r\n              <Typography\r\n                variant=\"h6\"\r\n                sx={{\r\n                  fontWeight: 600,\r\n                  fontSize: { xs: '1rem', sm: '1.125rem', md: '1.25rem' }\r\n                }}\r\n              >\r\n                Economic Events\r\n              </Typography>\r\n              <Typography\r\n                variant=\"body2\"\r\n                sx={{\r\n                  color: 'primary.main',\r\n                  cursor: 'pointer',\r\n                  fontSize: { xs: '0.8125rem', sm: '0.875rem' },\r\n                  '&:hover': { textDecoration: 'underline' }\r\n                }}\r\n                onClick={() => setEconomicCalendarOpen(true)}\r\n              >\r\n                View all\r\n              </Typography>\r\n            </Stack>\r\n\r\n            {loadingEvents ? (\r\n              <Box sx={{ px: 2, pb: 2, flex: 1, overflowY: 'auto', ...scrollbarStyles(theme) }}>\r\n                <EconomicEventShimmer count={5} />\r\n              </Box>\r\n            ) : !economicEvents || economicEvents.length === 0 ? (\r\n              <Box sx={{\r\n                textAlign: 'center',\r\n                py: 6,\r\n                px: 2,\r\n                flex: 1,\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                justifyContent: 'center',\r\n                alignItems: 'center'\r\n              }}>\r\n                <EventIcon sx={{ fontSize: 48, color: 'text.secondary', mb: 2, mx: 'auto' }} />\r\n                <Typography variant=\"subtitle2\" color=\"text.primary\" sx={{ mb: 1, fontWeight: 600 }}>\r\n                  No economic events today\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ maxWidth: 300 }}>\r\n                  There are no high or medium impact economic events scheduled for today\r\n                </Typography>\r\n              </Box>\r\n            ) : (\r\n              <Box sx={{\r\n                px: 2,\r\n                pb: 2,\r\n                flex: 1,\r\n                overflowY: 'auto',\r\n                ...scrollbarStyles(theme)\r\n              }}>\r\n                {economicEvents.map((event) => (\r\n                  <Card\r\n                    key={event.id}\r\n                    sx={{\r\n                      mb: 2,\r\n                      borderRadius: 2,\r\n                      cursor: 'pointer',\r\n                      transition: 'all 0.2s',\r\n                      bgcolor: theme.palette.mode === 'dark'\r\n                        ? alpha(theme.palette.common.black, 0.2)\r\n                        : alpha(theme.palette.common.black, 0.03),\r\n                      border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\r\n                      '&:hover': {\r\n                        boxShadow: 2,\r\n                        transform: 'translateY(-2px)',\r\n                        bgcolor: theme.palette.mode === 'dark'\r\n                          ? alpha(theme.palette.common.black, 0.3)\r\n                          : alpha(theme.palette.common.black, 0.06),\r\n                      },\r\n                      '&:last-child': {\r\n                        mb: 0\r\n                      }\r\n                    }}\r\n                    onClick={() => setEconomicCalendarOpen(true)}\r\n                  >\r\n                    <EconomicEventListItem\r\n                      event={event}\r\n                      px={2.5}\r\n                      py={2}\r\n                      showDivider={false}\r\n                      onClick={() => setEconomicCalendarOpen(true)}\r\n                    />\r\n                  </Card>\r\n                ))}\r\n              </Box>\r\n            )}\r\n          </Card>\r\n        \r\n        </Box>\r\n\r\n        {/* Recent Trades Card */}\r\n          <Card\r\n            sx={{\r\n              flex: 1,\r\n              borderRadius: 1,\r\n              p: { xs: 2, sm: 2.5, md: 3 },\r\n            }}\r\n          >\r\n            <Stack\r\n              direction=\"row\"\r\n              justifyContent=\"space-between\"\r\n              alignItems=\"center\"\r\n              sx={{ mb: { xs: 2, sm: 3 } }}\r\n            >\r\n              <Typography\r\n                variant=\"h6\"\r\n                sx={{\r\n                  fontWeight: 600,\r\n                  fontSize: { xs: '1rem', sm: '1.125rem', md: '1.25rem' }\r\n                }}\r\n              >\r\n                Recent Trades\r\n              </Typography>\r\n\r\n            </Stack>\r\n\r\n            {loadingTrades ? (\r\n              <Box\r\n                sx={{\r\n                  display: 'grid',\r\n                  gridTemplateColumns: {\r\n                    xs: '1fr',\r\n                    sm: 'repeat(auto-fill, minmax(280px, 1fr))'\r\n                  },\r\n                  gap: { xs: 1.5, sm: 2 }\r\n                }}\r\n              >\r\n                {Array.from({ length: 5 }).map((_, index) => (\r\n                  <Card\r\n                    key={index}\r\n                    sx={{\r\n                      borderRadius: 2,\r\n                      border: '1px solid',\r\n                      borderColor: alpha(theme.palette.primary.main, 0.2),\r\n                      backgroundColor: alpha(theme.palette.primary.main, 0.05)\r\n                    }}\r\n                  >\r\n                    <CardContent sx={{ p: 2, pt: 2, '&:last-child': { pb: 2 } }}>\r\n                      <Stack spacing={1.5}>\r\n                        {/* Header shimmer */}\r\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                          <Shimmer width=\"60%\" height={20} sx={{ borderRadius: 1 }} />\r\n                          <Shimmer width=\"30%\" height={24} sx={{ borderRadius: 1 }} />\r\n                        </Box>\r\n\r\n                        {/* Icons row shimmer */}\r\n                        <Box sx={{ display: 'flex', gap: 1, alignItems: 'center' }}>\r\n                          <Shimmer width={16} height={16} sx={{ borderRadius: '50%' }} />\r\n                          <Shimmer width={80} height={14} sx={{ borderRadius: 1 }} />\r\n                          <Shimmer width={16} height={16} sx={{ borderRadius: '50%' }} />\r\n                          <Shimmer width={60} height={14} sx={{ borderRadius: 1 }} />\r\n                        </Box>\r\n\r\n                        {/* Tags shimmer */}\r\n                        <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n                          <Shimmer width={80} height={20} sx={{ borderRadius: 10 }} />\r\n                          <Shimmer width={100} height={20} sx={{ borderRadius: 10 }} />\r\n                          <Shimmer width={70} height={20} sx={{ borderRadius: 10 }} />\r\n                          <Shimmer width={90} height={20} sx={{ borderRadius: 10 }} />\r\n                        </Box>\r\n                      </Stack>\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </Box>\r\n            ) : !recentTrades || recentTrades.length === 0 ? (\r\n              <Box sx={{\r\n                textAlign: 'center',\r\n                py: 6,\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                justifyContent: 'center',\r\n                alignItems: 'center'\r\n              }}>\r\n                <TrendingUp sx={{ fontSize: 48, color: 'text.secondary', mb: 2, mx: 'auto' }} />\r\n                <Typography variant=\"subtitle2\" color=\"text.primary\" sx={{ mb: 1, fontWeight: 600 }}>\r\n                  No recent trades\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ maxWidth: 300 }}>\r\n                  Start logging your trades to see them here and track your trading performance over time\r\n                </Typography>\r\n              </Box>\r\n            ) : (\r\n              <Box\r\n                sx={{\r\n                  display: 'grid',\r\n                  gridTemplateColumns: {\r\n                    xs: '1fr',\r\n                    sm: 'repeat(auto-fill, minmax(280px, 1fr))'\r\n                  },\r\n                  gap: { xs: 1.5, sm: 2 }\r\n                }}\r\n              >\r\n                {recentTrades.map((trade) => (\r\n                  <TradeCard\r\n                    key={trade.id}\r\n                    trade={trade}\r\n                    showTags={true}\r\n                    onClick={() => handleTradeClick(trade)}\r\n                  />\r\n                ))}\r\n              </Box>\r\n            )}\r\n          </Card>\r\n      </Box>\r\n\r\n      {/* Economic Calendar Drawer */}\r\n      {calendars.length > 0 && (\r\n        <EconomicCalendarDrawer\r\n          open={economicCalendarOpen}\r\n          onClose={() => setEconomicCalendarOpen(false)}\r\n          calendar={calendars[0]}\r\n          tradeOperations={{\r\n            onOpenGalleryMode: () => {},\r\n            onUpdateTradeProperty: () => Promise.resolve(undefined),\r\n            onEditTrade: () => {},\r\n            onDeleteTrade: () => Promise.resolve(),\r\n            onDeleteMultipleTrades: () => {},\r\n            onZoomImage: setZoomedImage,\r\n            isTradeUpdating: () => false,\r\n            calendarId: calendars[0].id,\r\n            calendar: calendars[0],\r\n            onUpdateCalendarProperty: () => Promise.resolve(undefined)\r\n          }}\r\n          isReadOnly\r\n        />\r\n      )}\r\n\r\n      {/* AI Chat Drawer - works without calendar for general queries */}\r\n      <AIChatDrawer\r\n        open={isAIChatOpen}\r\n        onClose={() => setIsAIChatOpen(false)}\r\n        tradeOperations={{\r\n          onOpenGalleryMode: () => {},\r\n          onUpdateTradeProperty: () => Promise.resolve(undefined),\r\n          onEditTrade: () => {},\r\n          onDeleteTrade: () => Promise.resolve(),\r\n          onDeleteMultipleTrades: () => {},\r\n          onZoomImage: setZoomedImage,\r\n          isTradeUpdating: () => false,\r\n          onUpdateCalendarProperty: () => Promise.resolve(undefined)\r\n        }}\r\n        isReadOnly={false}\r\n      />\r\n\r\n      {/* Notes Drawer - multi-calendar view with calendar picker */}\r\n      <NotesDrawer\r\n        open={isNotesDrawerOpen}\r\n        onClose={() => setIsNotesDrawerOpen(false)}\r\n        showCalendarPicker={true}\r\n      />\r\n\r\n      {/* Trade Form Dialog - calendar selection mode */}\r\n      {calendars.length > 0 && (\r\n        <TradeFormDialog\r\n          open={isTradeFormOpen}\r\n          onClose={handleTradeFormClose}\r\n          newMainTrade={newTrade || undefined}\r\n          trade_date={new Date()}\r\n          showForm={{ open: isTradeFormOpen, editTrade: undefined, createTempTrade: false }} \r\n          account_balance={accountBalanceForTradeDialog}\r\n          onAddTrade={handleAddTradeFromHome}\r\n          setZoomedImage={setZoomedImage}\r\n          setNewMainTrade={handleSetNewMainTrade}\r\n          onCancel={handleTradeFormCancel}\r\n          calendar={selectedTradeCalendar!}\r\n          dynamicRiskSettings={dynamicRiskSettingsForTrade}\r\n          tags={tagsForTradeDialog}\r\n          requiredTagGroups={requiredTagGroupsForTradeDialog}\r\n          calendars={calendars}\r\n          onCalendarChange={handleTradeCalendarChange} \r\n        />\r\n      )}\r\n\r\n      {/* Create Calendar Dialog */}\r\n      <CalendarFormDialog\r\n        open={isCreateCalendarDialogOpen}\r\n        onClose={() => setIsCreateCalendarDialogOpen(false)}\r\n        onSubmit={handleCreateCalendarSubmit}\r\n        isSubmitting={isCreatingCalendar}\r\n        mode=\"create\"\r\n        title=\"Create New Calendar\"\r\n        submitButtonText=\"Create\"\r\n      />\r\n\r\n      {/* Edit Calendar Dialog */}\r\n      <CalendarFormDialog\r\n        open={isEditDialogOpen}\r\n        onClose={() => setIsEditDialogOpen(false)}\r\n        onSubmit={handleEditCalendarSubmit}\r\n        initialData={calendarToEdit || undefined}\r\n        isSubmitting={isEditing}\r\n        mode=\"edit\"\r\n        title=\"Edit Calendar\"\r\n        submitButtonText=\"Save Changes\"\r\n      />\r\n\r\n      {/* Duplicate Calendar Options Dialog */}\r\n      <DuplicateCalendarDialog\r\n        open={isDuplicateOptionsDialogOpen}\r\n        calendar={calendarToDuplicate}\r\n        isDuplicating={isDuplicating}\r\n        onClose={() => {\r\n          setIsDuplicateOptionsDialogOpen(false);\r\n          setCalendarToDuplicate(null);\r\n        }}\r\n        onDuplicate={handleDuplicateOptionSelect}\r\n      />\r\n\r\n      {/* Calendar List Dialog */}\r\n      <CalendarListDialog\r\n        open={isCalendarListDialogOpen}\r\n        onClose={() => setIsCalendarListDialogOpen(false)}\r\n        isTrash={calendarTabIndex === 1}\r\n        onCalendarClick={handleCalendarClick}\r\n        onEditCalendar={handleEditCalendar}\r\n        onDuplicateCalendar={handleDuplicateCalendar}\r\n        onLinkCalendar={handleLinkCalendar}\r\n        onDeleteCalendar={handleDeleteCalendar}\r\n        onUpdateCalendarProperty={handleUpdateCalendarProperty}\r\n        onRestoreCalendar={handleRestoreCalendar}\r\n        onPermanentDeleteCalendar={handlePermanentDeleteCalendar}\r\n      />\r\n\r\n      {/* Calendar Link Dialog */}\r\n      <CalendarLinkDialog\r\n        open={isLinkDialogOpen}\r\n        calendar={calendarToLink}\r\n        calendars={calendars}\r\n        isLoading={isLinking}\r\n        onClose={() => {\r\n          setIsLinkDialogOpen(false);\r\n          setCalendarToLink(null);\r\n        }}\r\n        onLink={handleLinkSubmit}\r\n        onUnlink={handleUnlinkSubmit}\r\n      />\r\n\r\n      {/* Delete Calendar Dialog */}\r\n      <Dialog\r\n        open={isDeleteDialogOpen}\r\n        onClose={() => setIsDeleteDialogOpen(false)}\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        {...dialogProps}\r\n      >\r\n        <DialogTitle sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: 1,\r\n          color: 'error.main'\r\n        }}>\r\n          <DeleteIcon fontSize=\"small\" />\r\n          Delete Calendar\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography>\r\n            Are you sure you want to delete this calendar? This action cannot be undone.\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => setIsDeleteDialogOpen(false)}\r\n            sx={{ color: 'text.secondary' }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            onClick={handleDeleteConfirm}\r\n            sx={{\r\n              color: 'error.main',\r\n            }}\r\n          >\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Login Dialog */}\r\n      <LoginDialog\r\n        open={showLoginDialog}\r\n        onClose={handleLoginDialogClose}\r\n        title=\"Welcome Back\"\r\n        subtitle=\"Sign in to continue\"\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n\r\n","/**\r\n * useUpcomingEconomicEvents Hook\r\n *\r\n * Hook for fetching today's upcoming economic events with SWR.\r\n * Specifically designed for the HomePage to show unreleased events.\r\n * Automatically refetches data when browser tab regains focus.\r\n */\r\n\r\nimport useSWR from 'swr';\r\nimport { format } from 'date-fns';\r\nimport { economicCalendarService } from '../services/economicCalendarService';\r\nimport type { EconomicEvent } from '../types/economicCalendar';\r\nimport { logger } from '../utils/logger';\r\n\r\ninterface UseUpcomingEconomicEventsOptions {\r\n  /**\r\n   * Impact levels to filter by\r\n   * @default ['High', 'Medium']\r\n   */\r\n  impacts?: ('High' | 'Medium' | 'Low')[];\r\n\r\n  /**\r\n   * Interval in milliseconds to automatically refetch data.\r\n   * Set to 0 to disable automatic revalidation.\r\n   * @default 300000 (5 minutes)\r\n   */\r\n  refreshInterval?: number;\r\n\r\n  /**\r\n   * Whether to revalidate when the browser tab regains focus.\r\n   * This solves the Chrome tab freezing issue.\r\n   * @default true\r\n   */\r\n  revalidateOnFocus?: boolean;\r\n}\r\n\r\n/**\r\n * Custom hook to fetch today's upcoming economic events with automatic focus revalidation\r\n */\r\nexport function useUpcomingEconomicEvents(\r\n  options: UseUpcomingEconomicEventsOptions = {}\r\n) {\r\n  const {\r\n    impacts = ['High', 'Medium'],\r\n    refreshInterval = 300000, // 5 minutes\r\n    revalidateOnFocus = true,\r\n  } = options;\r\n\r\n  const { data, error, isLoading, mutate } = useSWR(\r\n    // Cache key includes impacts to refetch when filter changes\r\n    ['upcomingEconomicEvents', impacts.join(',')],\r\n    // Fetcher function\r\n    async () => {\r\n      try {\r\n        const now = new Date();\r\n        const today = format(now, 'yyyy-MM-dd');\r\n\r\n        const events = await economicCalendarService.fetchEvents(\r\n          {\r\n            start: today,\r\n            end: today\r\n          },\r\n          {\r\n            impacts,\r\n            onlyUpcoming: true,  // Filter at database level for efficiency\r\n            limit: 50  // Reasonable limit for single day's upcoming events\r\n          }\r\n        );\r\n\r\n        // Sort in ascending order (soonest upcoming event first)\r\n        // Database already filtered to upcoming events via onlyUpcoming\r\n        const sortedEvents = events.sort((a, b) =>\r\n          new Date(a.time_utc).getTime() - new Date(b.time_utc).getTime()\r\n        );\r\n\r\n        return sortedEvents;\r\n      } catch (err) {\r\n        logger.error('Error fetching upcoming economic events:', err);\r\n        throw err;\r\n      }\r\n    },\r\n    {\r\n      // Automatically refetch when tab regains focus (solves Chrome freezing)\r\n      revalidateOnFocus,\r\n      // Prevent duplicate requests within 2 seconds\r\n      dedupingInterval: 2000,\r\n      // Auto-refresh every 5 minutes to get latest events\r\n      refreshInterval,\r\n      // Don't retry on error (let user manually refresh)\r\n      shouldRetryOnError: false,\r\n      // Keep previous data while revalidating to prevent empty arrays\r\n      keepPreviousData: true,\r\n    }\r\n  );\r\n\r\n  return {\r\n    economicEvents: data ?? undefined,\r\n    isLoading,\r\n    error,\r\n    /**\r\n     * Manually refresh economic events data\r\n     */\r\n    refresh: mutate,\r\n  };\r\n}\r\n\r\n"],"names":["createSvgIcon","_jsx","d","tradeRepository","TradeRepository","getCardActionsUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","CardActionsRoot","styled","name","overridesResolver","props","styles","ownerState","root","disableSpacing","spacing","display","alignItems","padding","variants","style","marginLeft","React","inProps","ref","useDefaultProps","className","other","_objectWithoutProperties","_objectSpread","classes","slots","composeClasses","useUtilityClasses","clsx","safeFormatDate","date","formatStr","fallback","arguments","length","undefined","isValid","format","_unused","CalendarCard","_ref","calendar","onCalendarClick","onEditCalendar","onDuplicateCalendar","onLinkCalendar","onDeleteCalendar","onUpdateCalendarProperty","formatCurrency","theme","useTheme","menuAnchorEl","setMenuAnchorEl","handleMenuClick","useCallback","e","stopPropagation","currentTarget","handleMenuClose","handleMenuItemClick","action","stats","useMemo","total_pnl","win_rate","total_trades","growth_percentage","pnl_performance","avg_win","avg_loss","profit_factor","max_drawdown","drawdown_recovery_needed","drawdown_duration","drawdown_start_date","drawdown_end_date","target_progress","win_count","loss_count","current_balance","account_balance","initial_balance","weekly_pnl","monthly_pnl","yearly_pnl","weekly_pnl_percentage","monthly_pnl_percentage","yearly_pnl_percentage","weekly_progress","monthly_progress","_jsxs","Card","sx","cursor","transition","position","overflow","flexDirection","height","borderRadius","border","borderColor","alpha","palette","divider","background","mode","concat","paper","default","backdropFilter","boxShadow","common","black","transform","primary","main","onClick","id","children","Box","xs","sm","flexShrink","top","left","right","bottom","hero_image_url","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","secondary","content","zIndex","textAlign","color","text","CalendarIcon","fontSize","mb","opacity","Typography","variant","fontWeight","CardContent","p","flexGrow","component","gap","letterSpacing","lineHeight","minWidth","textOverflow","whiteSpace","flex","justifyContent","width","bgcolor","success","TrendingUp","error","TrendingDown","growth","isNaN","mt","grey","toFixed","renderAccountGrowth","Stack","direction","created_at","EditIcon","updated_at","CardActions","borderTop","ShareButton","type","item","onUpdateItemProperty","IconButton","size","MoreVertIcon","Menu","anchorEl","open","Boolean","onClose","transformOrigin","horizontal","vertical","anchorOrigin","MenuItem","ListItemIcon","ListItemText","CopyIcon","LinkIcon","TrashIcon","CalendarCardShimmer","Shimmer","intensity","Divider","my","gridTemplateColumns","map","i","pt","DuplicateCalendarDialog","isDuplicating","onDuplicate","Dialog","maxWidth","fullWidth","dialogProps","DialogTitle","DialogContent","py","CircularProgress","_Fragment","Button","disabled","backgroundColor","DialogActions","CalendarLinkDialog","calendars","isLoading","onLink","onUnlink","selectedCalendarId","setSelectedCalendarId","useState","isSubmitting","setIsSubmitting","setError","availableCalendars","filter","c","linked_to_calendar_id","linkedCalendar","find","useEffect","isProcessing","Alert","severity","Chip","label","startIcon","UnlinkIcon","async","console","FormControl","InputLabel","Select","labelId","value","onChange","target","err","message","Error","toLowerCase","includes","compareLocalAsc","dateLeft","dateRight","diff","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","differenceInDays","dirtyDateLeft","dirtyDateRight","requiredArgs","toDate","sign","difference","Math","abs","startOfDayLeft","startOfDay","startOfDayRight","timestampLeft","getTime","getTimezoneOffsetInMilliseconds","timestampRight","round","differenceInCalendarDays","setDate","result","Number","dateObj","Date","onRestore","onPermanentDelete","isRestoring","setIsRestoring","isDeleting","setIsDeleting","daysUntilDeletion","autoDeleteAt","deleteDate","days","max","getDaysUntilDeletion","auto_delete_at","Avatar","src","objectFit","CalendarToday","ScheduleIcon","deleted_at","RestoreIcon","textTransform","px","DeleteIcon","CompactCalendarItem","_calendar$weekly_prog","_calendar$monthly_pro","isTrash","isExpanded","onToggleExpand","onEdit","onDelete","menuOpen","pnl","isPositive","winRate","totalTrades","ExpandLess","ExpandMore","DuplicateIcon","pb","gutterBottom","Tooltip","title","arrow","placement","InfoOutlined","weekly_target","monthly_target","min","parseFloat","String","_ref2","onRestoreCalendar","onPermanentDeleteCalendar","user","useAuthState","expandedCalendarIds","setExpandedCalendarIds","Set","fetchedCalendars","loadingCalendars","refresh","refreshCalendars","useCalendars","uid","trashCalendars","fetchedTrashCalendars","loadingTrash","refreshTrash","useTrashCalendars","CloseIcon","overflowX","maxHeight","overflowY","scrollbarStyles","warning","TrashCalendarItem","has","handleToggleExpand","calendarId","prev","newSet","delete","add","handleCalendarClick","handleDeleteClick","_selectedTradeCalenda","onCreateCalendar","onUpdateCalendar","navigate","useNavigate","useAuth","economicEvents","loadingEvents","options","impacts","refreshInterval","revalidateOnFocus","data","mutate","useSWR","join","now","today","economicCalendarService","fetchEvents","start","end","onlyUpcoming","limit","sort","a","b","time_utc","logger","dedupingInterval","shouldRetryOnError","keepPreviousData","useUpcomingEconomicEvents","recentTrades","recentTrades_","loadingTrades","userId","findByUserId","orderBy","ascending","trade","cal","calendar_id","calendarName","useRecentTrades","hasLoadedTrash","setHasLoadedTrash","refreshTrashCalendars","economicCalendarOpen","setEconomicCalendarOpen","isCreateCalendarDialogOpen","setIsCreateCalendarDialogOpen","isCreatingCalendar","setIsCreatingCalendar","showLoginDialog","setShowLoginDialog","isTradeFormOpen","setIsTradeFormOpen","newTrade","setNewTrade","selectedTradeCalendarId","setSelectedTradeCalendarId","setRecentTrades","isAIChatOpen","setIsAIChatOpen","isNotesDrawerOpen","setIsNotesDrawerOpen","calendarTabIndex","setCalendarTabIndex","isCalendarListDialogOpen","setIsCalendarListDialogOpen","zoomedImage","setZoomedImage","isDeleteDialogOpen","setIsDeleteDialogOpen","isEditDialogOpen","setIsEditDialogOpen","isDuplicateOptionsDialogOpen","setIsDuplicateOptionsDialogOpen","isLinkDialogOpen","setIsLinkDialogOpen","calendarToDelete","setCalendarToDelete","calendarToEdit","setCalendarToEdit","calendarToDuplicate","setCalendarToDuplicate","calendarToLink","setCalendarToLink","isEditing","setIsEditing","setIsDuplicating","isLinking","setIsLinking","isLargeScreen","useMediaQuery","breakpoints","up","recentCalendars","slice","handleEditCalendar","handleDuplicateCalendar","handleLinkCalendar","handleDeleteCalendar","handleRestoreCalendar","calendarService","restoreCalendar","handlePermanentDeleteCalendar","permanentlyDeleteCalendar","handleUpdateCalendarProperty","updateCallback","targetCalendar","updatedCalendar","dashboardStats","totalCalendars","activeCalendars","_c$total_trades","reduce","sum","_cal$total_trades","totalWins","_cal$win_count","totalLosses","_cal$loss_count","totalPnL","_cal$total_pnl","selectedTradeCalendar","dynamicRiskSettingsForTrade","risk_per_trade","dynamic_risk_enabled","increased_risk_percentage","profit_threshold_percentage","tagsForTradeDialog","tags","requiredTagGroupsForTradeDialog","required_tag_groups","accountBalanceForTradeDialog","minHeight","AnimatedBackground","md","mx","lg","info","handleCreateCalendar","AddIcon","handleCreateTrade","createNewTradeData","AIIcon","RoundedTabs","tabs","icon","activeTab","onTabChange","handleCalendarTabChange","_event","newValue","textDecoration","TabPanel","index","EconomicEventShimmer","count","event","EconomicEventListItem","showDivider","EventIcon","Array","from","_","flexWrap","TradeCard","showTags","handleTradeClick","EconomicCalendarDrawer","tradeOperations","onOpenGalleryMode","onUpdateTradeProperty","Promise","resolve","onEditTrade","onDeleteTrade","onDeleteMultipleTrades","onZoomImage","isTradeUpdating","isReadOnly","AIChatDrawer","NotesDrawer","showCalendarPicker","TradeFormDialog","handleTradeFormClose","pending_images","forEach","image","URL","revokeObjectURL","preview","newMainTrade","trade_date","showForm","editTrade","createTempTrade","onAddTrade","addTrade","tradeWithCalendarName","setNewMainTrade","updater","base","onCancel","handleTradeFormCancel","dynamicRiskSettings","requiredTagGroups","onCalendarChange","CalendarFormDialog","onSubmit","newCalendar","max_daily_drawdown","yearly_target","hero_image_attribution","submitButtonText","initialData","newName","withContent","CalendarListDialog","linkCalendar","targetCalendarId","unlinkCalendar","LoginDialog","handleLoginDialogClose","subtitle"],"sourceRoot":""}