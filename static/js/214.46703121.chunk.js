"use strict";(self.webpackChunksimple_trade_tracker=self.webpackChunksimple_trade_tracker||[]).push([[214],{93214:(e,t,a)=>{a.r(t),a.d(t,{CalendarHome:()=>ne,default:()=>oe});var r=a(65043),n=a(60267),o=a(91244),i=a(16128),s=a(53969),l=a(89826),d=a(70298),c=a(94527),x=a(95563),g=a(26887),h=a(23182),p=a(94842),m=a(42579),u=a(17873),y=a(12097),A=a(49806),b=a(26529),j=a(33023),v=a(81911),f=a(78776),k=a(85877),w=a(10256),T=a(4282),P=a(58560),C=a(80172),S=a(66154),D=a(1725),F=a(85030),W=a(4279),X=a(70579);const $=e=>{let{open:t,onClose:a,onSubmit:n,initialData:o,isSubmitting:i,mode:l,title:c,submitButtonText:x}=e;const[g,h]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[A,b]=(0,r.useState)(""),[j,v]=(0,r.useState)(""),[f,k]=(0,r.useState)(""),[w,T]=(0,r.useState)(""),[P,$]=(0,r.useState)(""),[R,I]=(0,r.useState)(!1),[M,z]=(0,r.useState)(""),[B,L]=(0,r.useState)("");(0,r.useEffect)((()=>{var e,a,r,n,i,s,d,c;t&&(o&&"edit"===l?(h(o.name||""),u((null===(e=o.accountBalance)||void 0===e?void 0:e.toString())||""),b((null===(a=o.maxDailyDrawdown)||void 0===a?void 0:a.toString())||""),v((null===(r=o.weeklyTarget)||void 0===r?void 0:r.toString())||""),k((null===(n=o.monthlyTarget)||void 0===n?void 0:n.toString())||""),T((null===(i=o.yearlyTarget)||void 0===i?void 0:i.toString())||""),$((null===(s=o.riskPerTrade)||void 0===s?void 0:s.toString())||""),I(o.dynamicRiskEnabled||!1),z((null===(d=o.increasedRiskPercentage)||void 0===d?void 0:d.toString())||""),L((null===(c=o.profitThresholdPercentage)||void 0===c?void 0:c.toString())||"")):N())}),[t,o,l]);const N=()=>{h(""),u(""),b(""),v(""),k(""),T(""),$(""),I(!1),z(""),L("")},E=g.trim()&&m.trim()&&A.trim(),Y=c,G=(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(y.A,{onClick:a,disabled:i,children:"Cancel"}),(0,X.jsxs)(y.A,{onClick:async()=>{if(g.trim()&&m.trim()&&A.trim()){const e=parseFloat(m),t=parseFloat(A),a=j.trim()?parseFloat(j):void 0,r=f.trim()?parseFloat(f):void 0,o=w.trim()?parseFloat(w):void 0,i=P.trim()?parseFloat(P):void 0,s=M.trim()?parseFloat(M):void 0,l=B.trim()?parseFloat(B):void 0;!isNaN(e)&&e>=0&&!isNaN(t)&&t>0&&(void 0===a||!isNaN(a)&&a>0)&&(void 0===r||!isNaN(r)&&r>0)&&(void 0===o||!isNaN(o)&&o>0)&&(void 0===i||!isNaN(i)&&i>0)&&(void 0===s||!isNaN(s)&&s>0)&&(void 0===l||!isNaN(l)&&l>0)&&await n({name:g.trim(),accountBalance:e,maxDailyDrawdown:t,weeklyTarget:a,monthlyTarget:r,yearlyTarget:o,riskPerTrade:i,dynamicRiskEnabled:R,increasedRiskPercentage:s,profitThresholdPercentage:l})}},variant:"contained",disabled:!E||i,sx:{minWidth:100,display:"flex",alignItems:"center",gap:1},children:[x,i&&(0,X.jsx)(C.A,{size:20,color:"inherit"})]})]});return(0,X.jsx)(W.mY,{open:t,onClose:()=>!i&&a(),maxWidth:"xs",fullWidth:!0,title:Y,actions:G,children:(0,X.jsxs)(d.A,{spacing:2,sx:{mt:1},children:[(0,X.jsx)(S.A,{label:"Calendar Name",fullWidth:!0,value:g,onChange:e=>h(e.target.value),autoFocus:!0}),(0,X.jsx)(S.A,{label:"create"===l?"Initial Account Balance":"Account Balance",fullWidth:!0,value:m,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&u(t)},type:"number",InputProps:{startAdornment:(0,X.jsx)(s.A,{component:"span",sx:{mr:1},children:"$"})}}),(0,X.jsx)(S.A,{label:"Max Daily Drawdown (%)",fullWidth:!0,value:A,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&b(t)},type:"number",InputProps:{endAdornment:(0,X.jsx)(s.A,{component:"span",sx:{ml:1},children:"%"})},helperText:"Maximum allowed loss percentage per day"}),(0,X.jsx)(S.A,{label:"Weekly Target (%)",fullWidth:!0,value:j,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&v(t)},type:"number",InputProps:{endAdornment:(0,X.jsx)(s.A,{component:"span",sx:{ml:1},children:"%"})},helperText:"Target profit percentage per week"}),(0,X.jsx)(S.A,{label:"Monthly Target (%)",fullWidth:!0,value:f,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&k(t)},type:"number",InputProps:{endAdornment:(0,X.jsx)(s.A,{component:"span",sx:{ml:1},children:"%"})},helperText:"Target profit percentage per month"}),(0,X.jsx)(S.A,{label:"Yearly Target (%)",fullWidth:!0,value:w,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&T(t)},type:"number",InputProps:{endAdornment:(0,X.jsx)(s.A,{component:"span",sx:{ml:1},children:"%"})},helperText:"Target profit percentage per year"}),(0,X.jsx)(S.A,{label:"Risk Per Trade (%)",fullWidth:!0,value:P,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&$(t)},type:"number",InputProps:{endAdornment:(0,X.jsx)(s.A,{component:"span",sx:{ml:1},children:"%"})},helperText:"Percentage of account balance to risk per trade (optional)"}),P&&(0,X.jsxs)(s.A,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,p:2,mt:1},children:[(0,X.jsx)(p.A,{variant:"subtitle2",sx:{mb:1.5,fontWeight:600},children:"Dynamic Risk Settings"}),(0,X.jsx)(D.A,{control:(0,X.jsx)(F.A,{checked:R,onChange:e=>I(e.target.checked),color:"primary"}),label:"Enable Dynamic Risk",sx:{mb:1.5}}),R&&(0,X.jsxs)(d.A,{spacing:2,children:[(0,X.jsx)(S.A,{label:"Profit Threshold (%)",fullWidth:!0,value:B,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&L(t)},type:"number",InputProps:{endAdornment:(0,X.jsx)(s.A,{component:"span",sx:{ml:1},children:"%"})},helperText:"Increase risk when profit exceeds this percentage",size:"small"}),(0,X.jsx)(S.A,{label:"Increased Risk (%)",fullWidth:!0,value:M,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&z(t)},type:"number",InputProps:{endAdornment:(0,X.jsx)(s.A,{component:"span",sx:{ml:1},children:"%"})},helperText:"New risk percentage when profit threshold is exceeded",size:"small"})]})]})]})})};var R=a(83041),I=a(64296),M=a(65767),z=a(86262),B=a(22950),L=a(63898),N=a(6013),E=a(92248),Y=a(61773),G=a(17347),V=a(13106),U=a(5362),_=a(17105),H=a(69023),O=a(99900),Z=a(23893),q=a(75499),J=a(38490),K=a(40269),Q=a(29066),ee=a(83290),te=a(87498);const ae=ee.i7`
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
`,re=()=>{const e=(0,n.A)();return(0,X.jsxs)(o.A,{sx:{height:"100%"},children:[(0,X.jsxs)(i.A,{sx:{p:3},children:[(0,X.jsxs)(s.A,{sx:{mb:2.5},children:[(0,X.jsx)(s.A,{sx:{height:28,width:"60%",borderRadius:1,mb:1,background:`linear-gradient(90deg,\n                ${(0,l.X4)(e.palette.background.paper,.1)} 25%,\n                ${(0,l.X4)(e.palette.background.paper,.2)} 50%,\n                ${(0,l.X4)(e.palette.background.paper,.1)} 75%)`,backgroundSize:"200% 100%",animation:`${ae} 1.5s infinite linear`}}),(0,X.jsxs)(d.A,{direction:"row",spacing:2,sx:{mb:1},children:[(0,X.jsx)(s.A,{sx:{height:20,width:"30%",borderRadius:.5,background:`linear-gradient(90deg,\n                  ${(0,l.X4)(e.palette.background.paper,.1)} 25%,\n                  ${(0,l.X4)(e.palette.background.paper,.2)} 50%,\n                  ${(0,l.X4)(e.palette.background.paper,.1)} 75%)`,backgroundSize:"200% 100%",animation:`${ae} 1.5s infinite linear`}}),(0,X.jsx)(s.A,{sx:{height:20,width:"30%",borderRadius:.5,background:`linear-gradient(90deg,\n                  ${(0,l.X4)(e.palette.background.paper,.1)} 25%,\n                  ${(0,l.X4)(e.palette.background.paper,.2)} 50%,\n                  ${(0,l.X4)(e.palette.background.paper,.1)} 75%)`,backgroundSize:"200% 100%",animation:`${ae} 1.5s infinite linear`}})]})]}),(0,X.jsx)(c.A,{sx:{my:2,opacity:.6}}),(0,X.jsx)(d.A,{spacing:2,children:[1,2,3].map((t=>(0,X.jsx)(s.A,{sx:{height:24,width:2===t?"70%":"85%",borderRadius:.5,background:`linear-gradient(90deg,\n                  ${(0,l.X4)(e.palette.background.paper,.1)} 25%,\n                  ${(0,l.X4)(e.palette.background.paper,.2)} 50%,\n                  ${(0,l.X4)(e.palette.background.paper,.1)} 75%)`,backgroundSize:"200% 100%",animation:`${ae} 1.5s infinite linear`}},t)))})]}),(0,X.jsx)(x.A,{sx:{justifyContent:"flex-end",p:2,pt:1,borderTop:`1px solid ${(0,l.X4)(e.palette.divider,.1)}`},children:(0,X.jsx)(d.A,{direction:"row",spacing:1,children:[1,2,3].map((t=>(0,X.jsx)(s.A,{sx:{height:32,width:80,borderRadius:1,background:`linear-gradient(90deg,\n                  ${(0,l.X4)(e.palette.background.paper,.1)} 25%,\n                  ${(0,l.X4)(e.palette.background.paper,.2)} 50%,\n                  ${(0,l.X4)(e.palette.background.paper,.1)} 75%)`,backgroundSize:"200% 100%",animation:`${ae} 1.5s infinite linear`}},t)))})})]})},ne=e=>{var t,a;let{calendars:C,onCreateCalendar:S,onDeleteCalendar:D,onUpdateCalendar:F,onToggleTheme:W,mode:ee,isLoading:ae,loadAllTrades:ne}=e;const{user:oe,signInWithGoogle:ie,signOut:se}=(0,Q.A)(),[le,de]=(0,r.useState)(!1),[ce,xe]=(0,r.useState)(!1),[ge,he]=(0,r.useState)(!1),[pe,me]=(0,r.useState)(null),[ue,ye]=(0,r.useState)(null),[Ae,be]=(0,r.useState)(!1),[je,ve]=(0,r.useState)(!1),fe=(0,n.A)(),ke=(0,O.Zp)(),[we,Te]=(0,r.useState)(null),[Pe,Ce]=(0,r.useState)(new Date),[Se,De]=(0,r.useState)(!1),[Fe,We]=(0,r.useState)("month"),[Xe,$e]=(0,r.useState)({}),Re=void 0!==ae&&ae,Ie=()=>{Te(null)};(0,r.useMemo)((()=>{if(!we)return[];const e=we.cachedTrades||[];if(0===e.length)return[new Date];const t=e.map((e=>new Date(e.date))),a=new Date(Math.min(...t.map((e=>e.getTime())))),r=new Date(Math.max(...t.map((e=>e.getTime())))),n=[];let o=new Date(a.getFullYear(),a.getMonth(),1);const i=new Date(r.getFullYear(),r.getMonth(),1);for(;o<=i;)n.push(new Date(o)),o=new Date(o.getFullYear(),o.getMonth()+1,1);return n}),[we]);return(0,X.jsxs)(s.A,{children:[(0,X.jsx)(g.A,{position:"static",color:"transparent",elevation:1,sx:{backdropFilter:"blur(8px)",backgroundColor:(0,l.X4)("light"===ee?"#ffffff":fe.palette.background.default,.9),borderBottom:`1px solid ${fe.palette.divider}`},children:(0,X.jsxs)(h.A,{children:[(0,X.jsx)(p.A,{variant:"h5",component:"h1",sx:{flexGrow:1},children:"Trade Tracker"}),oe?(0,X.jsxs)(d.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,X.jsx)(m.A,{onClick:W,color:"inherit",size:"small",sx:{"&:hover":{bgcolor:(0,l.X4)(fe.palette.primary.main,.1)}},children:"dark"===ee?(0,X.jsx)(R.A,{}):(0,X.jsx)(I.A,{})}),(0,X.jsxs)(d.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",children:oe.email}),(0,X.jsx)(u.A,{src:oe.photoURL||void 0,sx:{width:32,height:32,bgcolor:fe.palette.primary.main,fontSize:"0.875rem"},children:oe.email?oe.email[0].toUpperCase():"U"})]}),(0,X.jsx)(y.A,{variant:"outlined",color:"inherit",startIcon:(0,X.jsx)(M.A,{}),onClick:async()=>{try{await se()}catch(e){console.error("Failed to sign out:",e)}},size:"small",children:"Sign Out"})]}):(0,X.jsxs)(d.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,X.jsx)(m.A,{onClick:W,color:"inherit",size:"small",sx:{"&:hover":{bgcolor:(0,l.X4)(fe.palette.primary.main,.1)}},children:"dark"===ee?(0,X.jsx)(R.A,{}):(0,X.jsx)(I.A,{})}),(0,X.jsx)(y.A,{variant:"contained",startIcon:(0,X.jsx)(z.A,{}),onClick:async()=>{try{await ie()}catch(e){console.error("Failed to sign in:",e)}},sx:{bgcolor:"#4285F4","&:hover":{bgcolor:"#3367D6"}},children:"Sign in with Google"})]})]})}),(0,X.jsx)(A.A,{maxWidth:"lg",sx:{mt:4},children:oe?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(s.A,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,X.jsx)(p.A,{variant:"h4",component:"h2",children:"Your Calendars"}),(0,X.jsx)(y.A,{variant:"contained",startIcon:(0,X.jsx)(B.A,{}),onClick:()=>de(!0),children:"Create Calendar"})]}),0!==C.length||Re?(0,X.jsx)(s.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},gap:2},children:Re?Array.from({length:3}).map(((e,t)=>(0,X.jsx)(re,{},t))):C.map((e=>{const t=(0,te.st)(e);return(0,X.jsxs)(o.A,{sx:{cursor:"pointer",transition:"all 0.3s ease",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:fe.shadows[8],"& .calendar-gradient":{opacity:1}},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px"}},onClick:()=>(async e=>{if(ne){const t=C.find((t=>t.id===e));t&&0===t.loadedYears.length&&!Xe[e]&&($e((t=>({...t,[e]:!0}))),await ne(e))}ke(`/calendar/${e}`)})(e.id),children:[(0,X.jsx)(s.A,{className:"calendar-gradient",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`linear-gradient(135deg, ${(0,l.X4)(fe.palette.primary.main,.05)}, ${(0,l.X4)(fe.palette.primary.light,.02)})`,opacity:0,transition:"opacity 0.3s ease",pointerEvents:"none"}}),(0,X.jsxs)(i.A,{sx:{p:3},children:[(0,X.jsxs)(s.A,{sx:{mb:2.5},children:[(0,X.jsxs)(p.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,color:"text.primary",display:"flex",alignItems:"center",gap:1},children:[e.name,t.totalPnL>0&&(0,X.jsx)(N.A,{sx:{fontSize:"1.2rem",color:"success.main"}}),t.totalPnL<0&&(0,X.jsx)(E.A,{sx:{fontSize:"1.2rem",color:"error.main"}})]}),(0,X.jsxs)(d.A,{direction:"row",spacing:2,sx:{mb:1},children:[(0,X.jsxs)(p.A,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,X.jsx)(L.A,{sx:{fontSize:"1rem"}}),(0,H.GP)(e.createdAt,"MMM d, yyyy")]}),(0,X.jsxs)(p.A,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,X.jsx)(Y.A,{sx:{fontSize:"1rem"}}),(0,H.GP)(e.lastModified,"MMM d, yyyy")]})]})]}),(0,X.jsx)(c.A,{sx:{my:2,opacity:.6}}),(0,X.jsxs)(d.A,{spacing:2,children:[(0,X.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1.5,p:1.5,borderRadius:1,bgcolor:(0,l.X4)(fe.palette.background.default,.6)},children:[(0,X.jsx)(s.A,{sx:{width:40,height:40,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:t.totalPnL>0?(0,l.X4)(fe.palette.success.main,.1):t.totalPnL<0?(0,l.X4)(fe.palette.error.main,.1):(0,l.X4)(fe.palette.grey[500],.1)},children:(0,X.jsx)(N.A,{sx:{fontSize:"1.2rem",color:t.totalPnL>0?fe.palette.success.main:t.totalPnL<0?fe.palette.error.main:fe.palette.grey[500]}})}),(0,X.jsxs)(s.A,{children:[(0,X.jsx)(p.A,{variant:"h6",sx:{color:t.totalPnL>0?"success.main":t.totalPnL<0?"error.main":"text.secondary",fontWeight:600},children:(0,Z.vv)(t.totalPnL)}),(0,X.jsxs)(p.A,{variant:"body2",color:"text.secondary",children:["Growth: ",t.growthPercentage.toFixed(2),"%"]})]})]}),(0,X.jsxs)(s.A,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:2},children:[(0,X.jsxs)(s.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,l.X4)(fe.palette.background.default,.6)},children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Initial Balance"}),(0,X.jsx)(p.A,{variant:"h6",sx:{fontWeight:600},children:(0,Z.vv)(t.initialBalance)}),(0,X.jsxs)(p.A,{variant:"body2",color:"text.secondary",children:["Current: ",(0,Z.vv)(t.initialBalance+t.totalPnL)]})]}),(0,X.jsxs)(s.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,l.X4)(fe.palette.background.default,.6)},children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Win Rate"}),(0,X.jsxs)(p.A,{variant:"h6",sx:{fontWeight:600},children:[t.winRate.toFixed(1),"%"]}),(0,X.jsxs)(p.A,{variant:"body2",color:"text.secondary",children:[t.winCount,"W - ",t.lossCount,"L"]})]})]}),(0,X.jsxs)(s.A,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:2},children:[(0,X.jsxs)(s.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,l.X4)(fe.palette.background.default,.6)},children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Profit Factor"}),(0,X.jsx)(b.A,{title:(0,X.jsxs)(s.A,{sx:{p:1,maxWidth:300},children:[(0,X.jsx)(p.A,{variant:"body2",gutterBottom:!0,children:"Profit Factor is the ratio of gross profit to gross loss. A value greater than 1 indicates profitable trading."}),(0,X.jsx)(p.A,{variant:"body2",sx:{mt:1},children:"\u2022 Value > 3: Excellent"}),(0,X.jsx)(p.A,{variant:"body2",children:"\u2022 Value 2-3: Very Good"}),(0,X.jsx)(p.A,{variant:"body2",children:"\u2022 Value 1.5-2: Good"}),(0,X.jsx)(p.A,{variant:"body2",children:"\u2022 Value 1-1.5: Marginal"}),(0,X.jsx)(p.A,{variant:"body2",children:"\u2022 Value < 1: Unprofitable"})]}),arrow:!0,placement:"top",children:(0,X.jsxs)(p.A,{variant:"h6",sx:{fontWeight:600,cursor:"help"},children:[(0,X.jsx)(G.A,{sx:{fontSize:"1rem",mr:.5}}),t.profitFactor.toFixed(2)]})}),(0,X.jsxs)(p.A,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:["Avg Win: ",(0,Z.vv)(t.avgWin)]})]}),(0,X.jsxs)(s.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,l.X4)(fe.palette.background.default,.6)},children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Max Drawdown"}),(0,X.jsx)(b.A,{title:(0,X.jsxs)(s.A,{sx:{p:1,maxWidth:300},children:[(0,X.jsx)(p.A,{variant:"body2",gutterBottom:!0,children:"Maximum drawdown represents the largest peak-to-trough decline in your account balance."}),t.maxDrawdown>0&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(p.A,{variant:"body2",sx:{mt:1},children:["Recovery needed: ",t.drawdownRecoveryNeeded.toFixed(1),"%"]}),(0,X.jsxs)(p.A,{variant:"body2",sx:{mt:1},children:["Duration: ",t.drawdownDuration," days"]}),t.drawdownStartDate&&t.drawdownEndDate&&(0,X.jsxs)(p.A,{variant:"body2",sx:{mt:1},children:["Period: ",(0,H.GP)(t.drawdownStartDate,"MMM d")," - ",(0,H.GP)(t.drawdownEndDate,"MMM d")]})]})]}),arrow:!0,placement:"top",children:(0,X.jsxs)(p.A,{variant:"h6",sx:{fontWeight:600,cursor:"help"},children:[(0,X.jsx)(G.A,{sx:{fontSize:"1rem",mr:.5}}),t.maxDrawdown.toFixed(1),"%"]})}),(0,X.jsxs)(p.A,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem",mt:.5},children:["Avg Loss: ",(0,Z.vv)(t.avgLoss)]})]})]}),(e.weeklyTarget||e.monthlyTarget||e.yearlyTarget)&&(0,X.jsxs)(s.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,l.X4)(fe.palette.background.default,.6)},children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Target Progress"}),(0,X.jsxs)(s.A,{sx:{display:"grid",gridTemplateColumns:e.weeklyTarget&&e.monthlyTarget&&e.yearlyTarget?"repeat(3, 1fr)":e.weeklyTarget&&e.monthlyTarget||e.weeklyTarget&&e.yearlyTarget||e.monthlyTarget&&e.yearlyTarget?"repeat(2, 1fr)":"1fr",gap:2},children:[e.weeklyTarget&&(0,X.jsxs)(s.A,{children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Weekly"}),(0,X.jsxs)(p.A,{variant:"h6",sx:{fontWeight:600},children:[t.weeklyProgress.toFixed(1),"%"]})]}),e.monthlyTarget&&(0,X.jsxs)(s.A,{children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Monthly"}),(0,X.jsxs)(p.A,{variant:"h6",sx:{fontWeight:600},children:[t.monthlyProgress.toFixed(1),"%"]})]}),e.yearlyTarget&&(0,X.jsxs)(s.A,{children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Yearly"}),(0,X.jsxs)(p.A,{variant:"h6",sx:{fontWeight:600},children:[t.yearlyProgress.toFixed(1),"%"]})]})]})]}),(0,X.jsxs)(s.A,{sx:{p:1.5,borderRadius:1,bgcolor:(0,l.X4)(fe.palette.background.default,.6)},children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"PnL Performance"}),(0,X.jsxs)(s.A,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2},children:[(0,X.jsxs)(s.A,{children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Weekly"}),(0,X.jsxs)(p.A,{variant:"h6",sx:{fontWeight:600,color:parseFloat(String(t.weeklyPnLPercentage))>0?"success.main":parseFloat(String(t.weeklyPnLPercentage))<0?"error.main":"text.primary"},children:[parseFloat(String(t.weeklyPnLPercentage))>0?"+":"",parseFloat(String(t.weeklyPnLPercentage)).toFixed(1),"%"]})]}),(0,X.jsxs)(s.A,{children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Monthly"}),(0,X.jsxs)(p.A,{variant:"h6",sx:{fontWeight:600,color:parseFloat(String(t.monthlyPnLPercentage))>0?"success.main":parseFloat(String(t.monthlyPnLPercentage))<0?"error.main":"text.primary"},children:[parseFloat(String(t.monthlyPnLPercentage))>0?"+":"",parseFloat(String(t.monthlyPnLPercentage)).toFixed(1),"%"]})]}),(0,X.jsxs)(s.A,{children:[(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Yearly"}),(0,X.jsxs)(p.A,{variant:"h6",sx:{fontWeight:600,color:parseFloat(String(t.yearlyPnLPercentage))>0?"success.main":parseFloat(String(t.yearlyPnLPercentage))<0?"error.main":"text.primary"},children:[parseFloat(String(t.yearlyPnLPercentage))>0?"+":"",parseFloat(String(t.yearlyPnLPercentage)).toFixed(1),"%"]})]})]})]})]})]}),(0,X.jsxs)(x.A,{sx:{justifyContent:"flex-end",p:2,pt:1,borderTop:`1px solid ${(0,l.X4)(fe.palette.divider,.1)}`},children:[(0,X.jsx)(y.A,{size:"small",startIcon:(0,X.jsx)(V.A,{}),onClick:t=>(async(e,t)=>{if(e.stopPropagation(),ne&&0===t.loadedYears.length&&!Xe[t.id]){$e((e=>({...e,[t.id]:!0}))),await ne(t.id);const e=C.find((e=>e.id===t.id));Te(e||t)}else Te(t)})(t,e),sx:{color:"primary.main","&:hover":{bgcolor:(0,l.X4)(fe.palette.primary.main,.1)}},children:"View Charts"}),(0,X.jsx)(y.A,{size:"small",onClick:t=>((e,t)=>{e.stopPropagation(),ye(t),he(!0)})(t,e),sx:{color:"primary.main","&:hover":{bgcolor:(0,l.X4)(fe.palette.primary.main,.1)}},children:"Edit"}),(0,X.jsx)(y.A,{size:"small",onClick:t=>((e,t)=>{e.stopPropagation(),me(t),xe(!0)})(t,e.id),sx:{color:"error.main","&:hover":{bgcolor:(0,l.X4)(fe.palette.error.main,.1)}},children:"Delete"})]})]},e.id)}))}):(0,X.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:8,bgcolor:"background.paper",borderRadius:2,boxShadow:1},children:[(0,X.jsx)(L.A,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,X.jsx)(p.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No calendars yet"}),(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",align:"center",sx:{mb:3},children:"Create your first trading calendar to start tracking your trades"}),(0,X.jsx)(y.A,{variant:"contained",startIcon:(0,X.jsx)(B.A,{}),onClick:()=>de(!0),children:"Create Calendar"})]}),(0,X.jsx)($,{open:le,onClose:()=>de(!1),onSubmit:async e=>{be(!0);try{await S(e.name,e.accountBalance,e.maxDailyDrawdown,e.weeklyTarget,e.monthlyTarget,e.yearlyTarget,e.riskPerTrade,e.dynamicRiskEnabled,e.increasedRiskPercentage,e.profitThresholdPercentage),de(!1)}catch(t){console.error("Error creating calendar:",t)}finally{be(!1)}},isSubmitting:Ae,mode:"create",title:"Create New Calendar",submitButtonText:"Create"}),(0,X.jsx)($,{open:ge,onClose:()=>he(!1),onSubmit:async e=>{if(ue){ve(!0);try{const t={name:e.name,accountBalance:e.accountBalance,maxDailyDrawdown:e.maxDailyDrawdown,weeklyTarget:e.weeklyTarget,monthlyTarget:e.monthlyTarget,yearlyTarget:e.yearlyTarget,riskPerTrade:e.riskPerTrade,dynamicRiskEnabled:e.dynamicRiskEnabled,increasedRiskPercentage:e.increasedRiskPercentage,profitThresholdPercentage:e.profitThresholdPercentage};await F(ue.id,t),he(!1)}catch(t){console.error("Error updating calendar:",t)}finally{ve(!1)}}},initialData:ue||void 0,isSubmitting:je,mode:"edit",title:"Edit Calendar",submitButtonText:"Save Changes"}),(0,X.jsxs)(j.A,{open:ce,onClose:()=>xe(!1),maxWidth:"xs",fullWidth:!0,...q.z,children:[(0,X.jsxs)(v.A,{sx:{display:"flex",alignItems:"center",gap:1,color:"error.main"},children:[(0,X.jsx)(U.A,{fontSize:"small"}),"Delete Calendar"]}),(0,X.jsx)(f.A,{children:(0,X.jsx)(p.A,{children:"Are you sure you want to delete this calendar? This action cannot be undone."})}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(y.A,{onClick:()=>xe(!1),sx:{color:"text.secondary"},children:"Cancel"}),(0,X.jsx)(y.A,{onClick:()=>{pe&&(D(pe),me(null)),xe(!1)},sx:{color:"error.main"},children:"Delete"})]})]}),(0,X.jsxs)(j.A,{open:null!==we,onClose:Ie,maxWidth:"lg",fullWidth:!0,...q.z,PaperProps:{sx:{minHeight:"80vh",maxHeight:"90vh",bgcolor:"background.paper",backgroundImage:"none"}},children:[(0,X.jsxs)(v.A,{sx:{borderBottom:`1px solid ${(0,l.X4)(fe.palette.divider,.1)}`,pb:2,height:"60px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:1},children:[(0,X.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,X.jsx)(V.A,{color:"primary"}),(0,X.jsxs)(p.A,{variant:"h6",children:["Performance Charts - ",null===we||void 0===we?void 0:we.name]})]}),"month"===Fe?(0,X.jsx)(y.A,{onClick:()=>De(!0),startIcon:(0,X.jsx)(_.A,{}),variant:"outlined",size:"small",children:(0,H.GP)(Pe,"MMMM yyyy")}):"year"===Fe?(0,X.jsx)(w.A,{size:"small",variant:"outlined",children:(0,X.jsx)(T.A,{value:Pe.getFullYear(),onChange:e=>(e=>{const t=new Date(e,Pe.getMonth(),1);Ce(t)})(e.target.value),sx:{minWidth:120},children:Array.from({length:10},((e,t)=>(new Date).getFullYear()-t)).map((e=>(0,X.jsx)(P.A,{value:e,children:e},e)))})}):null]}),(0,X.jsx)(f.A,{sx:{p:3,backgroundColor:"dark"===fe.palette.mode?(0,l.X4)(fe.palette.background.paper,.6):"#f0f0f0","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:(0,l.X4)(fe.palette.background.default,.5),borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:(0,l.X4)(fe.palette.primary.main,.2),borderRadius:"4px","&:hover":{background:(0,l.X4)(fe.palette.primary.main,.3)}}},children:we&&(0,X.jsx)(J.A,{trades:we.cachedTrades||[],selectedDate:Pe,accountBalance:we.accountBalance,monthlyTarget:null!==(t=we.monthlyTarget)&&void 0!==t?t:void 0,maxDailyDrawdown:we.maxDailyDrawdown,onTimePeriodChange:e=>{We(e)}})}),(0,X.jsx)(k.A,{sx:{p:2,borderTop:`1px solid ${(0,l.X4)(fe.palette.divider,.1)}`,gap:1},children:(0,X.jsx)(y.A,{onClick:Ie,variant:"outlined",size:"small",children:"Close"})})]}),we&&"month"===Fe&&(0,X.jsx)(K.A,{open:Se,onClose:()=>De(!1),onDateSelect:e=>{Ce(e),De(!1)},initialDate:Pe,trades:we.cachedTrades||[],accountBalance:we.accountBalance,monthlyTarget:null!==(a=we.monthlyTarget)&&void 0!==a?a:void 0,yearlyTarget:we.yearlyTarget})]}):(0,X.jsxs)(s.A,{sx:{textAlign:"center",mt:8},children:[(0,X.jsx)(p.A,{variant:"h5",gutterBottom:!0,children:"Welcome to Trade Tracker"}),(0,X.jsx)(p.A,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Sign in to start managing your trades"})]})})]})},oe=ne}}]);
//# sourceMappingURL=214.46703121.chunk.js.map