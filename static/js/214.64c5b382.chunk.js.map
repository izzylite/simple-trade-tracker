{"version":3,"file":"static/js/214.64c5b382.chunk.js","mappings":"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","sources":["components/CalendarFormDialog.tsx","components/CalendarHome.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Button,\r\n  TextField,\r\n  Stack,\r\n  Box,\r\n  CircularProgress,\r\n  Typography,\r\n  FormControlLabel,\r\n  Switch\r\n} from '@mui/material';\r\nimport { Calendar } from '../types/calendar';\r\nimport { BaseDialog } from './common';\r\n\r\nexport interface CalendarFormData {\r\n  name: string;\r\n  accountBalance: number;\r\n  maxDailyDrawdown: number;\r\n  weeklyTarget?: number;\r\n  monthlyTarget?: number;\r\n  yearlyTarget?: number;\r\n  riskPerTrade?: number;\r\n  dynamicRiskEnabled?: boolean;\r\n  increasedRiskPercentage?: number;\r\n  profitThresholdPercentage?: number;\r\n}\r\n\r\ninterface CalendarFormDialogProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (calendarData: CalendarFormData) => Promise<void>;\r\n  initialData?: Partial<Calendar>;\r\n  isSubmitting: boolean;\r\n  mode: 'create' | 'edit';\r\n  title: string;\r\n  submitButtonText: string;\r\n}\r\n\r\nexport const CalendarFormDialog: React.FC<CalendarFormDialogProps> = ({\r\n  open,\r\n  onClose,\r\n  onSubmit,\r\n  initialData,\r\n  isSubmitting,\r\n  mode,\r\n  title,\r\n  submitButtonText\r\n}) => {\r\n  // Form state\r\n  const [name, setName] = useState('');\r\n  const [accountBalance, setAccountBalance] = useState('');\r\n  const [maxDailyDrawdown, setMaxDailyDrawdown] = useState('');\r\n  const [weeklyTarget, setWeeklyTarget] = useState('');\r\n  const [monthlyTarget, setMonthlyTarget] = useState('');\r\n  const [yearlyTarget, setYearlyTarget] = useState('');\r\n  const [riskPerTrade, setRiskPerTrade] = useState('');\r\n  const [dynamicRiskEnabled, setDynamicRiskEnabled] = useState(false);\r\n  const [increasedRiskPercentage, setIncreasedRiskPercentage] = useState('');\r\n  const [profitThresholdPercentage, setProfitThresholdPercentage] = useState('');\r\n\r\n  // Initialize form with initial data when in edit mode or reset when dialog opens/closes\r\n  useEffect(() => {\r\n    if (open) {\r\n      if (initialData && mode === 'edit') {\r\n        setName(initialData.name || '');\r\n        setAccountBalance(initialData.accountBalance?.toString() || '');\r\n        setMaxDailyDrawdown(initialData.maxDailyDrawdown?.toString() || '');\r\n        setWeeklyTarget(initialData.weeklyTarget?.toString() || '');\r\n        setMonthlyTarget(initialData.monthlyTarget?.toString() || '');\r\n        setYearlyTarget(initialData.yearlyTarget?.toString() || '');\r\n        setRiskPerTrade(initialData.riskPerTrade?.toString() || '');\r\n        setDynamicRiskEnabled(initialData.dynamicRiskEnabled || false);\r\n        setIncreasedRiskPercentage(initialData.increasedRiskPercentage?.toString() || '');\r\n        setProfitThresholdPercentage(initialData.profitThresholdPercentage?.toString() || '');\r\n      } else {\r\n        // Reset form for create mode\r\n        resetForm();\r\n      }\r\n    }\r\n  }, [open, initialData, mode]);\r\n\r\n  const resetForm = () => {\r\n    setName('');\r\n    setAccountBalance('');\r\n    setMaxDailyDrawdown('');\r\n    setWeeklyTarget('');\r\n    setMonthlyTarget('');\r\n    setYearlyTarget('');\r\n    setRiskPerTrade('');\r\n    setDynamicRiskEnabled(false);\r\n    setIncreasedRiskPercentage('');\r\n    setProfitThresholdPercentage('');\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (name.trim() && accountBalance.trim() && maxDailyDrawdown.trim()) {\r\n      const balance = parseFloat(accountBalance);\r\n      const maxDrawdown = parseFloat(maxDailyDrawdown);\r\n      const weeklyTargetValue = weeklyTarget.trim() ? parseFloat(weeklyTarget) : undefined;\r\n      const monthlyTargetValue = monthlyTarget.trim() ? parseFloat(monthlyTarget) : undefined;\r\n      const yearlyTargetValue = yearlyTarget.trim() ? parseFloat(yearlyTarget) : undefined;\r\n      const riskPerTradeValue = riskPerTrade.trim() ? parseFloat(riskPerTrade) : undefined;\r\n      const increasedRiskValue = increasedRiskPercentage.trim() ? parseFloat(increasedRiskPercentage) : undefined;\r\n      const profitThresholdValue = profitThresholdPercentage.trim() ? parseFloat(profitThresholdPercentage) : undefined;\r\n\r\n      if (!isNaN(balance) && balance >= 0 && !isNaN(maxDrawdown) && maxDrawdown > 0 &&\r\n          (weeklyTargetValue === undefined || (!isNaN(weeklyTargetValue) && weeklyTargetValue > 0)) &&\r\n          (monthlyTargetValue === undefined || (!isNaN(monthlyTargetValue) && monthlyTargetValue > 0)) &&\r\n          (yearlyTargetValue === undefined || (!isNaN(yearlyTargetValue) && yearlyTargetValue > 0)) &&\r\n          (riskPerTradeValue === undefined || (!isNaN(riskPerTradeValue) && riskPerTradeValue > 0)) &&\r\n          (increasedRiskValue === undefined || (!isNaN(increasedRiskValue) && increasedRiskValue > 0)) &&\r\n          (profitThresholdValue === undefined || (!isNaN(profitThresholdValue) && profitThresholdValue > 0))) {\r\n\r\n        await onSubmit({\r\n          name: name.trim(),\r\n          accountBalance: balance,\r\n          maxDailyDrawdown: maxDrawdown,\r\n          weeklyTarget: weeklyTargetValue,\r\n          monthlyTarget: monthlyTargetValue,\r\n          yearlyTarget: yearlyTargetValue,\r\n          riskPerTrade: riskPerTradeValue,\r\n          dynamicRiskEnabled,\r\n          increasedRiskPercentage: increasedRiskValue,\r\n          profitThresholdPercentage: profitThresholdValue\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const isFormValid = name.trim() && accountBalance.trim() && maxDailyDrawdown.trim();\r\n\r\n  const dialogTitle = title;\r\n\r\n  const dialogActions = (\r\n    <>\r\n      <Button\r\n        onClick={onClose}\r\n        disabled={isSubmitting}\r\n      >\r\n        Cancel\r\n      </Button>\r\n      <Button\r\n        onClick={handleSubmit}\r\n        variant=\"contained\"\r\n        disabled={!isFormValid || isSubmitting}\r\n        sx={{\r\n          minWidth: 100,\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: 1\r\n        }}\r\n      >\r\n        {submitButtonText}\r\n        {isSubmitting && (\r\n          <CircularProgress\r\n            size={20}\r\n            color=\"inherit\"\r\n          />\r\n        )}\r\n      </Button>\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <BaseDialog\r\n      open={open}\r\n      onClose={() => !isSubmitting && onClose()}\r\n      maxWidth=\"xs\"\r\n      fullWidth\r\n      title={dialogTitle}\r\n      actions={dialogActions}\r\n      hideFooterCancelButton={true}\r\n    >\r\n      <Stack spacing={2} sx={{ mt: 1 }}>\r\n          <TextField\r\n            label=\"Calendar Name\"\r\n            fullWidth\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            label={mode === 'create' ? \"Initial Account Balance\" : \"Account Balance\"}\r\n            fullWidth\r\n            value={accountBalance}\r\n            onChange={(e) => {\r\n              const value = e.target.value;\r\n              if (value === '' || /^\\d*\\.?\\d*$/.test(value)) {\r\n                setAccountBalance(value);\r\n              }\r\n            }}\r\n            type=\"number\"\r\n            InputProps={{\r\n              startAdornment: <Box component=\"span\" sx={{ mr: 1 }}>$</Box>\r\n            }}\r\n          />\r\n          <TextField\r\n            label=\"Max Daily Drawdown (%)\"\r\n            fullWidth\r\n            value={maxDailyDrawdown}\r\n            onChange={(e) => {\r\n              const value = e.target.value;\r\n              if (value === '' || /^\\d*\\.?\\d*$/.test(value)) {\r\n                setMaxDailyDrawdown(value);\r\n              }\r\n            }}\r\n            type=\"number\"\r\n            InputProps={{\r\n              endAdornment: <Box component=\"span\" sx={{ ml: 1 }}>%</Box>\r\n            }}\r\n            helperText=\"Maximum allowed loss percentage per day\"\r\n          />\r\n          <TextField\r\n            label=\"Weekly Target (%)\"\r\n            fullWidth\r\n            value={weeklyTarget}\r\n            onChange={(e) => {\r\n              const value = e.target.value;\r\n              if (value === '' || /^\\d*\\.?\\d*$/.test(value)) {\r\n                setWeeklyTarget(value);\r\n              }\r\n            }}\r\n            type=\"number\"\r\n            InputProps={{\r\n              endAdornment: <Box component=\"span\" sx={{ ml: 1 }}>%</Box>\r\n            }}\r\n            helperText=\"Target profit percentage per week\"\r\n          />\r\n          <TextField\r\n            label=\"Monthly Target (%)\"\r\n            fullWidth\r\n            value={monthlyTarget}\r\n            onChange={(e) => {\r\n              const value = e.target.value;\r\n              if (value === '' || /^\\d*\\.?\\d*$/.test(value)) {\r\n                setMonthlyTarget(value);\r\n              }\r\n            }}\r\n            type=\"number\"\r\n            InputProps={{\r\n              endAdornment: <Box component=\"span\" sx={{ ml: 1 }}>%</Box>\r\n            }}\r\n            helperText=\"Target profit percentage per month\"\r\n          />\r\n          <TextField\r\n            label=\"Yearly Target (%)\"\r\n            fullWidth\r\n            value={yearlyTarget}\r\n            onChange={(e) => {\r\n              const value = e.target.value;\r\n              if (value === '' || /^\\d*\\.?\\d*$/.test(value)) {\r\n                setYearlyTarget(value);\r\n              }\r\n            }}\r\n            type=\"number\"\r\n            InputProps={{\r\n              endAdornment: <Box component=\"span\" sx={{ ml: 1 }}>%</Box>\r\n            }}\r\n            helperText=\"Target profit percentage per year\"\r\n          />\r\n          <TextField\r\n            label=\"Risk Per Trade (%)\"\r\n            fullWidth\r\n            value={riskPerTrade}\r\n            onChange={(e) => {\r\n              const value = e.target.value;\r\n              if (value === '' || /^\\d*\\.?\\d*$/.test(value)) {\r\n                setRiskPerTrade(value);\r\n              }\r\n            }}\r\n            type=\"number\"\r\n            InputProps={{\r\n              endAdornment: <Box component=\"span\" sx={{ ml: 1 }}>%</Box>\r\n            }}\r\n            helperText=\"Percentage of account balance to risk per trade (optional)\"\r\n          />\r\n\r\n          {riskPerTrade && (\r\n            <Box sx={{ border: '1px solid', borderColor: 'divider', borderRadius: 1, p: 2, mt: 1 }}>\r\n              <Typography variant=\"subtitle2\" sx={{ mb: 1.5, fontWeight: 600 }}>\r\n                Dynamic Risk Settings\r\n              </Typography>\r\n\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={dynamicRiskEnabled}\r\n                    onChange={(e) => setDynamicRiskEnabled(e.target.checked)}\r\n                    color=\"primary\"\r\n                  />\r\n                }\r\n                label=\"Enable Dynamic Risk\"\r\n                sx={{ mb: 1.5 }}\r\n              />\r\n\r\n              {dynamicRiskEnabled && (\r\n                <Stack spacing={2}>\r\n                  <TextField\r\n                    label=\"Profit Threshold (%)\"\r\n                    fullWidth\r\n                    value={profitThresholdPercentage}\r\n                    onChange={(e) => {\r\n                      const value = e.target.value;\r\n                      if (value === '' || /^\\d*\\.?\\d*$/.test(value)) {\r\n                        setProfitThresholdPercentage(value);\r\n                      }\r\n                    }}\r\n                    type=\"number\"\r\n                    InputProps={{\r\n                      endAdornment: <Box component=\"span\" sx={{ ml: 1 }}>%</Box>\r\n                    }}\r\n                    helperText=\"Increase risk when profit exceeds this percentage\"\r\n                    size=\"small\"\r\n                  />\r\n\r\n                  <TextField\r\n                    label=\"Increased Risk (%)\"\r\n                    fullWidth\r\n                    value={increasedRiskPercentage}\r\n                    onChange={(e) => {\r\n                      const value = e.target.value;\r\n                      if (value === '' || /^\\d*\\.?\\d*$/.test(value)) {\r\n                        setIncreasedRiskPercentage(value);\r\n                      }\r\n                    }}\r\n                    type=\"number\"\r\n                    InputProps={{\r\n                      endAdornment: <Box component=\"span\" sx={{ ml: 1 }}>%</Box>\r\n                    }}\r\n                    helperText=\"New risk percentage when profit threshold is exceeded\"\r\n                    size=\"small\"\r\n                  />\r\n                </Stack>\r\n              )}\r\n            </Box>\r\n          )}\r\n        </Stack>\r\n    </BaseDialog>\r\n  );\r\n};\r\n\r\nexport default CalendarFormDialog;\r\n","import React, { useState, useMemo, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  CardActions,\r\n  IconButton,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  useTheme,\r\n  alpha,\r\n  Container,\r\n  Stack,\r\n  Divider,\r\n  Tooltip,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  AppBar,\r\n  Toolbar,\r\n  Avatar,\r\n  CircularProgress\r\n} from '@mui/material';\r\nimport CalendarFormDialog, { CalendarFormData } from './CalendarFormDialog';\r\nimport {\r\n  Add as AddIcon,\r\n  CalendarToday as CalendarIcon,\r\n  Delete as DeleteIcon,\r\n  TrendingUp,\r\n  CalendarMonth,\r\n  Edit as EditIcon,\r\n  TrendingDown,\r\n  InfoOutlined,\r\n  BarChart as ChartIcon,\r\n  Google as GoogleIcon,\r\n  Logout as LogoutIcon,\r\n  Brightness4 as DarkModeIcon,\r\n  Brightness7 as LightModeIcon,\r\n  ExpandMore,\r\n  ExpandLess\r\n} from '@mui/icons-material';\r\nimport { format } from 'date-fns';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Calendar } from '../types/calendar';\r\nimport { formatCurrency } from '../utils/formatters';\r\nimport { dialogProps } from '../styles/dialogStyles';\r\nimport PerformanceCharts from './PerformanceCharts';\r\nimport SelectDateDialog from './SelectDateDialog';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { keyframes } from '@mui/system';\r\nimport { getCalendarStats } from '../services/calendarService';\r\n// TradeDetailDialog has been removed\r\n\r\ninterface CalendarHomeProps {\r\n  calendars: Calendar[];\r\n  onCreateCalendar: (name: string, accountBalance: number, maxDailyDrawdown: number, weeklyTarget?: number, monthlyTarget?: number, yearlyTarget?: number, riskPerTrade?: number, dynamicRiskEnabled?: boolean, increasedRiskPercentage?: number, profitThresholdPercentage?: number) => void;\r\n  onDeleteCalendar: (id: string) => void;\r\n  onUpdateCalendar: (id: string, updates: Partial<Calendar>) => void;\r\n  onToggleTheme: () => void;\r\n  mode: 'light' | 'dark';\r\n  isLoading?: boolean;\r\n  loadAllTrades?: (calendarId: string) => Promise<void>;\r\n}\r\n\r\nconst shimmer = keyframes`\r\n  0% {\r\n    background-position: -200% 0;\r\n  }\r\n  100% {\r\n    background-position: 200% 0;\r\n  }\r\n`;\r\n\r\nconst CalendarSkeleton = () => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Card sx={{ height: '100%' }}>\r\n      <CardContent sx={{ p: 3 }}>\r\n        <Box sx={{ mb: 2.5 }}>\r\n          {/* Title shimmer */}\r\n          <Box\r\n            sx={{\r\n              height: 28,\r\n              width: '60%',\r\n              borderRadius: 1,\r\n              mb: 1,\r\n              background: `linear-gradient(90deg,\r\n                ${alpha(theme.palette.background.paper, 0.1)} 25%,\r\n                ${alpha(theme.palette.background.paper, 0.2)} 50%,\r\n                ${alpha(theme.palette.background.paper, 0.1)} 75%)`,\r\n              backgroundSize: '200% 100%',\r\n              animation: `${shimmer} 1.5s infinite linear`\r\n            }}\r\n          />\r\n          {/* Date shimmer */}\r\n          <Stack direction=\"row\" spacing={2} sx={{ mb: 1 }}>\r\n            <Box\r\n              sx={{\r\n                height: 20,\r\n                width: '30%',\r\n                borderRadius: 0.5,\r\n                background: `linear-gradient(90deg,\r\n                  ${alpha(theme.palette.background.paper, 0.1)} 25%,\r\n                  ${alpha(theme.palette.background.paper, 0.2)} 50%,\r\n                  ${alpha(theme.palette.background.paper, 0.1)} 75%)`,\r\n                backgroundSize: '200% 100%',\r\n                animation: `${shimmer} 1.5s infinite linear`\r\n              }}\r\n            />\r\n            <Box\r\n              sx={{\r\n                height: 20,\r\n                width: '30%',\r\n                borderRadius: 0.5,\r\n                background: `linear-gradient(90deg,\r\n                  ${alpha(theme.palette.background.paper, 0.1)} 25%,\r\n                  ${alpha(theme.palette.background.paper, 0.2)} 50%,\r\n                  ${alpha(theme.palette.background.paper, 0.1)} 75%)`,\r\n                backgroundSize: '200% 100%',\r\n                animation: `${shimmer} 1.5s infinite linear`\r\n              }}\r\n            />\r\n          </Stack>\r\n        </Box>\r\n        <Divider sx={{ my: 2, opacity: 0.6 }} />\r\n        {/* Stats shimmer */}\r\n        <Stack spacing={2}>\r\n          {[1, 2, 3].map((i) => (\r\n            <Box key={i}\r\n              sx={{\r\n                height: 24,\r\n                width: i === 2 ? '70%' : '85%',\r\n                borderRadius: 0.5,\r\n                background: `linear-gradient(90deg,\r\n                  ${alpha(theme.palette.background.paper, 0.1)} 25%,\r\n                  ${alpha(theme.palette.background.paper, 0.2)} 50%,\r\n                  ${alpha(theme.palette.background.paper, 0.1)} 75%)`,\r\n                backgroundSize: '200% 100%',\r\n                animation: `${shimmer} 1.5s infinite linear`\r\n              }}\r\n            />\r\n          ))}\r\n        </Stack>\r\n      </CardContent>\r\n      <CardActions sx={{\r\n        justifyContent: 'flex-end',\r\n        p: 2,\r\n        pt: 1,\r\n        borderTop: `1px solid ${alpha(theme.palette.divider, 0.1)}`\r\n      }}>\r\n        {/* Action buttons shimmer */}\r\n        <Stack direction=\"row\" spacing={1}>\r\n          {[1, 2, 3].map((i) => (\r\n            <Box key={i}\r\n              sx={{\r\n                height: 32,\r\n                width: 80,\r\n                borderRadius: 1,\r\n                background: `linear-gradient(90deg,\r\n                  ${alpha(theme.palette.background.paper, 0.1)} 25%,\r\n                  ${alpha(theme.palette.background.paper, 0.2)} 50%,\r\n                  ${alpha(theme.palette.background.paper, 0.1)} 75%)`,\r\n                backgroundSize: '200% 100%',\r\n                animation: `${shimmer} 1.5s infinite linear`\r\n              }}\r\n            />\r\n          ))}\r\n        </Stack>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport const CalendarHome: React.FC<CalendarHomeProps> = ({\r\n  calendars,\r\n  onCreateCalendar,\r\n  onDeleteCalendar,\r\n  onUpdateCalendar,\r\n  onToggleTheme,\r\n  mode,\r\n  isLoading: externalLoading,\r\n  loadAllTrades\r\n}) => {\r\n  const { user, signInWithGoogle, signOut } = useAuth();\r\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\r\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\r\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\r\n  const [calendarToDelete, setCalendarToDelete] = useState<string | null>(null);\r\n  const [calendarToEdit, setCalendarToEdit] = useState<Calendar | null>(null);\r\n  const [isCreating, setIsCreating] = useState(false);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [expandedCalendars, setExpandedCalendars] = useState<{[key: string]: boolean}>({});\r\n  const theme = useTheme();\r\n  const navigate = useNavigate();\r\n  const [selectedCalendarForCharts, setSelectedCalendarForCharts] = useState<Calendar | null>(null);\r\n  const [selectedMonth, setSelectedMonth] = useState<Date>(new Date());\r\n  const [isDateDialogOpen, setIsDateDialogOpen] = useState(false);\r\n  const [currentTimePeriod, setCurrentTimePeriod] = useState<'month' | 'year' | 'all'>('month');\r\n  // Track which calendars we've attempted to load trades for\r\n  const [loadAttempted, setLoadAttempted] = useState<{[key: string]: boolean}>({});\r\n  // We no longer need selectedTrade state since TradeDetailDialog has been removed\r\n\r\n  // Use external loading state if provided, otherwise use internal loading state\r\n  const isLoading = externalLoading !== undefined ? externalLoading : false;\r\n\r\n  // Update selectedCalendarForCharts when calendars change and a calendar is selected\r\n  useEffect(() => {\r\n    if (selectedCalendarForCharts && calendars.length > 0) {\r\n      const updatedCalendar = calendars.find(c => c.id === selectedCalendarForCharts.id);\r\n      if (updatedCalendar && updatedCalendar.cachedTrades.length > 0) {\r\n        setSelectedCalendarForCharts(updatedCalendar);\r\n      }\r\n    }\r\n  }, [calendars, selectedCalendarForCharts]);\r\n\r\n  const handleCreateCalendarSubmit = async (data: CalendarFormData) => {\r\n    setIsCreating(true);\r\n    try {\r\n      await onCreateCalendar(\r\n        data.name,\r\n        data.accountBalance,\r\n        data.maxDailyDrawdown,\r\n        data.weeklyTarget,\r\n        data.monthlyTarget,\r\n        data.yearlyTarget,\r\n        data.riskPerTrade,\r\n        data.dynamicRiskEnabled,\r\n        data.increasedRiskPercentage,\r\n        data.profitThresholdPercentage\r\n      );\r\n      setIsCreateDialogOpen(false);\r\n    } catch (error) {\r\n      console.error('Error creating calendar:', error);\r\n    } finally {\r\n      setIsCreating(false);\r\n    }\r\n  };\r\n\r\n  const handleEditCalendarSubmit = async (data: CalendarFormData) => {\r\n    if (!calendarToEdit) return;\r\n\r\n    setIsEditing(true);\r\n    try {\r\n      const updates: Partial<Calendar> = {\r\n        name: data.name,\r\n        accountBalance: data.accountBalance,\r\n        maxDailyDrawdown: data.maxDailyDrawdown,\r\n        weeklyTarget: data.weeklyTarget,\r\n        monthlyTarget: data.monthlyTarget,\r\n        yearlyTarget: data.yearlyTarget,\r\n        riskPerTrade: data.riskPerTrade,\r\n        dynamicRiskEnabled: data.dynamicRiskEnabled,\r\n        increasedRiskPercentage: data.increasedRiskPercentage,\r\n        profitThresholdPercentage: data.profitThresholdPercentage\r\n      };\r\n\r\n      await onUpdateCalendar(calendarToEdit.id, updates);\r\n      setIsEditDialogOpen(false);\r\n    } catch (error) {\r\n      console.error('Error updating calendar:', error);\r\n    } finally {\r\n      setIsEditing(false);\r\n    }\r\n  };\r\n\r\n\r\n\r\n  const handleCalendarClick = async (calendarId: string) => {\r\n    // Load all trades for the calendar if loadAllTrades is provided\r\n    if (loadAllTrades) {\r\n      const calendar = calendars.find(c => c.id === calendarId);\r\n      if (calendar && calendar.loadedYears.length === 0 && !loadAttempted[calendarId]) {\r\n        // Mark that we've attempted to load trades for this calendar\r\n        setLoadAttempted(prev => ({ ...prev, [calendarId]: true }));\r\n        await loadAllTrades(calendarId);\r\n      }\r\n    }\r\n\r\n    navigate(`/calendar/${calendarId}`);\r\n  };\r\n\r\n  const handleDeleteClick = (e: React.MouseEvent, calendarId: string) => {\r\n    e.stopPropagation();\r\n    setCalendarToDelete(calendarId);\r\n    setIsDeleteDialogOpen(true);\r\n  };\r\n\r\n  const handleEditClick = (e: React.MouseEvent, calendar: Calendar) => {\r\n    e.stopPropagation();\r\n    setCalendarToEdit(calendar);\r\n    setIsEditDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = () => {\r\n    if (calendarToDelete) {\r\n      onDeleteCalendar(calendarToDelete);\r\n      setCalendarToDelete(null);\r\n    }\r\n    setIsDeleteDialogOpen(false);\r\n  };\r\n\r\n  const handleToggleExpand = (e: React.MouseEvent, calendarId: string) => {\r\n    e.stopPropagation(); // Prevent calendar click navigation\r\n    setExpandedCalendars(prev => ({\r\n      ...prev,\r\n      [calendarId]: !prev[calendarId]\r\n    }));\r\n  };\r\n\r\n  const handleViewCharts = async (e: React.MouseEvent, calendar: Calendar) => {\r\n    e.stopPropagation();\r\n\r\n    // First, set the calendar to show the dialog immediately\r\n    setSelectedCalendarForCharts(calendar);\r\n\r\n    // Then load all trades for the calendar if needed\r\n    if (loadAllTrades && (calendar.loadedYears.length === 0 || calendar.cachedTrades.length === 0)) {\r\n      // Mark that we've attempted to load trades for this calendar\r\n      setLoadAttempted(prev => ({ ...prev, [calendar.id]: true }));\r\n\r\n      // Load the trades\r\n      await loadAllTrades(calendar.id);\r\n\r\n      // After loading, update with the latest calendar data that includes the trades\r\n      const updatedCalendar = calendars.find(c => c.id === calendar.id);\r\n      if (updatedCalendar) {\r\n        setSelectedCalendarForCharts(updatedCalendar);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCloseCharts = () => {\r\n    setSelectedCalendarForCharts(null);\r\n  };\r\n\r\n  const handleMonthChange = (event: any) => {\r\n    setSelectedMonth(new Date(event.target.value));\r\n  };\r\n\r\n  const handleTimePeriodChange = (period: 'month' | 'year' | 'all') => {\r\n    setCurrentTimePeriod(period);\r\n  };\r\n\r\n  const handleYearChange = (year: number) => {\r\n    const newDate = new Date(year, selectedMonth.getMonth(), 1);\r\n    setSelectedMonth(newDate);\r\n  };\r\n\r\n  // Get available months for the selected calendar\r\n  const availableMonths = useMemo(() => {\r\n    if (!selectedCalendarForCharts) return [];\r\n\r\n    const trades = selectedCalendarForCharts.cachedTrades || [];\r\n    if (trades.length === 0) return [new Date()];\r\n\r\n    const dates = trades.map(trade => new Date(trade.date));\r\n    const minDate = new Date(Math.min(...dates.map(d => d.getTime())));\r\n    const maxDate = new Date(Math.max(...dates.map(d => d.getTime())));\r\n\r\n    // Create an array of months between min and max date\r\n    const months: Date[] = [];\r\n    let currentDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\r\n    const endDate = new Date(maxDate.getFullYear(), maxDate.getMonth(), 1);\r\n\r\n    while (currentDate <= endDate) {\r\n      months.push(new Date(currentDate));\r\n      currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1);\r\n    }\r\n\r\n    return months;\r\n  }, [selectedCalendarForCharts]);\r\n\r\n\r\n\r\n  const handleSignIn = async () => {\r\n    try {\r\n      await signInWithGoogle();\r\n    } catch (error) {\r\n      console.error('Failed to sign in:', error);\r\n    }\r\n  };\r\n\r\n  const handleSignOut = async () => {\r\n    try {\r\n      await signOut();\r\n    } catch (error) {\r\n      console.error('Failed to sign out:', error);\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <Box>\r\n\r\n      <AppBar\r\n        position=\"fixed\"\r\n        color=\"transparent\"\r\n        elevation={0.7}\r\n        sx={{\r\n          backdropFilter: 'blur(8px)',\r\n          backgroundColor: alpha(mode === 'light' ? '#ffffff' : theme.palette.background.default, 0.9),\r\n          borderBottom: `1px solid ${theme.palette.divider}`,\r\n          zIndex: (theme) => theme.zIndex.drawer + 1\r\n        }}>\r\n        <Toolbar>\r\n          <Typography variant=\"h5\" component=\"h1\" sx={{ flexGrow: 1 }}>\r\n            Trade Tracker\r\n          </Typography>\r\n          {user ? (\r\n            <Stack direction=\"row\" spacing={2} alignItems=\"center\">\r\n              <IconButton\r\n                onClick={onToggleTheme}\r\n                color=\"inherit\"\r\n                size=\"small\"\r\n                sx={{\r\n                  '&:hover': {\r\n                    bgcolor: alpha(theme.palette.primary.main, 0.1),\r\n                  }\r\n                }}\r\n              >\r\n                {mode === 'dark' ? <LightModeIcon /> : <DarkModeIcon />}\r\n              </IconButton>\r\n              <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  {user.email}\r\n                </Typography>\r\n                <Avatar\r\n                  src={user.photoURL || undefined}\r\n                  sx={{\r\n                    width: 32,\r\n                    height: 32,\r\n                    bgcolor: theme.palette.primary.main,\r\n                    fontSize: '0.875rem'\r\n                  }}\r\n                >\r\n                  {user.email ? user.email[0].toUpperCase() : 'U'}\r\n                </Avatar>\r\n              </Stack>\r\n              <Button\r\n                variant=\"outlined\"\r\n                color=\"inherit\"\r\n                startIcon={<LogoutIcon />}\r\n                onClick={handleSignOut}\r\n                size=\"small\"\r\n              >\r\n                Sign Out\r\n              </Button>\r\n            </Stack>\r\n          ) : (\r\n            <Stack direction=\"row\" spacing={2} alignItems=\"center\">\r\n              <IconButton\r\n                onClick={onToggleTheme}\r\n                color=\"inherit\"\r\n                size=\"small\"\r\n                sx={{\r\n                  '&:hover': {\r\n                    bgcolor: alpha(theme.palette.primary.main, 0.1),\r\n                  }\r\n                }}\r\n              >\r\n                {mode === 'dark' ? <LightModeIcon /> : <DarkModeIcon />}\r\n              </IconButton>\r\n              <Button\r\n                variant=\"contained\"\r\n                startIcon={<GoogleIcon />}\r\n                onClick={handleSignIn}\r\n                sx={{\r\n                  bgcolor: '#4285F4',\r\n                  '&:hover': {\r\n                    bgcolor: '#3367D6'\r\n                  }\r\n                }}\r\n              >\r\n                Sign in with Google\r\n              </Button>\r\n            </Stack>\r\n          )}\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      {/* Add toolbar spacing to account for fixed AppBar */}\r\n      <Toolbar />\r\n      <Container maxWidth=\"lg\" sx={{ mt: 4 }}>\r\n        {user ? (\r\n          <>\r\n            <Box sx={{ mb: 4, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n              <Typography variant=\"h4\" component=\"h2\">\r\n                Your Calendars\r\n              </Typography>\r\n              <Button\r\n                variant=\"contained\"\r\n                startIcon={<AddIcon />}\r\n                onClick={() => setIsCreateDialogOpen(true)}\r\n              >\r\n                Create Calendar\r\n              </Button>\r\n            </Box>\r\n\r\n            {calendars.length === 0 && !isLoading ? (\r\n              <Box\r\n                sx={{\r\n                  display: 'flex',\r\n                  flexDirection: 'column',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  py: 8,\r\n                  bgcolor: 'background.paper',\r\n                  borderRadius: 2,\r\n                  boxShadow: 1\r\n                }}\r\n              >\r\n                <CalendarIcon sx={{ fontSize: 48, color: 'text.secondary', mb: 2 }} />\r\n                <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\r\n                  No calendars yet\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" sx={{ mb: 3 }}>\r\n                  Create your first trading calendar to start tracking your trades\r\n                </Typography>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  startIcon={<AddIcon />}\r\n                  onClick={() => setIsCreateDialogOpen(true)}\r\n                >\r\n                  Create Calendar\r\n                </Button>\r\n              </Box>\r\n            ) : (\r\n              <Box sx={{\r\n                display: 'grid',\r\n                gridTemplateColumns: {\r\n                  xs: '1fr',\r\n                  sm: 'repeat(2, 1fr)',\r\n                  md: 'repeat(3, 1fr)'\r\n                },\r\n                gap: 2\r\n              }}>\r\n                {isLoading ? (\r\n                  // Show shimmer skeletons while loading\r\n                  Array.from({ length: 3 }).map((_, index) => (\r\n                    <CalendarSkeleton key={index} />\r\n                  ))\r\n                ) : (\r\n                  // Show actual calendars\r\n                  calendars.map(calendar => {\r\n                    // Use the imported getCalendarStats function from calendarService\r\n                    const stats = getCalendarStats(calendar);\r\n                    return (\r\n                      <Card\r\n                        key={calendar.id}\r\n                        sx={{\r\n                          cursor: 'pointer',\r\n                          transition: 'all 0.3s ease',\r\n                          position: 'relative',\r\n                          overflow: 'hidden',\r\n                          display: 'flex',\r\n                          flexDirection: 'column',\r\n                          height: expandedCalendars[calendar.id] ? 'auto' : '400px',\r\n                          '&:hover': {\r\n                            transform: 'translateY(-4px)',\r\n                            boxShadow: theme.shadows[8],\r\n                            '& .calendar-gradient': {\r\n                              opacity: 1\r\n                            }\r\n                          },\r\n                          '&::before': {\r\n                            content: '\"\"',\r\n                            position: 'absolute',\r\n                            top: 0,\r\n                            left: 0,\r\n                            right: 0,\r\n                            height: '4px',\r\n                          }\r\n                        }}\r\n                        onClick={() => handleCalendarClick(calendar.id)}\r\n                      >\r\n                        <Box\r\n                          className=\"calendar-gradient\"\r\n                          sx={{\r\n                            position: 'absolute',\r\n                            top: 0,\r\n                            left: 0,\r\n                            right: 0,\r\n                            bottom: 0,\r\n                            background: `linear-gradient(135deg, ${alpha(theme.palette.primary.main, 0.05)}, ${alpha(theme.palette.primary.light, 0.02)})`,\r\n                            opacity: 0,\r\n                            transition: 'opacity 0.3s ease',\r\n                            pointerEvents: 'none'\r\n                          }}\r\n                        />\r\n                        <CardContent sx={{ p: 3, display: 'flex', flexDirection: 'column', flexGrow: 1, maxHeight: expandedCalendars[calendar.id] ? 'none' : 'calc(100% - 60px)' }}>\r\n                          <Box sx={{ mb: 1.5 }}>\r\n                            <Box\r\n                              sx={{\r\n                                display: 'flex',\r\n                                justifyContent: 'space-between',\r\n                                alignItems: 'center',\r\n                                mb: 1,\r\n                                cursor: 'pointer'\r\n                              }}\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                handleToggleExpand(e, calendar.id);\r\n                              }}\r\n                            >\r\n                              <Typography\r\n                                variant=\"h6\"\r\n                                gutterBottom\r\n                                sx={{\r\n                                  fontWeight: 600,\r\n                                  color: 'text.primary',\r\n                                  display: 'flex',\r\n                                  alignItems: 'center',\r\n                                  gap: 1,\r\n                                  mb: 0\r\n                                }}\r\n                              >\r\n                                {calendar.name}\r\n                                {stats.totalPnL > 0 && (\r\n                                  <TrendingUp sx={{ fontSize: '1.2rem', color: 'success.main' }} />\r\n                                )}\r\n                                {stats.totalPnL < 0 && (\r\n                                  <TrendingDown sx={{ fontSize: '1.2rem', color: 'error.main' }} />\r\n                                )}\r\n                              </Typography>\r\n                              <IconButton\r\n                                size=\"small\"\r\n                                onClick={(e) => {\r\n                                  e.stopPropagation();\r\n                                  handleToggleExpand(e, calendar.id);\r\n                                }}\r\n                                sx={{ color: 'text.secondary' }}\r\n                              >\r\n                                {expandedCalendars[calendar.id] ? <ExpandLess /> : <ExpandMore />}\r\n                              </IconButton>\r\n                            </Box>\r\n                            <Stack direction=\"row\" spacing={2} sx={{ mb: 1 }}>\r\n                              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\r\n                                <CalendarIcon sx={{ fontSize: '1rem' }} />\r\n                                {format(calendar.createdAt, 'MMM d, yyyy')}\r\n                              </Typography>\r\n                              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\r\n                                <EditIcon sx={{ fontSize: '1rem' }} />\r\n                                {format(calendar.lastModified, 'MMM d, yyyy')}\r\n                              </Typography>\r\n                            </Stack>\r\n                          </Box>\r\n                          <Divider sx={{ my: 1, opacity: 0.6 }} />\r\n\r\n                          <Box sx={{\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            mb: 1.5,\r\n                            px: 0.5\r\n                          }}>\r\n                            {!expandedCalendars[calendar.id] && <Box>\r\n                              <Typography variant=\"caption\" color=\"text.secondary\">\r\n                                Initial Balance\r\n                              </Typography>\r\n                              <Typography variant=\"body1\" sx={{ fontWeight: 600 }}>\r\n                                {formatCurrency(calendar.accountBalance)}\r\n                              </Typography>\r\n                            </Box>}\r\n                            {!expandedCalendars[calendar.id] && <Box>\r\n                              <Typography variant=\"caption\" color=\"text.secondary\">\r\n                                Win Rate\r\n                              </Typography>\r\n                              <Typography variant=\"body1\" sx={{ fontWeight: 600 }}>\r\n                                {stats.winRate.toFixed(1)}%\r\n                              </Typography>\r\n                            </Box>}\r\n                          </Box>\r\n\r\n                          <Stack spacing={2} sx={{\r\n                            maxHeight: expandedCalendars[calendar.id] ? 'none' : '180px',\r\n                            overflow: 'hidden',\r\n                            transition: 'max-height 0.3s ease-in-out',\r\n                            flexGrow: 0,\r\n                            mb: 2\r\n                          }}>\r\n                            <Box\r\n                              sx={{\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: 1.5,\r\n                                p: 1.5,\r\n                                borderRadius: 1,\r\n                                bgcolor: alpha(theme.palette.background.default, 0.6)\r\n                              }}\r\n                            >\r\n                              <Box\r\n                                sx={{\r\n                                  width: 40,\r\n                                  height: 40,\r\n                                  borderRadius: '50%',\r\n                                  display: 'flex',\r\n                                  alignItems: 'center',\r\n                                  justifyContent: 'center',\r\n                                  bgcolor: stats.totalPnL > 0\r\n                                    ? alpha(theme.palette.success.main, 0.1)\r\n                                    : stats.totalPnL < 0\r\n                                    ? alpha(theme.palette.error.main, 0.1)\r\n                                    : alpha(theme.palette.grey[500], 0.1)\r\n                                }}\r\n                              >\r\n                                <TrendingUp sx={{\r\n                                  fontSize: '1.2rem',\r\n                                  color: stats.totalPnL > 0\r\n                                    ? theme.palette.success.main\r\n                                    : stats.totalPnL < 0\r\n                                    ? theme.palette.error.main\r\n                                    : theme.palette.grey[500]\r\n                                }} />\r\n                              </Box>\r\n                              <Box>\r\n                                <Typography variant=\"h6\" sx={{\r\n                                  color: stats.totalPnL > 0\r\n                                    ? 'success.main'\r\n                                    : stats.totalPnL < 0\r\n                                    ? 'error.main'\r\n                                    : 'text.secondary',\r\n                                  fontWeight: 600\r\n                                }}>\r\n                                  {formatCurrency(stats.totalPnL)}\r\n                                </Typography>\r\n                                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                  Growth: {stats.growthPercentage.toFixed(2)}%\r\n                                </Typography>\r\n                              </Box>\r\n                            </Box>\r\n\r\n                            <Box sx={{\r\n                              display: 'grid',\r\n                              gridTemplateColumns: 'repeat(2, 1fr)',\r\n                              gap: 2\r\n                            }}>\r\n                              <Box sx={{\r\n                                p: 1.5,\r\n                                borderRadius: 1,\r\n                                bgcolor: alpha(theme.palette.background.default, 0.6), \r\n                                opacity: expandedCalendars[calendar.id] ? 1 : 0, \r\n                              }}>\r\n                                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                                  Initial Balance\r\n                                </Typography>\r\n                                <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\r\n                                  {formatCurrency(stats.initialBalance)}\r\n                                </Typography>\r\n                                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                  Current: {formatCurrency(stats.initialBalance + stats.totalPnL)}\r\n                                </Typography>\r\n                              </Box>\r\n\r\n                              <Box sx={{\r\n                                p: 1.5,\r\n                                borderRadius: 1,\r\n                                bgcolor: alpha(theme.palette.background.default, 0.6), \r\n                                opacity: expandedCalendars[calendar.id] ? 1 : 0, \r\n                              }}>\r\n                                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                                  Win Rate\r\n                                </Typography>\r\n                                <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\r\n                                  {stats.winRate.toFixed(1)}%\r\n                                </Typography>\r\n                                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                  {stats.winCount}W - {stats.lossCount}L\r\n                                </Typography>\r\n                              </Box>\r\n                            </Box>\r\n\r\n                            <Box sx={{\r\n                              display: 'grid',\r\n                              gridTemplateColumns: 'repeat(2, 1fr)',\r\n                              gap: 2\r\n                            }}>\r\n                              <Box sx={{\r\n                                p: 1.5,\r\n                                borderRadius: 1,\r\n                                bgcolor: alpha(theme.palette.background.default, 0.6)\r\n                              }}>\r\n                                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                                  Profit Factor\r\n                                </Typography>\r\n                                <Tooltip\r\n                                  title={\r\n                                    <Box sx={{ p: 1, maxWidth: 300 }}>\r\n                                      <Typography variant=\"body2\" gutterBottom>\r\n                                        Profit Factor is the ratio of gross profit to gross loss. A value greater than 1 indicates profitable trading.\r\n                                      </Typography>\r\n                                      <Typography variant=\"body2\" sx={{ mt: 1 }}>\r\n                                        • Value &gt; 3: Excellent\r\n                                      </Typography>\r\n                                      <Typography variant=\"body2\">\r\n                                        • Value 2-3: Very Good\r\n                                      </Typography>\r\n                                      <Typography variant=\"body2\">\r\n                                        • Value 1.5-2: Good\r\n                                      </Typography>\r\n                                      <Typography variant=\"body2\">\r\n                                        • Value 1-1.5: Marginal\r\n                                      </Typography>\r\n                                      <Typography variant=\"body2\">\r\n                                        • Value &lt; 1: Unprofitable\r\n                                      </Typography>\r\n                                    </Box>\r\n                                  }\r\n                                  arrow\r\n                                  placement=\"top\"\r\n                                >\r\n                                  <Typography variant=\"h6\" sx={{ fontWeight: 600, cursor: 'help' }}>\r\n                                  <InfoOutlined sx={{ fontSize: '1rem', mr: 0.5 }} />\r\n                                    {stats.profitFactor.toFixed(2)}\r\n                                  </Typography>\r\n                                </Tooltip>\r\n                                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ fontSize: '0.75rem' }}>\r\n                                  Avg Win: {formatCurrency(stats.avgWin)}\r\n                                </Typography>\r\n\r\n                              </Box>\r\n\r\n                              <Box sx={{\r\n                                p: 1.5,\r\n                                borderRadius: 1,\r\n                                bgcolor: alpha(theme.palette.background.default, 0.6)\r\n                              }}>\r\n                                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                                  Max Drawdown\r\n                                </Typography>\r\n\r\n\r\n                                <Tooltip\r\n                                  title={\r\n                                    <Box sx={{ p: 1, maxWidth: 300 }}>\r\n                                      <Typography variant=\"body2\" gutterBottom>\r\n                                        Maximum drawdown represents the largest peak-to-trough decline in your account balance.\r\n                                      </Typography>\r\n                                      {stats.maxDrawdown > 0 && (\r\n                                        <>\r\n                                          <Typography variant=\"body2\" sx={{ mt: 1 }}>\r\n                                            Recovery needed: {stats.drawdownRecoveryNeeded.toFixed(1)}%\r\n                                          </Typography>\r\n                                          <Typography variant=\"body2\" sx={{ mt: 1 }}>\r\n                                            Duration: {stats.drawdownDuration} days\r\n                                          </Typography>\r\n                                          {stats.drawdownStartDate && stats.drawdownEndDate && (\r\n                                            <Typography variant=\"body2\" sx={{ mt: 1 }}>\r\n                                              Period: {format(stats.drawdownStartDate, 'MMM d')} - {format(stats.drawdownEndDate, 'MMM d')}\r\n                                            </Typography>\r\n                                          )}\r\n                                        </>\r\n                                      )}\r\n                                    </Box>\r\n                                  }\r\n                                  arrow\r\n                                  placement=\"top\"\r\n                                >\r\n                                 <Typography variant=\"h6\" sx={{ fontWeight: 600, cursor: 'help' }}>\r\n                                 <InfoOutlined sx={{ fontSize: '1rem', mr: 0.5 }} />\r\n                                  {stats.maxDrawdown.toFixed(1)}%\r\n                                </Typography>\r\n                                </Tooltip>\r\n                                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ fontSize: '0.75rem', mt: 0.5 }}>\r\n                                  Avg Loss: {formatCurrency(stats.avgLoss)}\r\n                                </Typography>\r\n\r\n                              </Box>\r\n                            </Box>\r\n\r\n                            {(calendar.weeklyTarget || calendar.monthlyTarget || calendar.yearlyTarget) && (\r\n                              <Box sx={{\r\n                                p: 1.5,\r\n                                borderRadius: 1,\r\n                                bgcolor: alpha(theme.palette.background.default, 0.6)\r\n                              }}>\r\n                                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                                  Target Progress\r\n                                </Typography>\r\n                                <Box sx={{\r\n                                  display: 'grid',\r\n                                  gridTemplateColumns: calendar.weeklyTarget && calendar.monthlyTarget && calendar.yearlyTarget\r\n                                    ? 'repeat(3, 1fr)'\r\n                                    : calendar.weeklyTarget && calendar.monthlyTarget || calendar.weeklyTarget && calendar.yearlyTarget || calendar.monthlyTarget && calendar.yearlyTarget\r\n                                      ? 'repeat(2, 1fr)'\r\n                                      : '1fr',\r\n                                  gap: 2\r\n                                }}>\r\n                                  {calendar.weeklyTarget && (\r\n                                    <Box>\r\n                                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                        Weekly\r\n                                      </Typography>\r\n                                      <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\r\n                                        {stats.weeklyProgress.toFixed(1)}%\r\n                                      </Typography>\r\n                                    </Box>\r\n                                  )}\r\n                                  {calendar.monthlyTarget && (\r\n                                    <Box>\r\n                                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                        Monthly\r\n                                      </Typography>\r\n                                      <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\r\n                                        {stats.monthlyProgress.toFixed(1)}%\r\n                                      </Typography>\r\n                                    </Box>\r\n                                  )}\r\n                                  {calendar.yearlyTarget && (\r\n                                    <Box>\r\n                                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                        Yearly\r\n                                      </Typography>\r\n                                      <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\r\n                                        {stats.yearlyProgress.toFixed(1)}%\r\n                                      </Typography>\r\n                                    </Box>\r\n                                  )}\r\n                                </Box>\r\n                              </Box>\r\n                            )}\r\n\r\n                            <Box sx={{\r\n                              p: 1.5,\r\n                              borderRadius: 1,\r\n                              bgcolor: alpha(theme.palette.background.default, 0.6)\r\n                            }}>\r\n                              <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                                PnL Performance\r\n                              </Typography>\r\n                              <Box sx={{\r\n                                display: 'grid',\r\n                                gridTemplateColumns: 'repeat(3, 1fr)',\r\n                                gap: 2\r\n                              }}>\r\n                                <Box>\r\n                                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                    Weekly\r\n                                  </Typography>\r\n                                  <Typography\r\n                                    variant=\"h6\"\r\n                                    sx={{\r\n                                      fontWeight: 600,\r\n                                      color: parseFloat(String(stats.weeklyPnLPercentage)) > 0\r\n                                        ? 'success.main'\r\n                                        : parseFloat(String(stats.weeklyPnLPercentage)) < 0\r\n                                        ? 'error.main'\r\n                                        : 'text.primary'\r\n                                    }}\r\n                                  >\r\n                                    {parseFloat(String(stats.weeklyPnLPercentage)) > 0 ? '+' : ''}{parseFloat(String(stats.weeklyPnLPercentage)).toFixed(1)}%\r\n                                  </Typography>\r\n                                </Box>\r\n                                <Box>\r\n                                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                    Monthly\r\n                                  </Typography>\r\n                                  <Typography\r\n                                    variant=\"h6\"\r\n                                    sx={{\r\n                                      fontWeight: 600,\r\n                                      color: parseFloat(String(stats.monthlyPnLPercentage)) > 0\r\n                                        ? 'success.main'\r\n                                        : parseFloat(String(stats.monthlyPnLPercentage)) < 0\r\n                                        ? 'error.main'\r\n                                        : 'text.primary'\r\n                                    }}\r\n                                  >\r\n                                    {parseFloat(String(stats.monthlyPnLPercentage)) > 0 ? '+' : ''}{parseFloat(String(stats.monthlyPnLPercentage)).toFixed(1)}%\r\n                                  </Typography>\r\n                                </Box>\r\n                                <Box>\r\n                                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                    Yearly\r\n                                  </Typography>\r\n                                  <Typography\r\n                                    variant=\"h6\"\r\n                                    sx={{\r\n                                      fontWeight: 600,\r\n                                      color: parseFloat(String(stats.yearlyPnLPercentage)) > 0\r\n                                        ? 'success.main'\r\n                                        : parseFloat(String(stats.yearlyPnLPercentage)) < 0\r\n                                        ? 'error.main'\r\n                                        : 'text.primary'\r\n                                    }}\r\n                                  >\r\n                                    {parseFloat(String(stats.yearlyPnLPercentage)) > 0 ? '+' : ''}{parseFloat(String(stats.yearlyPnLPercentage)).toFixed(1)}%\r\n                                  </Typography>\r\n                                </Box>\r\n                              </Box>\r\n                            </Box>\r\n                          </Stack>\r\n\r\n                          {!expandedCalendars[calendar.id] && (\r\n                            <Box sx={{ textAlign: 'center' }}>\r\n                              <Button\r\n                                size=\"small\"\r\n                                variant=\"text\"\r\n                                onClick={(e) => handleToggleExpand(e, calendar.id)}\r\n                                startIcon={<ExpandMore />}\r\n                                sx={{ color: 'text.secondary' }}\r\n                              >\r\n                                Show Details\r\n                              </Button>\r\n                            </Box>\r\n                          )}\r\n\r\n                          {expandedCalendars[calendar.id] && (\r\n                            <Box sx={{ textAlign: 'center', mt: 2 }}>\r\n                              <Button\r\n                                size=\"small\"\r\n                                variant=\"text\"\r\n                                onClick={(e) => handleToggleExpand(e, calendar.id)}\r\n                                startIcon={<ExpandLess />}\r\n                                sx={{ color: 'text.secondary' }}\r\n                              >\r\n                                Hide Details\r\n                              </Button>\r\n                            </Box>\r\n                          )}\r\n                        </CardContent>\r\n                        <CardActions sx={{\r\n                          justifyContent: 'flex-end',\r\n                          p: 2,\r\n                          pt: 1,\r\n                          mt: 'auto',\r\n                          borderTop: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\r\n                          position: 'relative',\r\n                          zIndex: 2,\r\n                          backgroundColor: theme.palette.background.paper\r\n                        }}>\r\n                          <Button\r\n                            size=\"small\"\r\n                            startIcon={<ChartIcon />}\r\n                            onClick={(e) => handleViewCharts(e, calendar)}\r\n                            sx={{\r\n                              color: 'primary.main',\r\n                              '&:hover': {\r\n                                bgcolor: alpha(theme.palette.primary.main, 0.1)\r\n                              }\r\n                            }}\r\n                          >\r\n                            View Charts\r\n                          </Button>\r\n                          <Button\r\n                            size=\"small\"\r\n                            onClick={(e) => handleEditClick(e, calendar)}\r\n                            sx={{\r\n                              color: 'primary.main',\r\n                              '&:hover': {\r\n                                bgcolor: alpha(theme.palette.primary.main, 0.1)\r\n                              }\r\n                            }}\r\n                          >\r\n                            Edit\r\n                          </Button>\r\n                          <Button\r\n                            size=\"small\"\r\n                            onClick={(e) => handleDeleteClick(e, calendar.id)}\r\n                            sx={{\r\n                              color: 'error.main',\r\n                              '&:hover': {\r\n                                bgcolor: alpha(theme.palette.error.main, 0.1)\r\n                              }\r\n                            }}\r\n                          >\r\n                            Delete\r\n                          </Button>\r\n                        </CardActions>\r\n                      </Card>\r\n                    );\r\n                  })\r\n                )}\r\n              </Box>\r\n            )}\r\n\r\n            <CalendarFormDialog\r\n              open={isCreateDialogOpen}\r\n              onClose={() => setIsCreateDialogOpen(false)}\r\n              onSubmit={handleCreateCalendarSubmit}\r\n              isSubmitting={isCreating}\r\n              mode=\"create\"\r\n              title=\"Create New Calendar\"\r\n              submitButtonText=\"Create\"\r\n            />\r\n\r\n            <CalendarFormDialog\r\n              open={isEditDialogOpen}\r\n              onClose={() => setIsEditDialogOpen(false)}\r\n              onSubmit={handleEditCalendarSubmit}\r\n              initialData={calendarToEdit || undefined}\r\n              isSubmitting={isEditing}\r\n              mode=\"edit\"\r\n              title=\"Edit Calendar\"\r\n              submitButtonText=\"Save Changes\"\r\n            />\r\n\r\n            <Dialog\r\n              open={isDeleteDialogOpen}\r\n              onClose={() => setIsDeleteDialogOpen(false)}\r\n              maxWidth=\"xs\"\r\n              fullWidth\r\n              {...dialogProps}\r\n            >\r\n              <DialogTitle sx={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: 1,\r\n                color: 'error.main'\r\n              }}>\r\n                <DeleteIcon fontSize=\"small\" />\r\n                Delete Calendar\r\n              </DialogTitle>\r\n              <DialogContent>\r\n                <Typography>\r\n                  Are you sure you want to delete this calendar? This action cannot be undone.\r\n                </Typography>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button\r\n                  onClick={() => setIsDeleteDialogOpen(false)}\r\n                  sx={{ color: 'text.secondary' }}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n                <Button\r\n                  onClick={handleDeleteConfirm}\r\n                  sx={{\r\n                    color: 'error.main',\r\n                  }}\r\n                >\r\n                  Delete\r\n                </Button>\r\n              </DialogActions>\r\n            </Dialog>\r\n\r\n            {/* Performance Charts Dialog */}\r\n            <Dialog\r\n              open={selectedCalendarForCharts !== null}\r\n              onClose={handleCloseCharts}\r\n              maxWidth=\"lg\"\r\n              fullWidth\r\n              {...dialogProps}\r\n              PaperProps={{\r\n                sx: {\r\n                  minHeight: '80vh',\r\n                  maxHeight: '90vh',\r\n                  bgcolor: 'background.paper',\r\n                  backgroundImage: 'none'\r\n                }\r\n              }}\r\n            >\r\n              <DialogTitle sx={{\r\n                borderBottom: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\r\n                pb: 2,\r\n                height: '60px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                gap: 1\r\n              }}>\r\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                  <ChartIcon color=\"primary\" />\r\n                  <Typography variant=\"h6\">\r\n                    Performance Charts - {selectedCalendarForCharts?.name}\r\n                  </Typography>\r\n                </Box>\r\n                {currentTimePeriod === 'month' ? (\r\n                  <Button\r\n                    onClick={() => setIsDateDialogOpen(true)}\r\n                    startIcon={<CalendarMonth />}\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                  >\r\n                    {format(selectedMonth, 'MMMM yyyy')}\r\n                  </Button>\r\n                ) : currentTimePeriod === 'year' ? (\r\n                  <FormControl size=\"small\" variant=\"outlined\">\r\n                    <Select\r\n                      value={selectedMonth.getFullYear()}\r\n                      onChange={(e) => handleYearChange(e.target.value as number)}\r\n                      sx={{ minWidth: 120 }}\r\n                    >\r\n                      {Array.from(\r\n                        { length: 10 },\r\n                        (_, i) => new Date().getFullYear() - i\r\n                      ).map((year) => (\r\n                        <MenuItem key={year} value={year}>\r\n                          {year}\r\n                        </MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  </FormControl>\r\n                ) : null}\r\n              </DialogTitle>\r\n              <DialogContent sx={{\r\n                p: 3,\r\n                backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.background.paper, 0.6) : '#f0f0f0',\r\n                '&::-webkit-scrollbar': {\r\n                  width: '8px',\r\n                },\r\n                '&::-webkit-scrollbar-track': {\r\n                  background: alpha(theme.palette.background.default, 0.5),\r\n                  borderRadius: '4px',\r\n                },\r\n                '&::-webkit-scrollbar-thumb': {\r\n                  background: alpha(theme.palette.primary.main, 0.2),\r\n                  borderRadius: '4px',\r\n                  '&:hover': {\r\n                    background: alpha(theme.palette.primary.main, 0.3),\r\n                  },\r\n                },\r\n              }}>\r\n                {selectedCalendarForCharts && (\r\n                  isLoading || (loadAllTrades && selectedCalendarForCharts.cachedTrades.length === 0) ? (\r\n                    <Box sx={{\r\n                      display: 'flex',\r\n                      flexDirection: 'column',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      height: '300px'\r\n                    }}>\r\n                      <CircularProgress size={40} />\r\n                      <Typography variant=\"body2\" sx={{ mt: 2, color: 'text.secondary' }}>\r\n                        Loading chart data...\r\n                      </Typography>\r\n                    </Box>\r\n                  ) : (\r\n                    <PerformanceCharts\r\n                      trades={selectedCalendarForCharts.cachedTrades || []}\r\n                      selectedDate={selectedMonth}\r\n                      accountBalance={selectedCalendarForCharts.accountBalance}\r\n                      monthlyTarget={selectedCalendarForCharts.monthlyTarget ?? undefined}\r\n                      maxDailyDrawdown={selectedCalendarForCharts.maxDailyDrawdown}\r\n                      onTimePeriodChange={handleTimePeriodChange}\r\n                    />\r\n                  )\r\n                )}\r\n\r\n                 {/* TradeDetailDialog has been removed */}\r\n              </DialogContent>\r\n              <DialogActions sx={{\r\n                p: 2,\r\n                borderTop: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\r\n                gap: 1\r\n              }}>\r\n                <Button\r\n                  onClick={handleCloseCharts}\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                >\r\n                  Close\r\n                </Button>\r\n              </DialogActions>\r\n            </Dialog>\r\n\r\n            {/* Date Selection Dialog */}\r\n            {selectedCalendarForCharts && currentTimePeriod === 'month' && (\r\n              <SelectDateDialog\r\n                open={isDateDialogOpen}\r\n                onClose={() => setIsDateDialogOpen(false)}\r\n                onDateSelect={(date) => {\r\n                  setSelectedMonth(date);\r\n                  setIsDateDialogOpen(false);\r\n                }}\r\n                initialDate={selectedMonth}\r\n                trades={selectedCalendarForCharts.cachedTrades || []}\r\n                accountBalance={selectedCalendarForCharts.accountBalance}\r\n                monthlyTarget={selectedCalendarForCharts.monthlyTarget ?? undefined}\r\n                yearlyTarget={selectedCalendarForCharts.yearlyTarget}\r\n              />\r\n            )}\r\n\r\n\r\n          </>\r\n        ) : (\r\n          <Box sx={{ textAlign: 'center', mt: 8 }}>\r\n            <Typography variant=\"h5\" gutterBottom>\r\n              Welcome to Trade Tracker\r\n            </Typography>\r\n            <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mb: 4 }}>\r\n              Sign in to start managing your trades\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n      </Container>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default CalendarHome;"],"names":["_ref","open","onClose","onSubmit","initialData","isSubmitting","mode","title","submitButtonText","name","setName","useState","accountBalance","setAccountBalance","maxDailyDrawdown","setMaxDailyDrawdown","weeklyTarget","setWeeklyTarget","monthlyTarget","setMonthlyTarget","yearlyTarget","setYearlyTarget","riskPerTrade","setRiskPerTrade","dynamicRiskEnabled","setDynamicRiskEnabled","increasedRiskPercentage","setIncreasedRiskPercentage","profitThresholdPercentage","setProfitThresholdPercentage","useEffect","_initialData$accountB","_initialData$maxDaily","_initialData$weeklyTa","_initialData$monthlyT","_initialData$yearlyTa","_initialData$riskPerT","_initialData$increase","_initialData$profitTh","toString","resetForm","isFormValid","trim","dialogTitle","dialogActions","_jsxs","_Fragment","children","_jsx","Button","onClick","disabled","async","balance","parseFloat","maxDrawdown","weeklyTargetValue","undefined","monthlyTargetValue","yearlyTargetValue","riskPerTradeValue","increasedRiskValue","profitThresholdValue","isNaN","variant","sx","minWidth","display","alignItems","gap","CircularProgress","size","color","BaseDialog","maxWidth","fullWidth","actions","hideFooterCancelButton","Stack","spacing","mt","TextField","label","value","onChange","e","target","autoFocus","test","type","InputProps","startAdornment","Box","component","mr","endAdornment","ml","helperText","border","borderColor","borderRadius","p","Typography","mb","fontWeight","FormControlLabel","control","Switch","checked","shimmer","keyframes","CalendarSkeleton","theme","useTheme","Card","height","CardContent","width","background","alpha","palette","paper","backgroundSize","animation","direction","Divider","my","opacity","map","i","CardActions","justifyContent","pt","borderTop","divider","CalendarHome","_selectedCalendarForC","_selectedCalendarForC2","calendars","onCreateCalendar","onDeleteCalendar","onUpdateCalendar","onToggleTheme","isLoading","externalLoading","loadAllTrades","user","signInWithGoogle","signOut","useAuth","isCreateDialogOpen","setIsCreateDialogOpen","isDeleteDialogOpen","setIsDeleteDialogOpen","isEditDialogOpen","setIsEditDialogOpen","calendarToDelete","setCalendarToDelete","calendarToEdit","setCalendarToEdit","isCreating","setIsCreating","isEditing","setIsEditing","expandedCalendars","setExpandedCalendars","navigate","useNavigate","selectedCalendarForCharts","setSelectedCalendarForCharts","selectedMonth","setSelectedMonth","Date","isDateDialogOpen","setIsDateDialogOpen","currentTimePeriod","setCurrentTimePeriod","loadAttempted","setLoadAttempted","length","updatedCalendar","find","c","id","cachedTrades","handleToggleExpand","calendarId","stopPropagation","prev","handleCloseCharts","useMemo","trades","dates","trade","date","minDate","Math","min","d","getTime","maxDate","max","months","currentDate","getFullYear","getMonth","endDate","push","AppBar","position","elevation","backdropFilter","backgroundColor","default","borderBottom","zIndex","drawer","Toolbar","flexGrow","IconButton","bgcolor","primary","main","LightModeIcon","DarkModeIcon","email","Avatar","src","photoURL","fontSize","toUpperCase","startIcon","LogoutIcon","error","console","GoogleIcon","Container","AddIcon","gridTemplateColumns","xs","sm","md","Array","from","_","index","calendar","stats","getCalendarStats","cursor","transition","overflow","flexDirection","transform","boxShadow","shadows","content","top","left","right","loadedYears","handleCalendarClick","className","bottom","light","pointerEvents","maxHeight","gutterBottom","totalPnL","TrendingUp","TrendingDown","ExpandLess","ExpandMore","CalendarIcon","format","createdAt","EditIcon","lastModified","px","formatCurrency","winRate","toFixed","success","grey","growthPercentage","initialBalance","winCount","lossCount","Tooltip","arrow","placement","InfoOutlined","profitFactor","avgWin","drawdownRecoveryNeeded","drawdownDuration","drawdownStartDate","drawdownEndDate","avgLoss","weeklyProgress","monthlyProgress","yearlyProgress","String","weeklyPnLPercentage","monthlyPnLPercentage","yearlyPnLPercentage","textAlign","ChartIcon","handleViewCharts","handleEditClick","handleDeleteClick","py","align","CalendarFormDialog","data","updates","Dialog","dialogProps","DialogTitle","DeleteIcon","DialogContent","DialogActions","handleDeleteConfirm","PaperProps","minHeight","backgroundImage","pb","CalendarMonth","FormControl","Select","year","newDate","handleYearChange","MenuItem","PerformanceCharts","selectedDate","onTimePeriodChange","period","SelectDateDialog","onDateSelect","initialDate"],"sourceRoot":""}