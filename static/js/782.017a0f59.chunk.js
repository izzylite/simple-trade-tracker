"use strict";(self.webpackChunksimple_trade_tracker=self.webpackChunksimple_trade_tracker||[]).push([[782],{70782:(e,t,r)=>{r.d(t,{BL:()=>s,LY:()=>c,gi:()=>h,moveCalendarToTrash:()=>l,s:()=>i});var a=r(55472),o=r(91758),n=r(87498);const d="calendars",l=async(e,t)=>{try{const r=(0,a.H9)(o.db,d,e),n=new Date,l=new Date(n.getTime()+2592e6);await(0,a.mZ)(r,{isDeleted:!0,deletedAt:a.Dc.fromDate(n),deletedBy:t,autoDeleteAt:a.Dc.fromDate(l),lastModified:a.Dc.fromDate(n)}),console.log(`Calendar ${e} moved to trash`)}catch(r){throw console.error("Error moving calendar to trash:",r),r}},s=async e=>{try{const t=(0,a.H9)(o.db,d,e);await(0,a.c4)(o.db,(async e=>{const r=await e.get(t);if(!r.exists())throw new Error("Calendar not found");if(!r.data().isDeleted)throw new Error("Calendar is not in trash");e.update(t,{isDeleted:!1,deletedAt:null,deletedBy:null,autoDeleteAt:null,lastModified:a.Dc.fromDate(new Date)})})),console.log(`Calendar ${e} restored from trash`)}catch(t){throw console.error("Error restoring calendar from trash:",t),t}},c=async e=>{try{const t=(0,a.H9)(o.db,d,e);await(0,a.c4)(o.db,(async e=>{const r=await e.get(t);if(!r.exists())throw new Error("Calendar not found");if(!r.data().isDeleted)throw new Error("Calendar is not in trash");e.delete(t)})),console.log(`Calendar ${e} permanently deleted`)}catch(t){throw console.error("Error permanently deleting calendar:",t),t}},i=async e=>{try{const t=(0,a.P)((0,a.rJ)(o.db,d),(0,a._M)("userId","==",e),(0,a._M)("isDeleted","==",!0));return(await(0,a.GG)(t)).docs.map((e=>{const t=(0,n.A6)(e),r=e.data();return{...t,deletedAt:r.deletedAt.toDate(),deletedBy:r.deletedBy,autoDeleteAt:r.autoDeleteAt.toDate()}}))}catch(t){throw console.error("Error getting trash calendars:",t),t}},h=e=>{const t=new Date,r=e.getTime()-t.getTime(),a=Math.ceil(r/864e5);return Math.max(0,a)}}}]);
//# sourceMappingURL=782.017a0f59.chunk.js.map