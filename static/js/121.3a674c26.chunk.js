"use strict";(self.webpackChunksimple_trade_tracker=self.webpackChunksimple_trade_tracker||[]).push([[121,678],{49806:(e,t,r)=>{r.d(t,{A:()=>b});var a=r(65043),s=r(58387),n=r(86061),o=r(31807),i=r(3635),d=r(94943),l=r(70883),c=r(79049),x=r(70579);const m=(0,c.A)(),h=(0,l.A)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,i.A)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),u=e=>(0,d.A)({props:e,name:"MuiContainer",defaultTheme:m});var p=r(97194),g=r(58128),f=r(28301);const A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=h,useThemeProps:r=u,componentName:d="MuiContainer"}=e,l=t((e=>{let{theme:t,ownerState:r}=e;return{width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!r.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}}}),(e=>{let{theme:t,ownerState:r}=e;return r.fixed&&Object.keys(t.breakpoints.values).reduce(((e,r)=>{const a=r,s=t.breakpoints.values[a];return 0!==s&&(e[t.breakpoints.up(a)]={maxWidth:`${s}${t.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:t,ownerState:r}=e;return{..."xs"===r.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},...r.maxWidth&&"xs"!==r.maxWidth&&{[t.breakpoints.up(r.maxWidth)]:{maxWidth:`${t.breakpoints.values[r.maxWidth]}${t.breakpoints.unit}`}}}})),c=a.forwardRef((function(e,t){const a=r(e),{className:c,component:m="div",disableGutters:h=!1,fixed:u=!1,maxWidth:p="lg",classes:g,...f}=a,A={...a,component:m,disableGutters:h,fixed:u,maxWidth:p},b=((e,t)=>{const{classes:r,fixed:a,disableGutters:s,maxWidth:d}=e,l={root:["root",d&&`maxWidth${(0,i.A)(String(d))}`,a&&"fixed",s&&"disableGutters"]};return(0,o.A)(l,(e=>(0,n.Ay)(t,e)),r)})(A,d);return(0,x.jsx)(l,{as:m,ownerState:A,className:(0,s.A)(b.root,c),ref:t,...f})}));return c}({createStyledComponent:(0,g.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,p.A)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,f.b)({props:e,name:"MuiContainer"})}),b=A},77992:(e,t,r)=>{r.r(t),r.d(t,{default:()=>W});var a=r(65043),s=r(99900),n=r(4995),o=r(34943),i=r(53969),d=r(23182),l=r(49806),c=r(91449),x=r(67310),m=r(12955),h=r(80172),u=r(94799),p=r(70298),g=r(55895),f=r(99992),A=r(70579);const b=(0,f.A)((0,A.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");var v=r(60267),j=r(29651),k=r(39993),w=r(52395),y=r(14204),S=r(32515);const C=e=>{let{shareId:t}=e;const r=(0,v.A)(),[s,n]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0),[l,x]=(0,a.useState)(null),[m,f]=(0,a.useState)(null);if((0,a.useEffect)((()=>{t&&(async()=>{try{d(!0);const e=(0,w.Uz)(),r=(0,w.Qg)(e,"getSharedTradeV2"),a=(await r({shareId:t})).data;if(!a||!a.trade)return void x("Shared trade not found or no longer available");console.log("Raw shared trade data:",a),console.log("Trade date:",a.trade.date),console.log("Shared at:",a.sharedAt);const s=e=>{if(!e)return new Date;if(e instanceof Date)return e;if(e.toDate&&"function"===typeof e.toDate)return e.toDate();if(void 0!==e._seconds)return new Date(1e3*e._seconds+(e._nanoseconds||0)/1e6);if("number"===typeof e)return new Date(e);if("string"===typeof e){const t=new Date(e);return isNaN(t.getTime())?new Date:t}return console.warn("Unknown timestamp format:",e),new Date};n({trade:{...a.trade,date:s(a.trade.date)},viewCount:a.viewCount||0,sharedAt:s(a.sharedAt)})}catch(e){console.error("Error loading shared trade:",e),x("Failed to load shared trade")}finally{d(!1)}})()}),[t]),o)return(0,A.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:(0,A.jsx)(h.A,{})});if(l||!s)return(0,A.jsx)(i.A,{sx:{p:3},children:(0,A.jsx)(c.A,{severity:"error",children:l||"Shared trade not found"})});const{trade:C,viewCount:T,sharedAt:W}=s;return(0,A.jsxs)(i.A,{sx:{maxWidth:800,mx:"auto",p:{xs:2,sm:3},width:"100%"},children:[m&&(0,A.jsx)(S.A,{open:!!m,onClose:()=>f(null),imageProp:m}),(0,A.jsxs)(u.A,{elevation:2,sx:{p:{xs:2,sm:3},mb:{xs:2,sm:3},background:(0,j.X4)(r.palette.primary.main,.05),border:`1px solid ${(0,j.X4)(r.palette.primary.main,.1)}`},children:[(0,A.jsxs)(p.A,{direction:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},justifyContent:"space-between",spacing:{xs:1,sm:0},mb:2,children:[(0,A.jsx)(g.A,{variant:"h5",sx:{fontWeight:600,fontSize:{xs:"1.25rem",sm:"1.5rem"}},children:"\ud83d\udcc8 Shared Trade"}),(0,A.jsxs)(p.A,{direction:"row",alignItems:"center",spacing:1,children:[(0,A.jsx)(b,{sx:{fontSize:16,color:"text.secondary"}}),(0,A.jsxs)(g.A,{variant:"caption",color:"text.secondary",children:[T," views"]})]})]}),(0,A.jsxs)(g.A,{variant:"body2",color:"text.secondary",children:["Shared on ",W&&!isNaN(W.getTime())?(0,k.A)(W,"MMMM d, yyyy"):"Unknown date"]})]}),(0,A.jsx)(y.A,{tradeData:C,isExpanded:!0,setZoomedImage:(e,t,r)=>{f({selectetdImageIndex:r||0,allImages:t||[e]})}}),(0,A.jsx)(i.A,{sx:{mt:3,textAlign:"center"},children:(0,A.jsx)(g.A,{variant:"caption",color:"text.secondary",children:"Powered by Trade Tracker"})})]})};var T=r(3877);const W=()=>{const{shareId:e}=(0,s.g)(),t=(0,s.zy)(),r=(0,s.Zp)(),h=t.state,[u,p]=(0,a.useState)((()=>localStorage.getItem("themeMode")||"light"));(0,a.useEffect)((()=>{localStorage.setItem("themeMode",u)}),[u]);const g=()=>{p((e=>"light"===e?"dark":"light"))},f=()=>{null!==h&&void 0!==h&&h.referrer?r(h.referrer):r("/")},b=(0,a.useMemo)((()=>(0,x.A)((0,m.J)(u))),[u]);return e?(0,A.jsxs)(n.A,{theme:b,children:[(0,A.jsx)(o.Ay,{}),(0,A.jsxs)(i.A,{sx:{minHeight:"100vh",backgroundColor:"background.default"},children:[(0,A.jsx)(T.A,{onToggleTheme:g,mode:u,title:"\ud83d\udcc8 Trade Tracker - Shared Trade",showBackButton:!(null===h||void 0===h||!h.referrer),onBackClick:f}),(0,A.jsx)(d.A,{}),(0,A.jsx)(l.A,{maxWidth:"md",sx:{pt:{xs:2,sm:4},pb:{xs:2,sm:4},px:{xs:1,sm:3}},children:(0,A.jsx)(C,{shareId:e})})]})]}):(0,A.jsxs)(n.A,{theme:b,children:[(0,A.jsx)(o.Ay,{}),(0,A.jsxs)(i.A,{sx:{minHeight:"100vh",backgroundColor:"background.default"},children:[(0,A.jsx)(T.A,{onToggleTheme:g,mode:u,title:"\ud83d\udcc8 Trade Tracker - Shared Trade",showBackButton:!(null===h||void 0===h||!h.referrer),onBackClick:f}),(0,A.jsx)(d.A,{}),(0,A.jsx)(l.A,{maxWidth:"md",sx:{pt:{xs:2,sm:4},pb:{xs:2,sm:4},px:{xs:1,sm:3}},children:(0,A.jsx)(c.A,{severity:"error",children:"Invalid share link"})})]})]})}}}]);
//# sourceMappingURL=121.3a674c26.chunk.js.map