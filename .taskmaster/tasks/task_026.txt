# Task ID: 26
# Title: Interface Consolidation: Frontend to Database Schema Migration
# Status: pending
# Dependencies: None
# Priority: high
# Description: Consolidate multiple conflicting Trade and Calendar interfaces into a single canonical interface that matches the Supabase database schema exactly, eliminating transformers and ensuring consistent snake_case field names throughout the application.
# Details:
This task involves updating all frontend components, services, and utilities to use the database schema directly with snake_case field names instead of camelCase. Key changes include: calendarId → calendar_id, userId → user_id, type → trade_type, date → trade_date, entryPrice → entry_price, exitPrice → exit_price, and many more field mappings across Trade and Calendar interfaces.

# Test Strategy:
Test all UI components display data correctly, verify database operations work, validate AI functions work with new schema, ensure no functionality is broken after field name changes.

# Subtasks:
## 1. Update Type Definitions [done]
### Dependencies: None
### Description: Update Trade and Calendar interfaces in src/types/dualWrite.ts to use snake_case field names matching the database schema exactly
### Details:
Change all camelCase fields to snake_case: calendarId → calendar_id, userId → user_id, type → trade_type, date → trade_date, entryPrice → entry_price, exitPrice → exit_price, isDeleted → is_deleted, etc. Remove duplicate interfaces and ensure single source of truth.

## 2. Update Core Components [done]
### Dependencies: 26.1
### Description: Update main application components to use snake_case field names
### Details:
Update src/App.tsx, src/components/TradeCalendar.tsx, src/components/TradeDetailExpanded.tsx to use new field names like calendar.cached_trades, calendar.loaded_years, trade.calendar_id, trade.user_id, trade.trade_type, trade.trade_date, etc.

## 3. Update Trade Components [done]
### Dependencies: 26.1
### Description: Update trade-related components to use snake_case field names
### Details:
Update src/components/trades/TradeForm.tsx, src/components/trades/TradeFormDialog.tsx, src/components/trades/DayDialog.tsx, src/components/aiChat/TradeCard.tsx to use trade.entry_price, trade.exit_price, trade.risk_to_reward, trade.partials_taken, trade.is_deleted, etc.

## 4. Update Service Layer [done]
### Dependencies: 26.1
### Description: Update service functions to use snake_case field names
### Details:
Update src/services/calendarService.ts, src/services/tradeService.ts to use new field names in all CRUD operations, data transformations, and API calls. Remove any transformation functions that convert between camelCase and snake_case.

## 5. Update Utility Functions [done]
### Dependencies: 26.1
### Description: Update utility functions to use snake_case field names
### Details:
Update src/utils/tradeExportImport.ts and other utility files to use new field names in data processing, export/import operations, and calculations. Ensure all utility functions work with the new schema.

## 6. Update AI Functions [done]
### Dependencies: 26.1
### Description: Update AI functions to use snake_case field names
### Details:
Update all files in src/services/ai/functions/ to use new field names in data processing, function calling, and AI analysis. Ensure AI chat functionality works correctly with the new schema.

## 7. Testing and Validation [pending]
### Dependencies: 26.2, 26.3, 26.4, 26.5, 26.6
### Description: Comprehensive testing of all functionality with new field names
### Details:
Test all UI components display data correctly, verify database operations work, validate AI functions work with new schema, ensure trade creation/editing works, test calendar statistics calculations, verify export/import functionality, and ensure no functionality is broken.

## 8. Cleanup and Documentation [pending]
### Dependencies: 26.7
### Description: Final cleanup and documentation of the interface consolidation
### Details:
Remove any remaining duplicate interfaces, clean up unused transformation functions, update documentation to reflect the new single interface approach, and ensure the codebase is clean and maintainable with consistent snake_case field usage throughout.

